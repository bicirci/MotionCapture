(function(){var V,s;(function(f){var e={},q=function(k){var n=e[k];if(n==f)throw"Module not defined or loaded: "+k;if(n.compiled)return n.compiled;var h=[];if(n.dependencies&&0<n.dependencies.length)for(var c=0;c<n.dependencies.length;c++)h.push(q(n.dependencies[c]));n.compiled=n.factory.apply(this,h.concat(n.extraArguments));if(!n.compiled)throw"Module defined but not loadable: "+k;return n.compiled};V=function(e,n){var h=e,c=n,d=2;h.splice||(c=h,h=f,d--);for(var d=Array.prototype.slice.call(arguments,
d),b=[],a=0;a<h.length;a++)b.push(q(h[a]));c.apply(this,b.concat(d))};s=function(k,n,h){var c=n,d=h,b=3;c.splice||(d=c,c=f,b--);b=Array.prototype.slice.call(arguments,b);e[k]={dependencies:c,factory:d,extraArguments:b||[]}}})();s("components","component.bookmark component.collapseexpand component.like component.links component.moderate component.page component.rate component.searchresult component.tag component.theater component.webpreview component.tourtip component.viewhtml component.previewhtml component.masonry component.resizedimage component.tip component.select".split(" "),
function(){return{}});s("component.bookmark",["module.ui"],function(f,e,q,k){e.telligent.evolution.ui.components.bookmark={setup:function(){},add:function(f,h){f.empty();var c={contentId:h.contentid,contentTypeId:h.contenttypeid,typeId:h.bookmarktypeid,initialState:"true"==h.value,contentTypeName:h.contenttypename,onBookmark:function(c,b,a,m){e.telligent.evolution.post({url:e.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/bookmark.json?ContentId={ContentId}&ContentTypeId={ContentTypeId}"+(a?"&TypeId="+
a:""),data:{ContentId:c,ContentTypeId:b},dataType:"json",success:function(a){m()}})},onUnbookmark:function(c,b,a,m){e.telligent.evolution.del({url:e.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/bookmark.json?ContentId={ContentId}"+(a?"&TypeId="+a:""),data:{ContentId:c},dataType:"json",success:function(a){m()}})}};h.configuration.deleteBookmarkText&&(c.deleteBookmarkText=h.configuration.deleteBookmarkText);h.configuration.addBookmarkText&&(c.addBookmarkText=h.configuration.addBookmarkText);h.configuration.processingText&&
(c.processingText=h.configuration.processingText);h.configuration.addBookmarkCssClass&&(c.addBookmarkCssClass=h.configuration.addBookmarkCssClass);h.configuration.deleteBookmarkCssClass&&(c.deleteBookmarkCssClass=h.configuration.deleteBookmarkCssClass);h.configuration.processingCssClass&&(c.processingCssClass=h.configuration.processingCssClass);e(f).evolutionBookmark(c)}};return{}},jQuery,window);s("component.collapseexpand",["module.ui"],function(f,e,q,k){e.telligent.evolution.ui.components.collapseexpand=
{setup:function(){},add:function(f,h){var c=e("<a></a>").attr({href:"#"}).text(h.collapsetext),d=!1;c.click(function(){d?(f.slideUp(),c.text(h.collapsetext)):(f.slideDown(),c.text(h.expandtext));d=!d;return!1});f.removeClass().before(c).hide()}};return{}},jQuery,window);s("component.like",["module.ui","module.messaging"],function(f,e,q,k,n){var h=function(c,d,b,a){q.telligent.evolution.get({url:q.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/likes.json",data:{ContentId:c,ContentTypeId:d,TypeId:b,
SortBy:"Date",SortOrder:"Descending",PageSize:1,PageIndex:0},cache:!1,dataType:"json",success:function(b){a.call(this,{count:b.TotalCount,latestLike:0<b.Likes.length?b.Likes[0]:null})}})};q.telligent.evolution.messaging.subscribe("ui.like",function(c){(c.typeId?q('.ui-like[data-contentid="'+c.contentId+'"][data-contenttypeid="'+c.contentTypeId+'"][data-typeid="'+c.typeId+'"]'):q('.ui-like[data-contentid="'+c.contentId+'"][data-contenttypeid="'+c.contentTypeId+'"]')).attr("data-initialstate",c.liked.toString()).attr("data-initialcount",
c.count.toString()).attr("data-initialmessage",c.message.toString())});q.telligent.evolution.ui.components.like={setup:function(){q.fn.evolutionLike.delegatePopups({containerSelector:".content-fragment",delegatedSelector:".ui-like",onList:function(c,d,b,a,m,g){q.telligent.evolution.get({url:q.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/likes.json",data:{ContentId:c,ContentTypeId:d,TypeId:b,SortBy:"Date",SortOrder:"Descending",PageSize:m||20,PageIndex:g||0},cache:!1,dataType:"json",success:function(b){q.telligent.evolution.batch(function(){q.each(b.Likes,
function(a,b){q.telligent.evolution.get({url:q.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/ui/image.json",data:{url:b.User.AvatarUrl,maxWidth:32,maxHeight:32,resizeMethod:"ZoomAndCrop"}}).done(function(a){b.userAvatarHtml=a.Html})})}).done(function(){a({likers:q.map(b.Likes,function(a){return{displayName:a.User.DisplayName,profileUrl:a.User.ProfileUrl,avatarHtml:a.userAvatarHtml}}),hasMorePages:(b.PageIndex+1)*b.PageSize<b.TotalCount})})}})},onOptions:function(c){c=q.telligent.evolution.ui.data(c);
return{contentId:c.contentid,contentTypeId:c.contenttypeid,typeId:c.configuration.LikeTypeId}}})},add:function(c,d){var b="true"===d.readonly;q(c).evolutionLike({contentId:d.contentid,contentTypeId:d.contenttypeid,initialState:d.initialstate,initialMessage:d.initialmessage,initialCount:d.initialcount,format:b?d.format.replace("{toggle}",""):d.format,typeId:d.configuration.LikeTypeId,onLike:function(a,b,c,d){q.fn.evolutionTip.hide();var l={ContentId:a,ContentTypeId:b};null!==c&&0<c.length&&(l.TypeId=
c);q.telligent.evolution.post({url:q.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/likes.json",data:l,cache:!1,dataType:"json",success:function(r){h(a,b,c,d)}})},onUnlike:function(a,b,c,d){q.fn.evolutionTip.hide();var l={ContentId:a};null!==c&&0<c.length&&(l.TypeId=c);q.telligent.evolution.del({url:q.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/like.json",data:l,cache:!1,dataType:"json",success:function(r){h(a,b,c,d)}})}})}};return{}},jQuery,window);s("component.links",["module.ui","lib.dynamicLinks",
"lib.sheetProvider","lib.util"],function(f,e,q,k,n,h,c){function d(c,d,g){!0===c.data("linkshown")?(c.data("linkshown",!1),n.fn.uilinks.hide()):(n.telligent.evolution.messaging.publish("ui.links.show"),n(window).width()<l.minWidth?a(d,g):b(c,d))}function b(a,b){a.css({position:"relative "});for(var c=n(document.createElement("ul")),d=0;d<b.length;d++){var g=n(document.createElement("li"));g.append(n(b[d].element).css("float","none").get(0));c.append(g)}c.on("mouseleave",function(){n.fn.uilinks.hide();
a.data("linkshown",!1)});p?p.glowPopUpPanel("hide").glowPopUpPanel("empty","").glowPopUpPanel("append",c).glowPopUpPanel("show",a):p=n("<div></div>").glowPopUpPanel({cssClass:"links-popup-panel",zIndex:1500,hideOnDocumentClick:!0}).glowPopUpPanel("append",c).glowPopUpPanel("show",a).on("glowPopUpPanelHidden",function(){a.data("linkshown",!1)});a.data("linkshown",!0)}function a(a,b){var c=a.slice(0);c.push(b);q.actionSheet.show({links:n.map(c,function(a){return a.element})});q.actionSheet.content().on("click",
"a",function(a){q.actionSheet.hide()});b.element.on("click",function(a){a.preventDefault();q.actionSheet.hide();n.telligent.evolution.messaging.publish("ui.links.hide");return!1});var d=n.telligent.evolution.messaging.subscribe("sheet.closed",function(){n.each(a,function(a,b){m(n(b.element))});n.telligent.evolution.messaging.unsubscribe(d)})}function m(a){a.is('[class^="ui-"]')&&!a.hasClass("ui-tourtip")?a.empty().remove():a.detach()}function g(a,b,c){clearTimeout(a.reflowWaitTimeout);n(h).width()<
b.width()?(a.reflowWaitCheckCount++,10>a.reflowWaitCheckCount&&(a.reflowWaitTimeout=setTimeout(function(){g(a,b,c)},250))):c.render()}var p;n.fn.uilinks=function(){var a=this.data("_dynamic_links"),b=Array.prototype.slice.call(arguments,0),c=b[0];if(!a)return this;if("add"==c)c=b[1],b=n.extend({},{className:null,selected:!1},b[2]||{}),a.addLink({element:c,className:b.className,selected:b.selected});else if("insert"==c){var c=b[1],g=b[2],b=n.extend({},{className:null,selected:!1},b[3]||{});a.addLink({element:c,
className:b.className,selected:b.selected},g)}else"remove"==c?a.removeLink(b[1]):"show"==c?(b=b[1]||a.moreLink().element,d(b,a.links(!0),a.cancelLink())):"hide"==c&&n.fn.uilinks.hide();return this};n.fn.uilinks.hide=function(){n.telligent.evolution.messaging.publish("ui.links.hide");q.actionSheet.hide();p&&p.glowPopUpPanel("hide")};var l={setup:function(){},add:function(a,b){a=n(a);var c=a.find("> li, > ul > li"),p=b.maxlinks,l=b.minlinks,f=null;a.removeClass("ui-links");var w={parent:a,links:[],
onShowMore:function(a,b){d(f,a,b)}};p&&(w.maxLinks=parseInt(p,10));l&&(w.minLinks=parseInt(l,10));w.direction=b.direction;for(p=0;p<c.length;p++){var l=n(c[p]),k=l.children();m(k);var y=k.is("[data-selected]");k.is("[data-more]")?(f=k,w.moreLink={element:k,selected:y,className:l.get(0).className}):k.is("[data-cancel]")?w.cancelLink={element:k,selected:y,className:l.get(0).className}:w.links.push({element:k,selected:y,className:l.get(0).className})}a.empty();var q=new e(w);a.show();b.reflowWaitCheckCount=
0;b.reflowWaitTimeout=null;g(b,a,q);a.data("_dynamic_links",q);n(window).on("resized",function(a,b){b.oldWidth!=b.newWidth&&q.render()});n.telligent.evolution.messaging.subscribe("mobile.orientationchange",function(){h.setTimeout(function(){q.render()},300)})},minWidth:570};n.telligent=n.telligent||{};n.telligent.evolution=n.telligent.evolution||{};n.telligent.evolution.ui=n.telligent.evolution.ui||{};n.telligent.evolution.ui.components=n.telligent.evolution.ui.components||{};return n.telligent.evolution.ui.components.links=
l},jQuery,window);s("component.masonry",["module.ui","plugin.evolutionMasonry"],function(f,e,q,k,n){f={setup:function(){},add:function(h,c){q(h).evolutionMasonry({columnClass:c.columnclass||q.fn.evolutionMasonry.defaults.columnClass}).css({visibility:"visible"})}};q.telligent=q.telligent||{};q.telligent.evolution=q.telligent.evolution||{};q.telligent.evolution.ui=q.telligent.evolution.ui||{};q.telligent.evolution.ui.components=q.telligent.evolution.ui.components||{};return q.telligent.evolution.ui.components.masonry=
f},jQuery,window);s("component.moderate",["module.ui"],function(f,e,q,k){var n=function(h,c,d){e.telligent.evolution.post({url:e.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/abusereports.json",data:{ContentId:h,ContentTypeId:c},cache:!1,dataType:"json",success:function(b){d(b)}})};e.telligent.evolution.ui.components.moderate={setup:function(){},add:function(h,c){h=e(h);var d={contentId:c.contentid,contentTypeId:c.contenttypeid,supportsAbuse:"true"===c.supportsabuse,initialState:"true"===c.initialstate,
onReport:n};if(c.configuration&&c.configuration.AdditionalLinks){var b=e.parseJSON(c.configuration.AdditionalLinks);if(!d.supportsAbuse&&0===b.length)return;d.onGetAdditionalLinks=function(a){a(b)}}else if(c.configuration&&c.configuration.AdditionalLinksUrl){if(!d.supportsAbuse&&0===c.configuration.AdditionalLinksUrl.length)return;d.onGetAdditionalLinks=function(a){e.telligent.evolution.get({url:c.configuration.AdditionalLinksUrl,cache:!1,dataType:"json",success:function(b){a(b.links||[])}})}}if(d.supportsAbuse||
d.onGetAdditionalLinks)c.configuration&&c.configuration.LinkClassName&&(d.linkClassName=c.configuration.LinkClassName),h.evolutionModerate(d)}};return{}},jQuery,window);s("component.page",["module.ui"],function(f,e,q,k){var n={};e.telligent.evolution.ui.components.page={setup:function(){},add:function(h,c){var d={currentPage:parseInt(c.currentpage,10),pageSize:parseInt(c.pagesize,10),totalItems:parseInt(c.totalitems,10),showPrevious:"undefined"===typeof c.configuration.ShowPrevious?!1:"true"===c.configuration.ShowPrevious,
showNext:"undefined"===typeof c.configuration.ShowNext?!1:"true"===c.configuration.ShowNext,showFirst:"undefined"===typeof c.configuration.ShowFirst?!0:"true"===c.configuration.ShowFirst,showLast:"undefined"===typeof c.configuration.ShowLast?!0:"true"===c.configuration.ShowLast,showIndividualPages:"undefined"===typeof c.configuration.ShowIndividualPages?!0:"true"===c.configuration.ShowIndividualPages,numberOfPagesToDisplay:"undefined"===typeof c.configuration.NumberOfPagesToDisplay?5:parseInt(c.configuration.NumberOfPagesToDisplay,
10),pageKey:c.pagekey,hash:c.configuration.Target,baseUrl:c.configuration.BaseUrl||window.location.href,template:"undefined"!==typeof c.configuration.Template?c.configuration.Template:' <% foreach(links, function(link, i) { %>      <% if(link.type === "first") { %>          <a href="<%: link.url %>" class="first" data-type="first" data-page="<%= link.page %>" data-selected="false"><span>&#171;</span></a>      <% } else if(link.type === "previous") { %>          <a href="<%: link.url %>" class="previous" data-type="previous" data-page="<%= link.page %>" data-selected="false"><span>&#60;</span></a>      <% } else if(link.type === "page") { %>          <a href="<%: link.url %>" class="page<%= link.selected ? " selected" : "" %>" data-type="page" data-page="<%= link.page %>" data-selected="<%= link.selected ? "true" : "false" %>"><span><%= link.page %></span></a>      <% } else if(link.type === "next") { %>          <a href="<%: link.url %>" class="next" data-type="next" data-page="<%= link.page %>" data-selected="false"><span>&#62;</span></a>      <% } else if(link.type === "last") { %>          <a href="<%: link.url %>" class="last" data-type="last" data-page="<%= link.page %>" data-selected="false"><span>&#187;</span></a>      <% } %>      <% if(i < (links.length - 1)) { %>          <span class="separator"></span>      <% } %>  <% }); %> '};
c.pagedcontenturl&&(n[c.pagedcontentpagingevent]={onPage:function(a,b,d){d=d||{};d[c.pagekey]=a;a=e.telligent.evolution.url.modify({url:c.pagedcontenturl,query:d});e.telligent.evolution.get({url:a,cache:!1,success:function(a){b(a)}})}},e.extend(d,{onPage:function(a,b,d){n[c.pagedcontentpagingevent].onPage(a,b,d)},refreshOnAnyHashChange:"true"===c.loadonanyhashchange,pagedContentContainer:"#"+c.pagedcontentwrapperid,pagedContentPagingEvent:c.pagedcontentpagingevent,pagedContentPagedEvent:c.pagedcontentpagedevent,
transition:c.configuration.Transition,transitionDuration:"undefined"===typeof c.configuration.TransitionDuration?200:parseInt(c.configuration.TransitionDuration,10)}));e(h).evolutionPager(d);if("true"===c.loadingindicator){var b=e("#"+c.pagedcontentwrapperid),a=e("<div></div>").css({backgroundColor:"#fff",position:"absolute",opacity:0.75,zIndex:1});e.telligent.evolution.messaging.subscribe(c.pagedcontentpagingevent,function(){var c=b.offset();a.hide().appendTo("body").css({width:b.width(),height:b.height(),
top:c.top,left:c.left}).show()});e.telligent.evolution.messaging.subscribe(c.pagedcontentpagedevent,function(){a.hide()})}}};return{}},jQuery,window);s("component.previewhtml",["module.ui"],function(f,e,q,k){function n(c,d,b,a){c={url:c,width:0,height:0,outputIsPersisted:!1};d&&(c.width=d);b&&(c.height=b);a&&(c.outputIsPersisted=a);return e.telligent.evolution.get({url:jQuery.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/ui/preview.json",data:c})}function h(c,d){var b=c.parent().width();b>d.width&&
(b=d.width);n(d.url,b,d.height,d.persist).done(function(a){c.html(a.Html)})}e.telligent.evolution.ui.components.previewhtml={setup:function(){},add:function(c,d){h(c,d);e(window).on("resized",function(){h(c,d)})}};return{}},jQuery,window);s("component.rate",["module.ui"],function(f,e,q,k){e.telligent.evolution.ui.components.rate={setup:function(){},add:function(f,h){var c=e.extend({},{isReadOnly:"true"===h.readonly,value:parseFloat(h.initialvalue),ratingCount:parseFloat(h.initialcount)});c.value*=
e.fn.evolutionStarRating.defaults.maxRating;c.onRate=function(c){h.contentid&&h.contenttypeid&&(c/=e.fn.evolutionStarRating.defaults.maxRating,c={ContentId:h.contentid,ContentTypeId:h.contenttypeid,Value:c},h.ratingtypeid&&(c.TypeId=h.ratingtypeid),e.telligent.evolution.post({url:e.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/ratings.json",data:c,success:function(b){b={ContentId:h.contentid};h.ratingtypeid&&(b.TypeId=h.ratingtypeid);e.telligent.evolution.get({url:e.telligent.evolution.site.getBaseUrl()+
"api.ashx/v2/rateditem.json",data:b,success:function(a){a&&a.RatedItem&&a.RatedItem.AverageValue?e(f).evolutionStarRating("option",{value:a.RatedItem.AverageValue*e.fn.evolutionStarRating.defaults.maxRating,ratingCount:a.RatedItem.Count}):e(f).evolutionStarRating("option",{value:0,ratingCount:0})}})}}))};0==c.ratingCount&&c.isReadOnly||e(f).evolutionStarRating(c)}};return{}},jQuery,window);s("component.resizedimage",["module.ui"],function(f,e,q,k){e.telligent.evolution.ui.components.resizedimage=
{setup:function(){},add:function(f,h){f.removeClass("ui-resizedimage");e.telligent.evolution.media.previewHtml(h.src,{width:h.width||0,height:h.height||0,resizeMethod:h.resizemethod||"ZoomAndCrop",success:function(c){c=e(c.html);c.attr("style")&&f.attr("style",c.attr("style"));f.attr("src",c.attr("src"))}})}};return{}},jQuery,window);s("component.searchresult",["module.ui","module.template"],function(f,e,q,k,n){var h=q.telligent.evolution.template.compile('<% foreach(properties, function(property) { %> <li class="property-item"><%= property %></li> <% }); %> '),
c=function(c,b){q.telligent.evolution.get({url:c,dataType:"json",success:function(a){a&&b(h(a))}})};q.telligent.evolution.ui.components.searchresult={setup:function(){},add:function(d,b){if(b.detailsurl){var a=null,m=d.find("ul.details"),g=m.html();d.bind("mouseenter",function(d){null!==a?m.html(a):c(b.detailsurl,function(b){a=b;m.html(a)})}).bind("mouseleave",function(a){m.html(g)})}}};return{}},jQuery,window);s("component.select",["module.ui"],function(f,e,q,k){var n=null,h=null;e.telligent.evolution.ui.components.select=
{setup:function(){},add:function(c,d){c.removeClass("ui-select");if(!n){var b=e('<span class="uiselect"><span>measure</span></span>').css({display:"none"}).appendTo(c.parent());n=b.height();h=parseInt(b.css("border-top-width")||"0")+parseInt(b.css("border-bottom-width")||"0");b.remove()}if(c.is("select")&&570<e(window).width()){var b=c.find("option").length*n,a=c.width();150>a&&(a=150);c.show().glowDropDownList({selectedItemWidth:a+20,selectedItemHeight:n,itemsWidth:a+20,itemsHeight:b+h+4,buttonImageUrl:null,
className:"uiselect"})}}};return{}},jQuery,window);s("component.tag",["module.ui"],function(f,e,q,k){var n=function(h,c,d){var b=e(d);b.html("");if(h){var a=!0;e.each(h.split(/,/),function(d,g){var p=e.trim(g);p&&(a?a=!1:b.append(", "),c?b.append(e("<a>").attr("rel","nofollow tag").attr("href",c.replace(/{tag}/g,e.telligent.evolution.url.encodePathComponent(e.telligent.evolution.html.decode(p)))).text(p)):b.append(p))})}};e.telligent.evolution.ui.components.tag={setup:function(){},add:function(h,
c){var d=jQuery("<span></span>");e(h).append(d);n(c.tags,c.urlformat,d);var b=null;"true"!==c.readonly&&(b=e('<a href="javascript:void(0);" class="internal-link edit-tags"></a>'),e(h).append(b),b.evolutionInlineTagEditor({allTags:e.grep(c.selectabletags.split(","),function(a){return a}),currentTags:e.grep(c.tags.split(","),function(a){return a}),onSave:function(a,b){var g={Tags:a&&0<a.length?a.join(","):"",ContentId:c.contentid,ContentTypeId:c.contenttypeid};c.tagtypeid&&(g.TypeId=c.tagtypeid);e.telligent.evolution.put({url:e.telligent.evolution.site.getBaseUrl()+
"api.ashx/v2/contenttags.json",data:g,success:function(a){n(g.Tags,c.urlformat,d);b()}})}}))}};return{}},jQuery,window);s("component.theater",["module.ui"],function(f,e,q,k){var n=function(){return{add:function(a,b,c,d,m,t){a={ContentId:a,ContentTypeId:b,Body:d};"undefined"!==typeof c&&null!==c&&(a.CommentTypeId=c);e.telligent.evolution.post({url:e.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/comments.json",data:a,cache:!1,success:m,error:t})},del:function(a,b,c){e.telligent.evolution.del({url:e.telligent.evolution.site.getBaseUrl()+
"api.ashx/v2/comments/{CommentId}.json",data:{CommentId:a},cache:!1,success:b,error:c})}}}(),h=function(a,b){e.telligent.evolution.get({url:a,cache:!1,success:function(a){b(a)}})},c=function(a){var b=a.content.find(".content-item.action.likes");e.telligent.evolution.messaging.subscribe("ui.like",function(c){if(c.contentId!==a.contentId||"undefined"!==typeof a.typeId&&(""!==a.typeId&&"00000000-0000-0000-0000-000000000000"!==a.typeId)&&c.typeId!==a.typeId){var d=a.content.find('li.comment[data-commentid="'+
c.contentId+'"][data-contenttypeid="'+c.contentTypeId+'"]');0<c.count?d.addClass("with-likes"):d.removeClass("with-likes")}else 0<c.count?b.removeClass("without-likes").addClass("with-likes"):b.removeClass("with-likes").addClass("without-likes")})},d=function(b){b.content.find(".internal-link.comment").bind("click",function(a){a.preventDefault();b.content.find(".comment-form").show().find("textarea").focus()});b.content.off("focus",".comment-form textarea").on("focus",".comment-form textarea",function(c){b.content.find(".comment-form").addClass("with-avatar");
c=e(c.target);c.data("theater_composer_inited")||(c.data("theater_composer_inited",!0),c.evolutionComposer({plugins:["mentions","hashtags"]}),c.evolutionComposer("onkeydown",function(c){13===c.which&&(c=e(c.target).evolutionComposer("val"),0<e.trim(c).length&&(b.content.find(".comment-form textarea").attr("disabled",!0).blur(),n.add(b.contentId,b.contentTypeId,b.typeId,c,function(b){e.evolutionTheater.refresh(a);e.telligent.evolution.messaging.publish("activity.commentadded",b)},function(a){b.content.find(".comment-form textarea").evolutionComposer("val",
"").trigger("keydown").trigger("keyup").removeAttr("disabled").closest(".comment-form").removeClass("with-avatar")})));return!0}))});b.content.delegate(".comment-form textarea","blur",function(a){b.content.find(".comment-form").removeClass("with-avatar")})},b=function(a){a.content.find(".internal-link.start-conversation").bind("click",function(a){a.preventDefault();a=e(a.target).data("conversationurl");e.glowModal(a,{width:550,height:360})})},a=function(a,b){var c=e("<div></div>").html(b).find("ul.content-list.comments");
a.find("ul.content-list.comments").replaceWith(c)},m=function(b){b.content.find(".content-item.comment").bind("evolutionModerateLinkClicked",function(b,c){var d=e(this).data("commentid");n.del(d,function(b){e.evolutionTheater.refresh(a);e.telligent.evolution.messaging.publish("activity.commentremoved",b)},function(a){})})};e.telligent.evolution.ui.components.theater={setup:function(){},add:function(a,p){a=e(a);a.bind("click",function(l){!0!==a.data("disabletheater")&&(l.preventDefault(),e(window).width()<
(p.minwidth||600)||e.evolutionTheater.show({content:function(a){h(p.theaterurl,a)},nextContent:function(a){var b=a.find("a[data-nexttheaterurl]").data("nexttheaterurl");if(b&&0<b.length)return function(a){h(b,a)}},previousContent:function(a){var b=a.find("a[data-previoustheaterurl]").data("previoustheaterurl");if(b&&0<b.length)return function(a){h(b,a)}},loaded:function(a){var g;g=e(a);a=g.find(".activity-story");g={content:g,story:a};null!==a&&e.extend(g,{contentId:a.data("contentid"),contentTypeId:a.data("contenttypeid"),
typeId:a.data("typeid")});c(g);d(g);b(g);m(g)}}))})}};return{}},jQuery,window);s("component.tip",["module.ui"],function(f,e,q,k){e.telligent.evolution.ui.components.tip={setup:function(){},add:function(f,h){e(f).evolutionTip({attribute:h.tipcontent||e.fn.evolutionTip.defaults.attribute})}};return{}},jQuery,window);s("component.tourtip",["module.ui","module.tourtips"],function(f,e,q,k,n){q.telligent.evolution.ui.components.tourtip={setup:function(){},add:function(h,c){q.telligent.evolution.tourTips.register({key:c.tourtipkey,
message:c.tourtipmessage,index:c.tourtipindex,element:h.get(0)})}};return{}},jQuery,window);s("component.viewhtml",["module.ui","module.messaging"],function(f,e,q,k,n){function h(a,b,c,d){a={url:a,width:0,height:0,outputIsPersisted:!1};b&&(a.width=b);c&&(a.height=c);d&&(a.outputIsPersisted=d);return q.telligent.evolution.get({url:jQuery.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/ui/view.json",data:a})}function c(a,b,g){k.clearTimeout(b.reflowWaitTimeout);if("none"==a.css("display")||"none"==
a.parent().css("display")||document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen||document.fullscreenElement)k.setTimeout(function(){c(a,b,g)},499);else if(!g||"viewable"==b.resizedBy){var p=q(k).width(),l=a.parent().width(),r=a.parent().height(),z="parent",t=r;if(p<l)b.reflowWaitCheckCount++,10>b.reflowWaitCheckCount&&(b.reflowWaitTimeout=setTimeout(function(){c(a,b,g)},250));else{0==l&&(l=a.parents(".layout-region-inner").width());l>b.width&&(l=b.width);if(0==r||"parent"!=b.resizedBy||
r>d)t=d,r=Math.round(0.8*d),z="viewable";r>b.height&&0<b.height&&(t=r=b.height,z="configured");b.resizedBy=z;if(t!=b.lastHeight||l!=b.lastHeight)if(p=a.width(),z=a.height(),!(l==b.lastWidth&&t<=b.lastHeight&&(z<=t||0==t)||t==b.lastHeight&&l<=b.lastWidth&&(p<=l||0==l))){var v=[],u=!0;a.children().each(function(){q(this);var a=(this.nodeName||"").toLowerCase();"video"==a||"audio"==a||"embed"==a||"object"==a?v.push(this):"script"!=a&&("style"!=a&&"meta"!=a)&&(u=!1)});u&&0<a.children().length?(q.each(v,
function(){var a=q(this),b=a.width()||1,c=a.height()||1;b/l>c/r?a.attr({width:l+"px !important",height:c*l/b+"px !important"}):a.attr({width:b*r/c+"px !important",height:r+"px !important"})}),a.trigger("rendered")):h(b.url,l,r,b.persist).done(function(c){b.lastHtml!=c.Html&&(a.html(c.Html),b.lastHtml=c.Html,a.trigger("rendered"))});b.lastHeight=t;b.lastWidth=l}}}}var d,b=!1;q.telligent.evolution.ui.components.viewhtml={setup:function(){d=q(window).height();q(window).on("resized",function(){b||(d=
q(window).height())});q.telligent.evolution.messaging.subscribe("window.scrollableheight",function(a){d=a.height;b=!0})},add:function(a,b){b.resizedBy="parent";b.lastWidth=-1;b.lastHeight=-1;b.lastHtml="";b.reflowWaitCheckCount=0;b.reflowWaitTimeout=null;c(a,b,!1);q(window).on("resized",function(){c(a,b,!1)});q.telligent.evolution.messaging.subscribe("window.scrollableheight",function(d){c(a,b,!0)})}};return{}},jQuery,window);s("component.webpreview",["module.ui"],function(f,e,q,k){e.telligent.evolution.ui.components.webpreview=
{setup:function(){},add:function(f,h){var c=h.configuration.url,d,b;"undefined"!==typeof h.configuration.maximagewidth&&(d=h.configuration.maximagewidth);"undefined"!==typeof h.configuration.maximageheight&&(b=h.configuration.maximageheight);f.hasClass("preview")||(f.parents(".ui-theater").data("disabletheater",!0),0>h.configuration.url.indexOf(e.telligent.evolution.site.getBaseUrl(!0))&&f.parents(".ui-theater").attr("target","_blank"));e.telligent.evolution.preview.load(c,{maxImageWidth:d,maxImageHeight:b,
success:function(a){a&&(a.excerpt||a.imageUrl)&&(a=e.telligent.evolution.preview.render(a,{template:e.telligent.evolution.preview.defaults.template}),"undefined"!==typeof a&&(null!==a&&0<a.length)&&f.html(a))}})}};return{}},jQuery,window);s("composers",["composer.hashtags","composer.mentions","composer.urlhighlight","composer.autocomplete"],function(){return{}});s("composer.autocomplete",["plugin.evolutionComposer"],function(f,e,q,k){var n={},h=null,c=function(){};f=function(){return{init:function(b){c=
b.settings.onSuggestionList||e.fn.evolutionComposer.plugins.autocomplete.defaults.onSuggestionList;selectSuggestion=b.settings.onSuggestionSelect||e.fn.evolutionComposer.plugins.autocomplete.defaults.onSuggestionSelect;b.input.bind(d.selectedEventName,function(){selectSuggestion(d.selection());b.release()});b.input.bind({blur:function(){setTimeout(function(){b.release()},500)}})},onTransform:function(b){},shouldActivate:function(b){return(b=b.currentWord())&&b.value&&3<=b.value.length?!0:!1},onActivate:function(b){b.data("_autocomplete_composer_active",
!0);e(document).bind("click.autocomplete",function(){b.release();e(document).unbind(".autocomplete")})},onDeactivate:function(b){b.data("_autocomplete_composer_active",!1);d.hide();b.input.focus()},val:function(b,a){return b},onkeydown:function(b,a){if(27===a.which)return b.release(),!1;if(13===a.which||9===a.which){var c=d.selection();c&&selectSuggestion(c);b.release();return!1}return 38===a.which?(d.moveHighlightUp(),!1):40===a.which?(d.moveHighlightDown(),!1):!0},onkeypress:function(b,a){return!0},
oninput:function(b,a){clearTimeout(h);d.loading(b.input);h=setTimeout(function(){var a=b.val();if(1<a.length){var g=function(a){null!==a&&0<a.length?d.show(b.input,a,b.settings.suggestionHeader):b.release()};"undefined"!==typeof n[a]?b.data("_autocomplete_composer_active")&&g(n[a]):c(a,function(c){b.data("_autocomplete_composer_active")&&(n[a]=c,b.val()==a&&g(c))})}else b.release()},500);return!0},defaults:{}}}();var d=function(){var b=null,a=null,c=null,d=null,p=null,l=function(r){d=r;if(null===
b){b=e('<div class="composer-suggestion-selector popup-list content"></div>').hide().appendTo(e("body"));c=e('<span class="heading"></span>').appendTo(b);a=e('<ul class="content-list content suggestions"></ul>').appendTo(b);p=e('<li class="loading">...</li>');var l=0,u=["<strong>&bull;</strong>&bull;&bull;","&bull;<strong>&bull;</strong>&bull;","&bull;&bull;<strong>&bull;</strong>"];setInterval(function(){l+=1;3===l&&(l=0);p.get(0).innerHTML=u[l]},175);b.delegate("li","click",function(a){null!==d&&
(b.find("li.highlight").removeClass("highlight"),e(this).addClass("highlight"),d.trigger(z.selectedEventName))})}},r=function(){if(null!==d){var a=d.offset(),c=e(d);b.css({width:c.outerWidth()-2,top:a.top+c.outerHeight()-1,left:a.left})}},z={selectedEventName:"SUGGESTION_SELECTED",show:function(d,g,p){c.html(p);l(d);r();b.hide();a.empty();e.each(g,function(b,c){var d=e('<li class="content-item suggestion">'+c.viewHtml+"</li>");d.data("suggestionData",c);a.append(d)});b.show()},hide:function(){null!==
b&&(b.hide(),a.empty())},loading:function(c){l(c);r();b.hide();a.empty().append(p);b.show()},moveHighlightUp:function(){var a=b.find("li.suggestion");if(0!==a.length){var c=a.length;e.each(a,function(a,b){e(b).hasClass("highlight")&&(c=a,e(b).removeClass("highlight"))});0>c-1&&(c=a.length);e(a.get(c-1)).addClass("highlight")}},moveHighlightDown:function(){var a=b.find("li.suggestion");if(0!==a.length){var c=-1;e.each(a,function(a,b){e(b).hasClass("highlight")&&(c=a,e(b).removeClass("highlight"))});
c+1>=a.length&&(c=-1);e(a.get(c+1)).addClass("highlight")}},selection:function(){var a=b.find("li.suggestion");if(0===a.length)return null;var c=a.filter("li.suggestion.highlight");return null!==c&&0<c.length?c.data("suggestionData"):e(a.get(0)).data("suggestionData")}};return z}();e.fn.evolutionComposer.plugins.autocomplete=f;e.fn.evolutionComposer.plugins.autocomplete.defaults={onSuggestionList:function(b,a){a(null)},onSuggestionSelect:function(b){}};return{}},jQuery,window);s("composer.hashtags",
["plugin.evolutionComposer"],function(f,e,q,k){f=function(){for(var h=null,c={},d=function(a){var b=a.data("_tagged_tags");if("undefined"===typeof b||null===b)b=[],a.data("_tagged_tags",b);return b},b=function(a){return a.currentWord({additionalWhiteSpaceSymbols:"()\"'<>.,".split("")})},a=function(a,c,g,r,p){var l=d(a)||[];l[l.length]=c;g&&(g=b(a),a.replace(g.start,g.stop+1,c.decodedName+(r?" ":"")),c=g.start+(c.decodedName+(r?" ":"")).length,r=a.input.get(0),r.setSelectionRange?r.setSelectionRange(c,
c):r.createTextRange&&(r=r.createTextRange(),r.collapse(!0),r.moveEnd("character",c),r.moveStart("character",c),r.select()));m(a);a.data("_hashtag_composer_active",!1);n.hide();a.input.focus();p&&a.release()},m=function(a){var b=d(a).reverse(),c=a.val();a.clearHighlights(a.settings.highlightClass||p);var g={};e.each(b,function(d,r){if(r&&null!==r.decodedName&&0<r.decodedName.length){var l=c.indexOf(r.decodedName);if(0>l||g[l])b.splice(d,1);else for(;0<=l;)a.addHighlight({start:l,stop:r.decodedName.length+
l,className:a.settings.highlightClass||p}),g[l]=!0,l=c.indexOf(r.decodedName,l+1)}});a.renderHighlights()},g=function(a){return 2<a.length&&0===a.indexOf("#")&&!h.test(a.substr(1))&&isNaN(parseInt(a[1],10))},p="composer-hashtag-highlight",l=function(){},r=null,z=null,t=/\[tag:([^\]]+)\]/gi,h=RegExp("["+"-_~`!@#$%^&*()=+{[}]\\|;:'\",<.>/? ".replace("]","\\]")+"]","i"),v=0;33>v;v++)c["-_~`!@#$%^&*()=+{[}]\\|;:'\",<.>/? ".charCodeAt(v)]=!0;return{init:function(b){l=b.settings.onTagList||e.fn.evolutionComposer.plugins.hashtags.defaults.onTagList;
b.input.bind(n.selectedEventName,function(){a(b,n.selection(),!0,!0,!0)});b.input.bind("blur",function(){setTimeout(function(){b.release()},500)})},onTransform:function(b,c){if(c)for(var d=b.val(),g=t.exec(d);null!==g&&0<=g.index&&null!==g&&1<g.length;){var r={token:"[tag:"+g[1]+"]",name:"#"+g[1],decodedName:"#"+e.telligent.evolution.html.decode(g[1])};b.val(b.val().replace(g[0],r.name));a(b,r,!1);g=t.exec(d)}m(b)},shouldActivate:function(a){return g(b(a).value)},onActivate:function(a){a.data("_hashtag_composer_active",
!0);e(document).bind("click.ui-composer-hashtags",function(){a.release();e(document).unbind(".ui-composer-hashtags")})},onDeactivate:function(c){var d=b(c);g(d.value)&&a(c,{decodedName:d.value,name:d.value,token:"[tag:"+d.value.substr(1)+"]"},!0,!1,!1);c.data("_hashtag_composer_active",!1);n.hide();c.input.focus()},val:function(a,b){var c=d(b);e.each(c,function(b,c){a=a.replace(RegExp(e.telligent.evolution.regex.encode(c.decodedName),"g"),c.token)});return a},onkeydown:function(b,c){if(27===c.which||
32===c.which)b.release();else if(13===c.which||9===c.which){var d=n.selection();if(d)return a(b,d,!0,!0,!0),!1;b.release()}else{if(38===c.which)return n.moveHighlightUp(),!1;if(40===c.which)return n.moveHighlightDown(),!1}return!0},onkeypress:function(a,b){"undefined"!==typeof c[b.which]&&a.release();return!0},oninput:function(a,c){if(!g(b(a).value))return a.release(),!0;if(a.currentWord().value==z&&a.data("_hashtag_composer_active"))return!0;clearTimeout(r);n.loading(a.input);r=setTimeout(function(){var c=
z=a.currentWord().value;g(c)?2<=c.length&&l(c.substr(1),function(d){if(a.data("_hashtag_composer_active")){d&&(d=e.map(d,function(a){return{name:a.name,token:a.token,decodedName:e.telligent.evolution.html.decode(a.name)}}));var r=b(a).value;r==c&&g(r)&&null!==d&&0<d.length?n.show(a.input,d,c):n.hide()}}):a.release()},500);return!0}}}();var n=function(){var h=null,c=null,d=null,b=function(a){c=a;if(null===h){h=e('<ul class="composer-hashtag-selector"></ul>').hide().appendTo(e("body"));d=e('<li class="loading">...</li>');
var b=0,l=["<strong>&bull;</strong>&bull;&bull;","&bull;<strong>&bull;</strong>&bull;","&bull;&bull;<strong>&bull;</strong>"];setInterval(function(){b+=1;3===b&&(b=0);d.get(0).innerHTML=l[b]},175);h.delegate("li","click",function(a){null!==c&&(h.find("li.highlight").removeClass("highlight"),e(this).addClass("highlight"),c.trigger(m.selectedEventName))})}},a=function(){if(null!==c){var a=c.offset(),b=e(c);h.css({width:b.outerWidth()-2,top:a.top+b.outerHeight()-1,left:a.left})}},m={selectedEventName:"HASHTAG_SELECTED",
show:function(c,d,l){b(c);a();h.hide().empty();var r=RegExp(e.telligent.evolution.regex.encode(e.telligent.evolution.html.encode(l)),"i");e.each(d,function(a,b){var c=b.name.match(r),c=null!==c?e("<li>"+b.name.replace(r,"<strong>"+c[0]+"</strong>")+"</li>"):e("<li>"+b.name+"</li>");c.data("tagData",b);h.append(c)});h.show()},hide:function(){null!==h&&h.hide().empty()},loading:function(c){b(c);a();h.hide().empty().append(d).show()},moveHighlightUp:function(){var a=h.find("li");if(0!==a.length){var b=
a.length;e.each(a,function(a,c){e(c).hasClass("highlight")&&(b=a,e(c).removeClass("highlight"))});0>b-1&&(b=a.length);e(a.get(b-1)).addClass("highlight")}},moveHighlightDown:function(){var a=h.find("li");if(0!==a.length){var b=-1;e.each(a,function(a,c){e(c).hasClass("highlight")&&(b=a,e(c).removeClass("highlight"))});b+1>=a.length&&(b=-1);e(a.get(b+1)).addClass("highlight")}},selection:function(){var a=h.find("li");if(0===a.length)return null;var b=a.filter("li.highlight");return null!==b&&0<b.length?
b.data("tagData"):e(a.get(0)).data("tagData")}};return m}();e.fn.evolutionComposer.plugins.hashtags=f;e.fn.evolutionComposer.plugins.hashtags.defaults={onTagList:function(h,c){e.telligent.evolution.get({url:e.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/hashtags.json?IncludeFields=Token,PreviewHtml",data:{QueryText:h,PageSize:5},cache:!1,dataType:"json",success:function(d){d.HashTags&&0<d.HashTags.length?(d=e.map(d.HashTags,function(b){return{name:b.PreviewHtml,token:b.Token}}),c(d)):c(null)}})}};
return{}},jQuery,window);s("composer.mentions",["plugin.evolutionComposer"],function(f,e,q,k){f=function(){var h={};allowedSpacesKey="_allowed_spaces";isActiveKey="_hashtag_composer_active";caretPosition=0;getMentions=function(c){var d=c.data("_mentioned_mentionables");if("undefined"===typeof d||null===d)d=[],c.data("_mentioned_mentionables",d);return d};setCursorPosition=function(c,d){var b=c.input.get(0);b.setSelectionRange?b.setSelectionRange(d,d):b.createTextRange&&(b=b.createTextRange(),b.collapse(!0),
b.moveEnd("character",d),b.moveStart("character",d),b.select())};mentionMentionable=function(c,d,b){var a=getMentions(c)||[];a[a.length]=d;b&&(b=effectiveCurrentWord(c),c.replace(b.start,b.stop+1,d.decodedName+" "),allowedSpaces(c,0),setCursorPosition(c,b.start+(d.decodedName+" ").length));c.release();updateHighlights(c)};updateHighlights=function(c){var d=getMentions(c),b=c.val();c.clearHighlights(c.settings.highlightClass||mentionHighlightClass);e.each(d,function(a,m){if(m&&null!==m.decodedName&&
0<m.decodedName.length){var g=b.indexOf(m.decodedName);if(0>g)d.splice(a,1);else for(;0<=g;)c.addHighlight({start:g,stop:m.decodedName.length+g,className:c.settings.highlightClass||mentionHighlightClass}),g=b.indexOf(m.decodedName,g+1)}});c.renderHighlights()};mentionHighlightClass="composer-mentionable-mention-highlight";getMentionables=function(){};getContent=getMentionablesTimeout=null;allowedSpaces=function(c,d){return"undefined"!==typeof d?(c.data("_allowed_spaces",d),d):c.data("_allowed_spaces")||
0};effectiveCurrentWord=function(c){var d=c.val().substring(0,caretPosition),b=null;e.each(h,function(a,c){if(null!==c&&0<c.length&&d.match("@"+e.telligent.evolution.regex.encode(a)+"$"))return b="@"+a,!1});if(null!==b){var a=d.length-b.length;allowedSpaces(c,b.split(" ").length-1);return{value:b,start:a,stop:a+b.length}}return c.currentWord({caretPosition:caretPosition,allowedWhiteSpaceBeforeCaret:allowedSpaces(c),additionalWhiteSpaceSymbols:"()\"'<>.,".split("")})};collectRawTokens=function(c){for(var d=
c.val(),b=[];null!==(tokens=rToken.exec(d));)b.push({match:tokens,contentTypeId:tokens[2],contentId:tokens[1]});0<b.length&&getContent&&getContent(b,function(a){e.each(a,function(a,b){var d={token:b.match[0],name:b.name,decodedName:b.name};c.val(c.val().replace(d.token,d.name));mentionMentionable(c,d,!1)});c.input.trigger("input")})};rToken=/\[mention:([^:]+):([^\]]+)\]/gi;return{init:function(c){getMentionables=c.settings.onMentionableList||e.fn.evolutionComposer.plugins.mentions.defaults.onMentionableList;
getContent=c.settings.onListContent||e.fn.evolutionComposer.plugins.mentions.defaults.onListContent;c.input.bind(n.selectedEventName,function(){mentionMentionable(c,n.selection(),!0)});c.input.bind({blur:function(){setTimeout(function(){c.release()},500)},keydown:function(){caretPosition=c.caretPosition()+1}})},onTransform:function(c,d){d&&collectRawTokens(c);updateHighlights(c)},shouldActivate:function(c){return 0===effectiveCurrentWord(c).value.indexOf("@")},onActivate:function(c){c.data(isActiveKey,
!0);e(document).bind("click.mentions",function(){c.release();e(document).unbind(".mentions")})},onDeactivate:function(c){c.data(isActiveKey,!1);n.hide();c.input.focus();allowedSpaces(c,0)},val:function(c,d){var b=getMentions(d);e.each(b,function(a,b){c=c.replace(b.decodedName,b.token)});return c},onkeydown:function(c,d){if(32===d.which)allowedSpaces(c,allowedSpaces(c)+1);else{if(27===d.which)return c.release(),!1;if(13===d.which||9===d.which){var b=n.selection();b?mentionMentionable(c,b,!0):c.release();
return!1}if(38===d.which)return n.moveHighlightUp(),!1;if(40===d.which)return n.moveHighlightDown(),!1}return!0},onkeypress:function(c,d){return!0},oninput:function(c,d){clearTimeout(getMentionablesTimeout);n.loading(c.input);getMentionablesTimeout=setTimeout(function(){var b=effectiveCurrentWord(c).value.substring(1);if(1<b.length){var a=function(a){null!==a&&0<a.length?n.show(c.input,a,b):c.release()};"undefined"!==typeof h[b]?c.data(isActiveKey)&&a(h[b]):getMentionables(b,function(d){c.data(isActiveKey)&&
(d&&(d=e.map(d,function(a){return{name:a.name,token:a.token,decodedName:e.telligent.evolution.html.decode(a.name)}})),h[b]=d,effectiveCurrentWord(c).value.substring(1)==b&&a(d))})}else c.release()},500);return!0}}}();var n=function(){var h=null,c=null,d=null,b=function(a){c=a;if(null===h){h=e('<ul class="composer-mentionable-selector"></ul>').hide().appendTo(e("body"));d=e('<li class="loading">...</li>');var b=0,l=["<strong>&bull;</strong>&bull;&bull;","&bull;<strong>&bull;</strong>&bull;","&bull;&bull;<strong>&bull;</strong>"];
setInterval(function(){b+=1;3===b&&(b=0);d.get(0).innerHTML=l[b]},175);h.delegate("li","click",function(a){null!==c&&(h.find("li.highlight").removeClass("highlight"),e(this).addClass("highlight"),c.trigger(m.selectedEventName))})}},a=function(){if(null!==c){var a=c.offset(),b=e(c);h.css({width:b.outerWidth()-2,top:a.top+b.outerHeight()-1,left:a.left})}},m={selectedEventName:"MENTIONABLE_SELECTED",show:function(c,d,l){b(c);a();h.hide().empty();var r=RegExp(e.telligent.evolution.regex.encode(e.telligent.evolution.html.encode(l)),
"i");e.each(d,function(a,b){var c=b.name.match(r),c=null!==c?e("<li>"+b.name.replace(r,"<strong>"+c[0]+"</strong>")+"</li>"):e("<li>"+b.name+"</li>");c.data("mentionableData",b);h.append(c)});h.show()},hide:function(){null!==h&&h.hide().empty()},loading:function(c){b(c);a();h.hide().empty().append(d).show()},moveHighlightUp:function(){var a=h.find("li");if(0!==a.length){var b=a.length;e.each(a,function(a,c){e(c).hasClass("highlight")&&(b=a,e(c).removeClass("highlight"))});0>b-1&&(b=a.length);e(a.get(b-
1)).addClass("highlight")}},moveHighlightDown:function(){var a=h.find("li");if(0!==a.length){var b=-1;e.each(a,function(a,c){e(c).hasClass("highlight")&&(b=a,e(c).removeClass("highlight"))});b+1>=a.length&&(b=-1);e(a.get(b+1)).addClass("highlight")}},selection:function(){var a=h.find("li");if(0===a.length)return null;var b=a.filter("li.highlight");return null!==b&&0<b.length?b.data("mentionableData"):e(a.get(0)).data("mentionableData")}};return m}();e.fn.evolutionComposer.plugins.mentions=f;e.fn.evolutionComposer.plugins.mentions.defaults=
{onListContent:function(h,c){e.telligent.evolution.batch(function(){e.each(h,function(c,b){e.telligent.evolution.get({url:e.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/genericcontent/{contentId}/{contentTypeId}.json",data:{contentId:b.contentId,contentTypeId:b.contentTypeId}}).then(function(a){b.name=a.Content.HtmlName})})}).then(function(){c(h)})},onMentionableList:function(h,c){e.telligent.evolution.get({url:e.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/mentionables.json?IncludeFields=Token,PreviewHtml",
data:{QueryText:h,PageSize:20},cache:!1,dataType:"json",success:function(d){d.Mentionables&&0<d.Mentionables.length?(d=e.map(d.Mentionables,function(b){return{name:b.PreviewHtml,token:b.Token}}),c(d)):c(null)}})}};return{}},jQuery,window);s("composer.urlhighlight",["plugin.evolutionComposer"],function(f,e,q,k){var n=/(\b(http):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig;f=function(){var h={init:function(c){c.highlighClassName=c.highlighClassName||h.defaults.highlighClassName},onTransform:function(c){var d;
d=(c.val()||"").match(n);d=null!==d&&0<d.length?d[0]:null;if(null!==d){var b;b=c.data("_composer_urlpreview_data");if(null===b||"undefined"===typeof b)b={},c.data("_composer_urlpreview_data",b);var a=c.val().indexOf(d);if(0<=a&&"undefined"===typeof b.lastRange||b.lastRange.start!==a||b.lastRange.stop!==a+d.length)b.lastRange={start:a,stop:a+d.length},c.clearHighlights(c.highlighClassName),c.addHighlight({start:a,stop:a+d.length,className:c.highlighClassName}),c.renderHighlights()}else c.clearHighlights(c.highlighClassName)},
shouldActivate:function(c){return!1},val:function(c,d){return c},onkeydown:function(c,d){return!0},oninput:function(c,d){return!0},defaults:{highlighClassName:"composer-url-highlight",loadingText:"..."}};return h}();e.fn.evolutionComposer.plugins.urlhighlight=f;return{}},jQuery,window);s("events","events.gestures events.hashchange events.notifications events.pointers events.scroll events.textinput events.resized".split(" "),function(){return{}});s("events.gestures",["events.pointers"],function(f,
e,q){function k(a){return(new Date).getTime()-(a||(new Date).getTime())}function n(a,b,c,d){a=180*Math.atan2(b-d,c-a)/Math.PI;0>a&&(a+=360);return a}function h(a){if(315<a||45>=a)return"right";if(45<a&&135>=a)return"up";if(135<a&&225>=a)return"left";if(225<a&&315>=a)return"down"}function c(a,b,c){if(a.selector){var d=e(b.originalEvent.target);if(d.is(a.selector)||0<d.closest(a.selector).length)return c.call(this,b)}else return c.call(this,b)}function d(a,b,c,d){c.target=a.target;d?b.trigger(c):b&&
b.triggerHandler(c);return a.cancelBubble==m?!0:a.cancelBubble}function b(b,r){var m;b.on(l.start+a,function(a){return c(r,a,function(){m&&q.clearTimeout(m.tapHoldDurationout);m={startTime:(new Date).getTime(),startPageX:a&&a.pointers&&1<=a.pointers.length?a.pointers[0].pageX:0,startPageY:a&&a.pointers&&1<=a.pointers.length?a.pointers[0].pageY:0,held:!1,tapHoldDurationout:null,lastTap:m?m.lastTap:0};m.tapHoldDurationout=q.setTimeout(function(){m.held=!0;d(a,b,{type:g.taphold,pointers:a.pointers,originalEvent:a,
duration:k(m.startTime||(new Date).getTime())})},p.tapHoldDuration)})});b.on(l.move+a,function(a){return c(r,a,function(){if(m){var c=Math.abs(Math.sqrt(Math.pow((a&&a.pointers&&1<=a.pointers.length?a.pointers[0].pageX:0)-m.startPageX,2)+Math.pow((a&&a.pointers&&1<=a.pointers.length?a.pointers[0].pageY:0)-m.startPageY,2)));m.tapHoldDurationout&&c>=p.tapHoldMaxDistance&&q.clearTimeout(m.tapHoldDurationout);if(m.panning||a&&a.pointers&&1===a.pointers.length&&c>p.panMinDistance){var c=n(m.startPageX,
m.startPageY,a&&a.pointers&&1<=a.pointers.length?a.pointers[0].pageX:0,a&&a.pointers&&1<=a.pointers.length?a.pointers[0].pageY:0),r=h(c),c={type:g.panStart,pointers:a?a.pointers:[],originalEvent:a,angle:c,direction:r,pageX:a&&a.pointers&&1<=a.pointers.length?a.pointers[0].pageX:0,pageY:a&&a.pointers&&1<=a.pointers.length?a.pointers[0].pageY:0};m.panning||(m.panning=!0,d(a,b,c,!0));c.type=g.pan;d(a,b,c,!0)}}})});b.on(l.end+a,function(a){return c(r,a,function(){if(m){q.clearTimeout(m.tapHoldDurationout);
var c=k(m.startTime||(new Date).getTime()),r=Math.abs(Math.sqrt(Math.pow((a&&a.pointers&&1<=a.pointers.length?a.pointers[0].pageX:0)-m.startPageX,2)+Math.pow((a&&a.pointers&&1<=a.pointers.length?a.pointers[0].pageY:0)-m.startPageY,2)));if(!m.held&&c<=p.tapMaxDuration&&r<=p.tapMaxDistance)c={type:g.tap,pointers:a?a.pointers:[],originalEvent:a,duration:c},d(a,b,c),r=(new Date).getTime(),m.lastTap&&r-m.lastTap<=p.doubleTapMaxDuration?(c.type=g.doubleTap,d(a,b,c),m.lastTap=0):m.lastTap=r;else if(m.panning&&
d(a,b,{type:g.panEnd,pointers:a?a.pointers:[],originalEvent:a,pageX:a&&a.pointers&&1<=a.pointers.length?a.pointers[0].pageX:0,pageY:a&&a.pointers&&1<=a.pointers.length?a.pointers[0].pageY:0},!0),a&&a.pointers&&1===a.pointers.length&&r/c>=p.swipeMinVelocity){var l=n(m.startPageX,m.startPageY,a&&a.pointers&&1<=a.pointers.length?a.pointers[0].pageX:0,a&&a.pointers&&1<=a.pointers.length?a.pointers[0].pageY:0),r=h(l),c={type:g.swipe,pointers:a?a.pointers:[],originalEvent:a,duration:c,angle:l,direction:r,
pageX:a&&a.pointers&&1<=a.pointers.length?a.pointers[0].pageX:0,pageY:a&&a.pointers&&1<=a.pointers.length?a.pointers[0].pageY:0};d(a,b,c,!0);c.type+=r;d(a,b,c,!0)}else m={}}})})}var a="._gesture_events_namespace",m,g={tap:"tap",taphold:"taphold",doubleTap:"doubletap",swipe:"swipe",swipeUp:"swipeup",swipeDown:"swipedown",swipeRight:"swiperight",swipeLeft:"swipeleft",panStart:"panstart",pan:"pan",panEnd:"panend"},p={tapHoldDuration:400,tapHoldMaxDistance:1,tapMaxDuration:350,tapMaxDistance:10,swipeMinVelocity:0.5,
panMinDistance:10,doubleTapMaxDuration:250},l={start:"pointerstart",move:"pointermove",end:"pointerend"};if(e.telligent&&e.telligent.evolution&&e.telligent.evolution._SUPPRESS_GESTURES)return{eventNamespace:a.substring(1)};window.onorientationchange===m&&(e.event.special.orientationchange={setup:function(){var a=e(window),b,c=function(){a.trigger("orientationchange")};window.addEventListener("resize",function(a){q.clearTimeout(b);b=q.setTimeout(c,100)},!1)}});var r={"-webkit-touch-callout":"none",
"-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)"};e.each(g,function(c,d){e.event.special[d]={add:function(a){var c=e(this);d===g.taphold&&c.css(r);c.data("._gesture_events_bound")||(c.data("._gesture_events_bound",!0),b(c,a))},remove:function(b){b=e(this);b.off(a);b.removeData("._gesture_events_bound")}}});e.gestures={defaults:p};return{eventNamespace:a.substring(1)}},jQuery,
window);s("events.hashchange",function(f,e){var q="onhashchange"in e&&(void 0===document.documentMode||7<document.documentMode),k=e.location.href,n=f(e),h;q||(f.event.special.hashchange={setup:function(){h||(h=setInterval(function(){e.location.href!==k&&(k=e.location.href,n.trigger("hashchange"))},f.hashChangeSettings.interval))}});f.hashChangeSettings={interval:10};return{}},jQuery,window);s("events.textinput",function(f,e,q){var k=!f.browser.msie&&"oninput"in document.createElement("input")&&"oninput"in
document.createElement("textarea");f.event.special.textinput={setup:function(){var e=f(this);if(k)e.bind("input",function(c){e.trigger("textinput",{which:c.which})});else{var h;e.bind({keydown:function(c){h=e.val()},keyup:function(c){var d=e.val();d!==h&&e.trigger("textinput",{which:c.which});h=d}})}}};return{}},jQuery,window);s("events.notifications",["module.messaging"],function(f,e,q){e.telligent.evolution.messaging.subscribe("socket.connected",function(){e.telligent.evolution.sockets.notifications.on("received",
function(f){e.telligent.evolution.messaging.publish("notification.raised",f)});e.telligent.evolution.sockets.notifications.on("read",function(f){e.telligent.evolution.messaging.publish("notification.read",f)})});return{}},jQuery,window);s("events.pointers",["lib.util"],function(f,e,q,k){function n(a,b){this.pageX=a;this.pageY=b}function h(a){return[new n(a.pageX,a.pageY)]}function c(a){if(!a||!a.length)return[];for(var b=[],c=0;c<a.length;c++)b[b.length]=new n(a[c].pageX,a[c].pageY);return b}function d(a){return[new n(a.originalEvent.pageX,
a.originalEvent.pageY)]}function b(a,b,c,d){a&&a.length&&a.triggerHandler({type:b,pointers:c,originalEvent:d,target:d.target})}function a(a,b,c){if(a.selector){var d=e(b.originalEvent.target);if(d.is(a.selector)||0<d.closest(a.selector).length)return c.call(this,b)}else c.call(this,b)}var m={start:"pointerstart",move:"pointermove",end:"pointerend"},g={pointerMoveThrottle:10};if(e.telligent&&e.telligent.evolution&&e.telligent.evolution._SUPPRESS_POINTERS)return{eventNamespace:"_pointer_events_namespace"};
q=[{test:function(){return"onmspointerdown"in window},add:function(c,l){var p=!1;c.on("MSPointerDown._pointer_events_namespace",function(g){a(l,g,function(){b(c,m.start,d(g),g);p=!0})});c.on("MSPointerMove._pointer_events_namespace",f.throttle(function(g){a(l,g,function(){p&&b(c,m.move,d(g),g)})},g.pointerMoveThrottle));c.on("MSPointerUp._pointer_events_namespace",function(g){a(l,g,function(){p=!1;b(c,m.end,d(g),g)})});c.on("MSPointerCancel._pointer_events_namespace",function(g){a(l,g,function(){p=
!1;b(c,m.end,d(g),g)})})},remove:function(a){a.off("._pointer_events_namespace")}},{test:function(){return"ontouchstart"in window},add:function(d,l){var p=!1;d.on("touchstart._pointer_events_namespace",function(g){a(l,g,function(){b(d,m.start,c(g.originalEvent.touches),g);p=!0})});d.on("touchmove._pointer_events_namespace",f.throttle(function(g){a(l,g,function(){p&&b(d,m.move,c(g.originalEvent.touches),g)})},g.pointerMoveThrottle));d.on("touchend._pointer_events_namespace",function(g){a(l,g,function(){p=
!1;b(d,m.end,c(g.originalEvent.changedTouches),g)})});d.on("touchcancel._pointer_events_namespace",function(g){a(l,g,function(){p=!1;b(d,m.end,c(g.originalEvent.changedTouches),g)})})},remove:function(a){a.off("._pointer_events_namespace")}},{test:function(){return"onmousedown"in document},add:function(c,d){var l=!1;c.on("mousedown._pointer_events_namespace",function(g){a(d,g,function(){b(c,m.start,h(g),g);l=!0})});c.on("mousemove._pointer_events_namespace",f.throttle(function(g){a(d,g,function(){l&&
b(c,m.move,h(g),g)})},g.pointerMoveThrottle));c.on("mouseup._pointer_events_namespace",function(g){a(d,g,function(){l=!1;b(c,m.end,h(g),g)})});c.on("mouseleave._pointer_events_namespace",function(g){a(d,g,function(){l&&b(c,m.end,h(g),g);l=!1})})},remove:function(a){a.off("._pointer_events_namespace")}}];var p;for(k=0;k<q.length;k++)!p&&q[k].test()&&(p=q[k]);if(p){for(var l in m)e.event.special[m[l]]={add:function(a){var b=e(this);b.data("._pointer_events_bound")||(b.data("._pointer_events_bound",
!0),p.add(b,a))},remove:function(a){a=e(this);p.remove(a);a.removeData("._pointer_events_bound")}};e.pointer={defaults:g};return{eventNamespace:"_pointer_events_namespace"}}},jQuery,window);s("events.resized",function(f,e,q){f.event.special.resized={setup:function(k){function n(){m=h.width();g=h.height();if(Math.abs(m-b)>d||Math.abs(g-a)>d){var c={oldWidth:b,oldHeight:a,newWidth:m,newHeight:g};b=h.width();a=h.height();h.trigger("resized",c)}}var h=f(window),c,d=0,b=0,a=0,m,g;(function(){var c=f("<div></div>").css({position:"absolute",
width:"100px",height:"100px",overflow:"scroll",left:"-200px"});f("body").append(c);try{var g=c.get(0);d=g.offsetWidth-g.clientWidth}catch(r){d=0}c.remove();b=h.width();a=h.height()})();h.on("resize",function(){e.clearTimeout(c);c=e.setTimeout(n,f.event.special.resized.defaults.throttle)})}};f.event.special.resized.defaults={throttle:150};return{}},jQuery,window);s("events.scroll",function(f,e){(function(){var e={};f.event.special.scrollend={setup:function(k){e=f.extend({padding:150,delay:250,initialLoadAttempts:10,
initialLoadDelay:1E3},k)},add:function(){var k=f(this);if(!k.data("_scrollend_init")){k.data("_scrollend_init",!0);var n=this===document,h=n?f(window):k,c=!1,d=-1,b=0,a=!1,m=function(){return n?f("body").prop("scrollHeight")||h.height()+1:h.prop("scrollHeight")||h.height()+1};h.on("scroll",function(){c=!0});setInterval(function(){if(c){var a;a=n?f(k).height()-f(k).scrollTop()-f(h).height()<=e.padding:k.scrollTop()+k.innerHeight()+e.padding>=k[0].scrollHeight;a?k.trigger("scrollend"):c=!1}},e.delay);
setInterval(function(){if(a){var c=h.height();c>d&&(d=c,m()<=d&&(b=0,a=!1))}else d=h.height(),m()<=d+10&&b<e.initialLoadAttempts?(b++,k.trigger("scrollend")):a=!0},e.initialLoadDelay)}}}})();(function(){var e={};f.event.special.scrolltop={setup:function(k){e=f.extend({padding:150,delay:250},k)},add:function(){var k=f(this);if(!k.data("_scrolltop_init")){k.data("_scrolltop_init",!0);var n=!1;(this===document?f(window):k).on("scroll",function(){n=!0});setInterval(function(){n&&(k.scrollTop()<=e.padding&&
k.trigger("scrolltop"),n=!1)},e.delay)}}}})();return{}},jQuery,window);s("lib","lib.actionSheet lib.dynamicLinks lib.messageLinks lib.scrollFix lib.sheet lib.sheetProvider lib.util lib.touchEventAdapter lib.globalConfiguration".split(" "),function(){return{}});s("lib.actionSheet",function(f,e,q){function k(h,c){var d=f(document.createElement("li"));d.append(c);h.append(d)}function n(h,c){var d=f(document.createElement("ul"));d.addClass("action-sheet");for(var b=0;b<c.length;b++)k(d,c[b]);d.on("click",
"a",function(a){h.sheet.hide()});h.sheet.show(d);h.content=d}return function(h){h=h||{};h.sheet=h.sheet;return{show:function(c){c=c||{};c.links=c.links||[];n(h,c.links||[])},hide:function(){h.sheet.hide()},content:function(){return h.content}}}},jQuery,window);s("lib.dynamicLinks",["lib.scrollFix","lib.actionSheet"],function(f,e,q,k,n){function h(a){return a.outerWidth()+parseInt(a.css("marginLeft"),10)+parseInt(a.css("marginRight"),10)+3}function c(a){"vertical"==a.direction?(a.parent.empty(),a.listWrapper=
q(document.createElement("div")).addClass("container").appendTo(a.parent),a.list=q(document.createElement("ul")).appendTo(a.listWrapper).css(g)):(a.parent.css({overflow:"hidden"}).empty(),a.listWrapper=q(document.createElement("div")).css(m).addClass("container").appendTo(a.parent),a.parentWidth=a.listWrapper.outerWidth(),a.list=q(document.createElement("ul")).appendTo(a.listWrapper).css(g),a.listWrapper.on("pan swipe pointerend",function(a){"left"!=a.direction&&"right"!=a.direction||a.stopPropagation()}),
f.preventBounce(a.listWrapper))}function d(a){a.additionalLinks=[];a.accumulatedWidth=0;a.preScrollTo=0;if("vertical"==a.direction){a.moreLink!=n&&(a.list.append(a.moreLink.element),a.moreLink.element.detach());for(var b=0;b<a.links.length;b++){var c=a.links[b];if(b>a.maxLinks-1)a.additionalLinks.push(c);else{var d=q(document.createElement("li")).append(c.element);d.addClass(c.className).appendTo(a.list)}}}else{a.moreLinkWidth=0;a.moreLink!=n&&(a.moreLink.element.css(p),a.list.append(a.moreLink.element),
a.moreLinkWidth=h(a.moreLink.element),a.moreLink.element.detach());for(var g=b=0;b<a.links.length;b++)if(c=a.links[b],d=q(document.createElement("li")).append(c.element),0!=d.children().length){d.css({display:"inline"}).addClass(c.className);d.appendTo(a.list);c.element.css(p);var l=h(c.element);c.selected&&(a.preScrollTo=a.accumulatedWidth);a.accumulatedWidth+l>a.parentWidth&&g+1<=a.minLinks?a.accumulatedWidth+=l:0<a.additionalLinks.length||(a.accumulatedWidth+l+a.moreLinkWidth>a.parentWidth||g+
1>a.maxLinks)&&g+1>a.minLinks?(d.detach(),a.additionalLinks.push(c)):a.accumulatedWidth+=l;g++}}}function b(b){if("vertical"==b.direction)0<b.additionalLinks.length&&(b.moreLink&&b.onShowMore)&&(q(document.createElement("li")).append(b.moreLink.element).addClass(b.moreLink.className).appendTo(b.list),b.moreLink.element.off(a).on("click"+a,function(a){b.onShowMore(b.additionalLinks,b.cancelLink);return!1})),b.list.css({visibility:"visible"});else{0<b.additionalLinks.length&&(b.moreLink&&b.onShowMore)&&
(q(document.createElement("li")).css({display:"inline"}).append(b.moreLink.element).addClass(b.moreLink.className).appendTo(b.list),b.accumulatedWidth+=b.moreLinkWidth,b.moreLink.element.off(a).on("click"+a,function(a){b.onShowMore(b.additionalLinks,b.cancelLink);return!1}));b.list.css({width:b.accumulatedWidth>b.parentWidth?b.accumulatedWidth:b.parentWidth,visibility:"visible"});b.listWrapper.get(0).scrollLeft=b.preScrollTo-b.preScrollOffset;var c=b.list.height();0!=c&&(b.parent.css({height:c}),
b.listWrapper.css({height:c+20}))}}var a="._dynamicLinks",m={overflow:"hidden","overflow-x":"auto"},g={visible:"hidden","list-style":"none",padding:"0px",margin:"0px",overflow:"hidden"},p={"float":"left"},l=function(a){var g=q.extend({},l.defaults,a||{});return{render:function(){c(g);d(g);b(g)},addLink:function(a,l){l!=n?g.links.splice(l,0,a):g.links[g.links.length]=a;c(g);d(g);b(g)},removeLink:function(a){g.links=q.grep(g.links,function(b){return!q(b.element).is(a)});c(g);d(g);b(g)},links:function(a){return a?
g.additionalLinks:g.links},cancelLink:function(){return g.cancelLink},moreLink:function(){return g.moreLink}}};l.defaults={preScrollOffset:10,minLinks:0,maxLinks:50,direction:"vertical",parent:null,links:[],moreLink:null,cancelLink:null,onShowMore:function(a,b){}};return l},jQuery,window);s("lib.globalConfiguration",function(){return{baseUrl:"",authorizationCookieName:"AuthorizationCookie",defaultErrorMessage:"An error occured while communicating with the server.",defaultMultiErrorMessagePrefix:"The following errors occured while communicating with the server:\t ",
isRemote:!1,remoteUrlEncodePattern:"",accessingUserId:0,accessingUserIsSystemAccount:!0}});s("lib.messageLinks",function(f,e,q){return function(e){e=e||{};var n=f(e.parent);return{handle:function(h){n.on(h||"click","a[data-messagename]",function(c){c.preventDefault();c.stopPropagation();c.stopImmediatePropagation();f.telligent.evolution.messaging.publish(f(this).data("messagename"),{target:this})})}}}},jQuery,window);s("lib.scrollFix",function(f,e,q){function k(f){var h,c=f.get(0);f.on("pointerstart",
function(d){h=c.scrollTop;0>=h&&(c.scrollTop=1);h+c.offsetHeight>=c.scrollHeight&&(c.scrollTop=c.scrollHeight-c.offsetHeight-1);originalScrollLeft=c.scrollLeft;0>=originalScrollLeft&&(c.scrollLeft=1);originalScrollLeft+c.offsetWidth>=c.scrollWidth&&(c.scrollLeft=c.scrollWidth-c.offsetWidth-1)})}return{preventBounce:function(e){e=e||f("body").children().first();k(e)},fix:function(f){f.on("touchmove.scrollfix mousemove.scrollfix mspointermove.scrollfix",function(h){h.originalEvent.preventDefault()})},
unfix:function(f){f.off(".scrollfix")}}},jQuery,window);s("lib.sheet",["lib.scrollFix","module.messaging"],function(f,e,q,k,n){function h(a){a.inited||(a.inited=!0,a.backDrop=q(document.createElement("div")).css({backgroundColor:a.backgroundColor,opacity:0.01,zIndex:100,position:"fixed",top:0,left:0,display:"none","-webkit-transform":"translate3d(0,0,0)","-webkit-backface-visibility":"hidden",transform:"translate3d(0,0,0)"}).appendTo(a.parent),a.sheet=q(document.createElement("div")).css({zIndex:101,
position:"fixed",left:0,top:0,display:"none","-webkit-transform":"translate3d(0,0,0)","-webkit-backface-visibility":"hidden",transform:"translate3d(0,0,0)"}).appendTo(a.parent).addClass(a.cssClass),a.sheet.on("click","a",function(){var a=q(this);(a=a.attr("href")||a.closest("[href]").attr("href"))&&(1<a.length&&q.telligent&&q.telligent.evolution&&q.telligent.evolution.mobile)&&q.telligent.evolution.mobile.load(a)}),m(a))}function c(a){a.windowWidth=0<window.innerWidth?window.innerWidth:screen.width;
a.windowHeight=0<window.innerHeight?window.innerHeight:screen.height;a.visible?(a.backDrop.css({width:a.windowWidth,height:a.windowHeight}),a.sheet.css({width:a.windowWidth,maxHeight:a.maxHeightPerent*a.windowHeight})):(a.backDrop&&a.backDrop.css({width:a.windowWidth,height:a.windowHeight}),a.sheet&&a.sheet.css({width:a.windowWidth,maxHeight:a.maxHeightPerent*a.windowHeight}))}function d(a,b,c){c=c||a.animationDuration;a.backDrop.evolutionTransform({opacity:a.backDrop.css("opacity")}).evolutionTransform({opacity:0.01+
b*a.backgroundOpacity},{duration:c,easing:a.animationEasing});a.sheet.evolutionTransform({y:a.windowHeight-b*a.sheet.outerHeight(),x:0},{duration:c,easing:a.animationEasing});1<=b?a.onOpened&&(k.clearTimeout(a.openedTimeout),a.openedTimeout=k.setTimeout(function(){a.onOpened.apply(this);k.clearTimeout(a.openedTimeout)},c)):0>=b&&a.onClosed&&(k.clearTimeout(a.closedTimeout),a.closedTimeout=k.setTimeout(function(){a.onClosed.apply(this);k.clearTimeout(a.closedTimeout)},c))}function b(a,b){a.visible||
(q("body").css({height:"100%",overflow:"scroll"}),a.visible=!0,a.onOpening&&a.onOpening.apply(this),h(a),c(a),a.sheet.empty().append(b),a.sheet.evolutionTransform({y:a.windowHeight,x:0}),a.backDrop.get(0).style.display="block",a.sheet.get(0).style.display="block",d(a,1))}function a(a,b){a.visible&&(q("body").css({height:"100%",overflow:"visible"}),a.visible=!1,b=b||a.animationDuration,a.onClosing&&a.onClosing.apply(this),d(a,0),k.setTimeout(function(){a.visible||(a.visible=!1,a.backDrop.get(0).style.display=
"none",a.sheet.get(0).style.display="none")},b))}function m(b){b.backDrop.on("tap",function(){a(b)})}return function(d){d=d||{};d.maxHeightPerent=d.maxHeightPerent||0.85;d.parent=q(d.parent);d.cssClass=d.cssClass||"sheet";d.backgroundColor=d.backgroundColor||"#333";d.backgroundOpacity=d.backgroundOpacity||0.5;d.animationDuration=d.animationDuration||250;d.animationEasing=d.animationEasing||"cubic-bezier(0.160, 0.060, 0.450, 0.940)";d.visible=!1;q.telligent.evolution.messaging.subscribe("mobile.orientationchange",
function(){k.setTimeout(function(){c(d)},300)});return{show:function(a){b(d,a)},hide:function(){a(d)}}}},jQuery,window);s("lib.sheetProvider",function(f,e,q){return{}},jQuery,window);s("lib.touchEventAdapter",["lib.util","events.gestures","events.pointers"],function(f,e,q,k,n,h){function c(){var a={mouseenter:"taphold",mouseover:"taphold",mouseleave:"pointerend",mousedown:"pointerstart",mouseup:"pointerend"};k.fn.on=k.fn.bind=d(k.fn.on,a,!0);k.fn.trigger=d(k.fn.trigger,a,!1);k.fn.off=k.fn.unbind=
d(k.fn.off,a,!1)}function d(a,b,c){return function(){var d=Array.prototype.slice.call(arguments,0);if(c&&1===d.length&&k.isPlainObject(d[0])){var g=d[0];k.each(b,function(a,b){g[a]!=h&&(g[b]=g[a],delete g[a])});return a.call(this,g)}if("string"!=typeof d[0])return a.apply(this,d);eventParts=d[0].split(".",2);if(2==eventParts.length&&(eventParts[1]==e.eventNamespace||eventParts[1]==q.eventNamespace))return a.apply(this,d);b[eventParts[0]]&&(eventParts[0]=b[eventParts[0]],d[0]=eventParts.join("."));
return a.apply(this,d)}}var b="ontouchstart"in window||0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints,a="_evolutionForceTouchRemap"in window,m=k.telligent&&k.telligent.evolution&&k.telligent.evolution._SUPPRESS_TOUCH_MOUSE_EVENTS;/chrom(e|ium)/.test(navigator.userAgent.toLowerCase());/android/.test(navigator.userAgent.toLowerCase());f=/windows nt/.test(navigator.userAgent.toLowerCase());var g="MouseEvent"in window&&(!("ontouchstart"in window)||f);parseInt((/Chrome\/([0-9]+)/.exec(navigator.userAgent)||
["0","0"])[1],10);document.querySelector&&document.querySelector('meta[name=viewport][content*="width=device-width"]');document.querySelector&&document.querySelector('meta[name=viewport][content*="user-scalable=no"]');return{adapt:function(){if(b||a)g||m||c(),k(function(){k("body").addClass("touch")})}}},jQuery,window);s("lib.util",function(f){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return{throttle:function(e,k){var n,h;return function(){var c=this;attemptAt=
(new Date).getTime();args=arguments;n&&n+(k||50)>attemptAt?(f.clearTimeout(h),h=f.setTimeout(function(){n=attemptAt;e.apply(c,args)},k||50)):(n=attemptAt,e.apply(c,args))}},debounce:function(f,e){var n;return function(){var h=this,c=arguments;clearTimeout(n);n=setTimeout(function(){f.apply(h,c)},e||10)}},wrap:function(f,e){return function(){try{e.before&&e.before.apply(this,arguments)}catch(n){}var h=f.apply(this,arguments);try{e.after&&e.after.apply(this,arguments)}catch(c){}return h}},guid:function(){return e()+
e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}},window);s("modules","module.emailDigest module.administrationToolbar module.configuration module.editableGroup module.html module.language module.maxlength module.media module.messaging module.navigationConfirmation module.notifications module.preview module.regex module.sockets module.template module.ui module.url module.tourtips module.rest".split(" "),function(){return{}});s("module.emailDigest",function(f,e,q){f.telligent||(f.telligent={});f.telligent.evolution||
(f.telligent.evolution={});var k=function(e,h){0>h||(0<h&&""!=e.subscriptionId&&(""==e.context||"undefined"===e.contextId)?_showMessage(e,e.errorMessage):f.telligent.evolution.post({url:e.emailDigestUrl,data:{subscriptionId:e.subscriptionId,frequency:h,context:e.context,contextId:e.contextId},success:function(c){c=eval("("+c+")");var d=null;"create"==c.action?(e.subscriptionId=c.subscriptionId,e.frequency=h,1==h?d=e.dailyMessage:7==h&&(d=e.weeklyMessage)):"update"==c.action?(e.frequency=h,1==h?d=
e.dailyMessage:7==h&&(d=e.weeklyMessage)):"delete"==c.action&&(e.subscriptionId="",e.frequency=0,"group"==e.context&&(d=e.unsubscribeGroupMessage));c.warnings&&0<c.warnings.length?_showMessage(e,c.warnings[0],"warning"):d&&_showMessage(e,d,"success");c={subscriptionId:e.subscriptionId,frequency:e.frequency,context:e.context,contextId:e.contextId,action:c.action};f(document).trigger("emailDigestSubscriptionChange",[c])},error:function(c,d,b){_showMessage(e,e.errorMessage,"error")}}))};_showMessage=
function(e,h,c){f.telligent.evolution.notifications.show(h,{type:c,duration:5E3})};f.telligent.evolution.emailDigest={register:function(e){f("#"+e.selectPopupId).glowPopUpPanel({cssClass:"Panel",position:"updown",zIndex:100,hideOnDocumentClick:!0});f("#"+e.rollupWrapperId).click(function(){var h=f(this),c="",d="",b="";1==e.frequency?c="email-digest-selected":7==e.frequency?d="email-digest-selected":b="email-digest-selected";var a=h.outerWidth(),m=h.outerHeight(),h=h.offset(),c="<div class='email-digest-selectWrapper' style=\"min-width: "+
(a-2)+'px;"><div frequency="1" class="email-digest-selectable '+e.selectableTag+" "+c+'"><span style="display: block; white-space: nowrap;">'+e.popupDaily+'</span></div><div frequency="7" class="email-digest-selectable '+e.selectableTag+" "+d+'"><span style="display: block; white-space: nowrap;">'+e.popupWeekly+'</span></div><div frequency="0" class="email-digest-selectable '+e.selectableTag+" "+b+'"><span style="display: block; white-space: nowrap;">'+e.popupUnsubscribe+"</span></div></div>";f("#"+
e.selectPopupId).glowPopUpPanel("hide").glowPopUpPanel("html",c).glowPopUpPanel("show",h.left+4,h.top+5,a,m-10,!1)});f("."+e.selectableTag).live("click",function(){var h=f(this);h.hasClass("email-digest-selected")||(h=h.attr("frequency"),k(e,h))});f(document).bind("emailDigestSubscriptionChange",function(h,c){if(c.context==e.context&&c.contextId==e.contextId){var d="";"create"==c.action||"update"==c.action?("1"==c.frequency?d=e.rollupDaily:"7"==c.frequency&&(d=e.rollupWeekly),e.subscriptionId=c.subscriptionId):
(d=e.rollupUnsubscribed,e.subscriptionId="");e.frequency=c.frequency;f("#"+e.rollupTextId).html(d)}})}};return{}},jQuery,window);s("module.administrationToolbar",function(f,e,q){f.telligent||(f.telligent={});f.telligent.evolution||(f.telligent.evolution={});f.telligent.evolution.administrationToolbar={get:function(){var e;e=f(".admin-bar");0<e.length||(e=f("form"),1<e.length&&(e=f("body")),e.prepend(f('<div class="admin-bar-header"></div><div class="admin-bar site"></div><div class="admin-bar-footer"></div>')),
e=f(".admin-bar"));return e}};return{}},jQuery,window);s("module.configuration",["lib.globalConfiguration"],function(f,e,q,k){function n(c,d,b){for(c+="";c.length<d;)c=b+c;return c}var h=e.fn.filter;e.fn.filter=function(){arguments&&(0<arguments.length&&"string"==typeof arguments[0])&&(arguments[0]=arguments[0].replace(/:\[/g,"["));return h.apply(this,arguments)};document.cookie=".te.dpr="+(Math.round(window.devicePixelRatio||1)||1);k={formatDate:function(c){try{return[n(c.getFullYear(),4,"0"),"-",
n(c.getMonth()+1,2,"0"),"-",n(c.getDate(),2,"0"),"T",n(c.getHours(),2,"0"),":",n(c.getMinutes(),2,"0"),":",n(c.getSeconds(),2,"0")].join("")}catch(d){}return""},parseDate:function(){var c=(new Date).getTimezoneOffset();return function(d){var b,a=new Date;if(null===d||""===d)return a;if(null!=(b=/\/Date\((\d+)(?:-(\d+))?\)\//.exec(d)))return new Date(parseInt(b[1],10));if(null!=(b=/(\d{4,4})\-(\d{2,2})\-(\d{2,2})(?:T(\d{2,2}):(\d{2,2}):(?:(\d{2,2})(?:\.(\d{0,3}))?))([zZ]|([+\-])(((\d\d):(\d\d))|(\d\d\d\d)))?/.exec(d))){d=
[a.getFullYear(),a.getMonth()+1,a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()];for(a=1;a<b.length&&8>a;a++)""!=b[a]&&void 0!=b[a]&&(d[a-1]=parseInt(b[a],10));d=new Date(d[0],d[1]-1,d[2],d[3],d[4],d[5],d[6]);if(b[8]){var m,g;"z"==b[8]||"Z"==b[8]?(m=0,g=1):b[9]&&b[12]&&b[13]?(m=60*parseInt(b[12],10)+parseInt(b[13],10),g="+"==b[9]?1:-1):b[9]&&b[10]&&(m=60*parseInt(b[10].substring(0,2),10)+parseInt(b[10].substring(2),10),g="+"==b[9]?1:-1);d=new Date(d.getTime()+-6E4*(g*m+
c))}return d}throw"Invalid date format";}}(),site:{configure:function(c){e.extend(f,c);e.telligent.evolution.user={accessing:{id:f.accessingUserId,isSystemAccount:f.accessingUserIsSystemAccount}};e.fn.glowDateTimeSelector&&e.extend(e.fn.glowDateTimeSelector.defaults,{monthNames:f.monthNames,dayNames:f.dayNames,calendarButtonImageUrl:e.telligent.evolution.site.getBaseUrl()+"utility/images/glow/DateTimeSelectorCalendar.gif"});e.glowModal&&(e.extend(e.glowModal.defaults,{loadingHtmlUrl:"about:blank",
windowCssClasses:["modal"],windowTitleCssClasses:["modal-title","modal-title-2","modal-title-3","modal-title-4"],windowCloseCssClasses:["modal-close"],windowContentCssClasses:["modal-content","modal-content-2"],windowMaskCssClasses:["modal-mask"],windowFooterCssClasses:["modal-footer","modal-footer-2","modal-footer-3"],windowResizeCssClasses:["modal-resize"],zIndex:200001}),q.Telligent_Modal={GetWindowOpener:function(c,b){return e.glowModal.opener(c,b)},IsShown:function(c){return e.glowModal.visible(c)},
Resize:function(c,b,a,m){e.glowModal.resize(c,b,a,m)},MoveTo:function(c,b,a){e.glowModal.moveTo(c,b,a)},Open:function(c,b,a,m,g,p,l,r,h){e.glowModal(c,{width:b,height:a,onClose:m,x:g,y:p,ignoreCloseAndAnimation:l,isManuallyresized:r,openerWindow:h})},Close:function(c,b){e.glowModal.close(c,b)},Refresh:function(c){e.glowModal.refresh(c)}});e.fn.glowDropDownList&&e.extend(e.fn.glowDropDownList.defaults,{buttonImageUrl:e.telligent.evolution.site.getBaseUrl()+"utility/images/glow/DropDownListButton.gif"});
e.fn.glowColorSelector&&e.extend(e.fn.glowColorSelector.defaults,{blendImageUrl:e.telligent.evolution.site.getBaseUrl()+"utility/images/glow/ColorSelectorSv.png",hueBlendImageUrl:e.telligent.evolution.site.getBaseUrl()+"utility/images/glow/ColorSelectorHue.png"});e.fn.glowMultiUpload&&e.extend(e.fn.glowMultiUpload.defaults,{swfUrl:e.telligent.evolution.site.getBaseUrl()+"utility/images/glow/Moxie.swf",silverlightUrl:f.silverlightFileUploadEnabled?e.telligent.evolution.site.getBaseUrl()+"utility/images/glow/Moxie.xap":
"",runtimes:f.silverlightFileUploadEnabled?"html5,silverlight,flash":"html5,flash"});e.fn.glowUpload&&e.extend(e.fn.glowUpload.defaults,{swfUrl:e.telligent.evolution.site.getBaseUrl()+"utility/images/glow/Moxie.swf",silverlightUrl:f.silverlightFileUploadEnabled?e.telligent.evolution.site.getBaseUrl()+"utility/images/glow/Moxie.xap":"",runtimes:f.silverlightFileUploadEnabled?"html5,silverlight,flash":"html5,flash"})},getBaseUrl:function(c){if(!0===c){c=q.location.href+"";var d=c.indexOf("/",9);if(0<
d)return c.substr(0,d)+f.baseUrl}return f.baseUrl}}};e.telligent=e.telligent||{};e.telligent.evolution=e.telligent.evolution||{};e.extend(e.telligent.evolution,k);return{}},jQuery,window);s("module.editableGroup",function(f,e,q){f.telligent||(f.telligent={});f.telligent.evolution||(f.telligent.evolution={});var k={},n=function(b,a,c){if(b.isSaving)if(a+1<b.widgets.length){var d=b.widgets[a+1];d.save?(d=d.save(function(){n(b,a+1,c)},function(){h(b,a+1,c)}),!1===d?h(b,a+1,c):!0===d&&n(b,a+1,c)):n(b,
a+1,c)}else c.success&&(b.isSaving=!1,c.success())},h=function(b,a,c){b.isSaving&&(b.isSaving=!1,c.error&&c.error())},c=function(b,a,c){if(b.isValidating){b.widgets[a].valid=!0;var d=0;f.each(b.widgets,function(a,b){!0!==b.valid&&d++});0==d&&(b.isValidating=!1,c.success&&c.success())}},d=function(b,a,c){b.isValidating&&(b.widgets[a].valid=!1,b.isValidating=!1,c.error&&c.error())};f.telligent.evolution.editableGroup={register:function(b,a){var c=k[b];c||(c={widgets:[],isSaving:!1,isValidating:!1},
k[b]=c);c.widgets[c.widgets.length]=f.extend({},a||{},{valid:!1,saved:!1})},save:function(b,a){f.telligent.evolution.editableGroup.validate(b,{success:function(){var c=k[b];c&&0<c.widgets.length?(c.isSaving=!0,n(c,-1,a)):a&&a.success&&a.success()},error:function(){a.error&&a.error()}})},validate:function(b,a){var m=k[b];m&&0<m.widgets.length?(f.each(m.widgets,function(a,b){b.valid=q}),m.isValidating=!0,f.each(m.widgets,function(b,p){if(p.validate){var l=p.validate(function(){c(m,b,a)},function(){d(m,
b,a)});!1===l?d(m,b,a):!0===l&&c(m,b,a)}else c(m,b,a)})):a&&a.success&&a.success()}};return{}},jQuery,window);s("module.html",function(f,e,q){f.telligent||(f.telligent={});f.telligent.evolution||(f.telligent.evolution={});f.telligent.evolution.html={encode:function(e){return e?f("<div/>").text(e).html():e},decode:function(e){if(!e)return e;e=e.replace(/<[^>]*>/g," ");return f("<div/>").html(e).text()}};return{}},jQuery,window);s("module.language",function(f,e,q){var k={},n={};agoLastRefresh=(new Date).getTime();
buildCacheKey=function(c,d){return c.toString()+"-"+d};loadFormattedDate=function(c,d,b){var a=k;"agodate"==d&&(6E4<(new Date).getTime()-agoLastRefresh&&(n={},agoLastRefresh=(new Date).getTime()),a=n);var m=a[buildCacheKey(c,d)];"undefined"===typeof m?f.telligent.evolution.get({url:h.defaults.dateEndpoint,data:{date:f.telligent.evolution.formatDate(c),format:d},success:function(g){g&&(b&&"undefined"!==typeof g&&null!==g&&g.formattedDate)&&(a[buildCacheKey(c,d)]=g.formattedDate,b(g.formattedDate))}}):
b(m)};var h={formatDate:function(c,d){loadFormattedDate(c,"date",d)},formatDateAndTime:function(c,d){loadFormattedDate(c,"datetime",d)},formatAgoDate:function(c,d){loadFormattedDate(c,"agodate",d)},defaults:{dateEndpoint:""}};f.telligent||(f.telligent={});f.telligent.evolution||(f.telligent.evolution={});f.telligent.evolution.language=h;return{}},jQuery,window);s("module.maxlength",function(f,e,q){return{shim:function(){f("textarea[maxlength]").live("keyup change",function(){var e=f(this),n=e.attr("maxlength"),
h=e.val();h.length>n&&e.val(h.substr(0,n))})}}},jQuery,window);s("module.media",function(f,e,q){var k=function(e,c,d){var b=f.extend({},n.defaults,d||{});e={url:e,view:c};b.width&&(e.width=b.width);b.height&&(e.height=b.height);f.telligent.evolution.get({url:b.endpoint,data:e,success:function(a){a&&b.success&&b.success(a)},error:function(a,c,d){b.error&&b.error(a,c,d)}})},n={previewHtml:function(e,c){k(e,"preview",c)},viewHtml:function(e,c){k(e,"view",c)},defaults:{endpoint:""}};f.telligent||(f.telligent=
{});f.telligent.evolution||(f.telligent.evolution={});f.telligent.evolution.media=n;return{}},jQuery,window);s("module.messaging",function(f,e,q){function k(a){if(!a)throw"subscriptionId is required when unsubscribing a message";if(isNaN(a)){if(a&&b[a]){for(var c=0;c<b[a].length;c++)k(b[a][c]);b[a].length=0}}else n(a)}function n(a){if("undefined"!==typeof d[String(a)]){var b=d[String(a)],g=-1,p=c[b.message];f.each(p,function(a,c){c===b&&(g=a)});0<=g&&p.splice(g,1);0===p.length&&delete c[b.message];
delete d[String(a)]}}var h=0,c={},d={},b={};e={publish:function(a,b){if(!a)throw"messageName is required when publishing a message";if(null!==a&&0!==a.length){var d=c[a];d&&f.each(d,function(a,c){if(null!==c.handler)try{c.handler.call(this,b)}catch(d){}})}},subscribe:function(a,m,g){if(!a)throw"messageName is required when subscribing to a message";if(null===a||0===a.length)return 0;"undefined"===typeof c[a]&&(c[a]=[]);var p=m;g==q&&(g=m,p="content");m={message:a,handler:g,namespace:p,id:++h};c[a][c[a].length]=
m;d[String(m.id)]=m;b[p]||(b[p]=[]);return b[p][b[p].length]=m.id},unsubscribe:k};f.telligent||(f.telligent={});f.telligent.evolution||(f.telligent.evolution={});return f.telligent.evolution.messaging=e},jQuery,window);s("module.navigationConfirmation",function(f,e,q){f.telligent||(f.telligent={});f.telligent.evolution||(f.telligent.evolution={});var k={message:"",enabled:!1,ignoreClick:!1},n=function(){if(!k.ignoreClick)return k.message};f.telligent.evolution.navigationConfirmation={configure:function(e){k=
f.extend(k,e)},enable:function(){k.enabled||(window.onbeforeunload=n,k.enabled=!0,f(document).bind("customizepage",function(){k.ignoreClick=!0}))},register:function(e){f(e).click(function(){k.ignoreClick=!0})},ignoreClick:function(){k.ignoreClick=!0}};return{}},jQuery,window);s("module.notifications",["lib.util"],function(f,e,q,k){function n(a,l){var p=e.grep(a.notifications,function(a){return a.id===l.id});if(null!==p&&1===p.length)return p=p[0],c(a,p).then(function(){p.view.remove();p.message=l.message;
p.cssClass=l.cssClass;p.duration=l.duration;m(a,p);p.suppressPositionAnimation=!0;h(a);d(a,p);g(a,p)}),p;a.notifications.length===a.limit&&b(a,a.notifications[a.notifications.length-1]);a.notifications.unshift(l);m(a,l);h(a);d(a,l);g(a,l);return l}function h(a){var b=a.margin;e.each(a.notifications,function(c,d){d.suppressPositionAnimation?(d.view.css({bottom:b+"px",opacity:0}),d.suppressPositionAnimation=!1):d.view.animate({bottom:b+"px"},a.animationDuration);0<d.measuredHeight&&(b+=d.measuredHeight+
a.margin)})}function c(a,b){b.onHide&&b.onHide.apply(b);return e.Deferred(function(c){b.view.fadeOut(a.animationDuration,c.resolve)}).promise()}function d(a,b){b.onShow&&b.onShow.apply(b);return e.Deferred(function(c){b.view.fadeTo(a.animationDuration,a.opacity,c.resolve)}).promise()}function b(a,b){b.removing=!0;b.measuredHeight=0;h(a);c(a,b).then(function(){b.view.remove();a.notifications=e.grep(a.notifications,function(a){return a!==b})})}function a(a,c){q.clearTimeout(c.removeTimeout);q.clearInterval(c.hideSupressedWaitInterval);
q.setTimeout(function(){a.removalSuppressed?c.hideSupressedWaitInterval=q.setInterval(function(){a.removalSuppressed||(q.clearInterval(c.hideSupressedWaitInterval),b(a,c))},1E3):b(a,c)},c.duration)}function m(a,b){b.active=!!b.onClick;b.view=e(a.template(b)).css({position:"fixed",left:a.margin+"px",bottom:a.margin+"px",zIndex:1E4,width:b.width}).hide().appendTo(a.parent);b.measuredHeight=b.view.outerHeight()}function g(c,g){g.view.find("a.close").on("click",function(a){a.preventDefault();a.stopPropagation();
g.onClose?(a=g.onClose.apply(g))?a.then(function(){b(c,g)}):b(c,g):b(c,g)});g.view.on("click",function(){g.onClick&&g.onClick.apply(g)});g.view.on("mouseenter",function(){c.entered=!0;c.removalSuppressed=!0;g.removing&&(g.view.stop(),g.removing=!1,d(c,g),h(c),a(c,g));g.onOver&&g.onOver.apply(g)});g.view.on("mouseleave",function(){c.entered=!1;q.setTimeout(function(){c.entered||(c.removalSuppressed=!1)},500);g.onOut&&g.onOut.apply(g)})}var p,l={show:function(b,c){if(!p){var d=e.extend({},l.defaults,
{},{removalSuppressed:!1,notifications:[]});d.template=e.telligent.evolution.template.compile(d.template);p=d}d=e.extend({},l.show.defaults,c||{});d.message=b;d.cssClass=d.type||"";d.id||(d.id=f.guid());a(p,n(p,d));return d.id},hide:function(a){if(p&&a)if(e.isFunction(a))e.each(p.notifications,function(a,c){b(p,c)}),a();else{var c=e.grep(p.notifications,function(b){return b.id===a});c&&0!=c.length&&b(p,c[0])}}};l.show.defaults={duration:5E3,width:200,type:"",id:null,onClick:null,onClose:null,onShow:null,
onHide:null,onOver:null,onOut:null};l.defaults={template:'<div class="push-notification <%: cssClass %> <% if(active) { %>active<% } %>">  <a href="#" class="close">x</a>   <%= message %> </div> ',parent:"body",margin:5,animationDuration:250,opacity:0.95,limit:10};e.telligent=e.telligent||{};e.telligent.evolution=e.telligent.evolution||{};e.telligent.evolution.notifications=l;return{}},jQuery,window);s("module.preview",function(f,e,q){var k=function(e,c){var d=f.extend({},n.defaults,c||{});f.telligent.evolution.get({url:d.endpoint,
data:{url:e,maxImageWidth:"undefined"!==typeof c.maxImageWidth?c.maxImageWidth:d.maxImageWidth,maxImageHeight:"undefined"!==typeof c.maxImageHeight?c.maxImageHeight:d.maxImageHeight},success:function(b){b&&d.success&&"undefined"!==typeof b&&null!==b?d.success(b):d.error&&d.error(b)},error:function(b,a,c){d.error&&d.error(b,a,c)}})},n={load:function(e,c){k(e,c)},render:function(e,c){if(null!==e&&"undefined"!==typeof e&&"undefined"!==typeof e.url&&0!==e.url.length&&"undefined"!==typeof e.title&&0!==
e.title.length){var d=f.extend({},n.defaults,c);return f.telligent.evolution.template.compile(d.template)(e)}},defaults:{endpoint:"",maxImageWidth:90,maxImageHeight:90,template:'<div class="abbreviated-post-header shared-link"></div><div class="abbreviated-post shared-link <% if(imageUrl !== null && imageUrl.length > 0){ %> with-image <% } %>">   <h4 class="post-name"><a href="<%: url %>" <% if(url.indexOf(jQuery.telligent.evolution.site.getBaseUrl(true)) < 0) { %>class="external-link" target="_blank"<% } %> rel="nofollow"><%= title %></a></h4>   <% if(siteName !== null && siteName.length > 0){ %>       <div class="post-application">           <span class="label"></span>           <span class="value"><a href="<%: url %>" <% if(url.indexOf(jQuery.telligent.evolution.site.getBaseUrl(true)) < 0) { %>class="external-link" target="_blank"<% } %> rel="nofollow"><%= siteName %></a></span>       </div>   <% } %>   <% if(imageUrl !== null && imageUrl.length > 0){ %>       <div class="post-thumbnail">           <a href="<%: url %>" <% if(url.indexOf(jQuery.telligent.evolution.site.getBaseUrl(true)) < 0) { %>class="external-link" target="_blank"<% } %> rel="nofollow"><%= resizedImageHtml %></a>       </div>   <% } %>   <% if(excerpt !== null && excerpt.length > 0){ %>       <div class="post-summary">           <%= excerpt %>      </div>   <% } %></div><div class="abbreviated-post-footer shared-link"></div>'}};
f.telligent||(f.telligent={});f.telligent.evolution||(f.telligent.evolution={});f.telligent.evolution.preview=n;return{}},jQuery,window);s("module.regex",function(f,e,q){f.telligent||(f.telligent={});f.telligent.evolution||(f.telligent.evolution={});f.telligent.evolution.regex={encode:function(e){return e?e.replace(/[\-\[\]\{\}\(\)\*\+\?\.\,\\\^\$\|\#\s]/g,"\\$&"):e}};return{}},jQuery,window);s("module.rest",["lib.globalConfiguration"],function(f,e,q,k){function n(a){var b;a:{b=f.authorizationCookieName+
"=";for(var c=document.cookie.split(";"),d=0;d<c.length;d++){for(var g=c[d];" "==g.charAt(0);)g=g.substring(1,g.length);if(0==g.indexOf(b)){b=g.substring(b.length,g.length);break a}}b=null}null!=b&&(a.setRequestHeader("Authorization-Code",b),a.setRequestHeader("Rest-Authorization-Code",b))}function h(a){a&&"~/"==a.substr(0,2)&&(a=f.baseUrl+a.substr(2));f.isRemote&&(f.remoteUrlEncodePattern&&a&&-1<a.lastIndexOf("/~/"))&&(a=a.substr(0,a.lastIndexOf("/~/")+3)+a.substr(a.lastIndexOf("/~/")+3).replace(RegExp(f.remoteUrlEncodePattern,
"gi"),function(a,b,c){return"_"+a.substr(1)}));return a}function c(a,b){var c=a,d=b;c&&(b&&"string"!==typeof b)&&(d={},e.each(b,function(a,b){var g=RegExp("{"+a+"}","gim");c.match(g)?c=c.replace(g,q.encodeURIComponent(b)):d[a]=b}));return{url:c,data:d}}function d(a,b,c){var d=b,g=null;try{var l=e.isPlainObject(a)?a:e.parseJSON(a);if(l&&l.Errors&&e.isArray(l.Errors)&&0<l.Errors.length){var p=[];e.each(l.Errors,function(a,b){var c=b.split(":",2);1===c.length?p.push(c[0].replace(t,"")):0<=e.inArray(c[0],
z)&&p.push(c[1].replace(t,""))});1===p.length||1<p.length&&e.telligent.evolution.notifications===k?d=p[0]:1<p.length&&(g=p[0],d=c,d+="<ul>",e.each(p,function(a,b){d+="<li>"+b+"</li>"}),d+="</ul>")}if(null===d||""===e.trim(d))d=b}catch(m){}return g||d}function b(a,b){var g=c(a.url,a.data);a.url=h(g.url);a.data=g.data;var l=a.beforeSend,m=a.error,r=e.extend({},{defaultErrorMessage:f.defaultErrorMessage,defaultMultiErrorMessagePrefix:f.defaultMultiErrorMessagePrefix},a);e.extend(a,{type:"GET"===b?b:
"POST",beforeSend:function(a){l!==k&&l(a);n(a);"PUT"!==b&&"DELETE"!==b||a.setRequestHeader("Rest-Method",b)},error:function(a,b,c){if(0!==a.readyState&&0!==a.status)if(b=d(a.responseText,r.defaultErrorMessage,r.defaultMultiErrorMessagePrefix),m!==k)p(m,this,[a,b,c]);else try{e.telligent.evolution.notifications.show(b,{type:"error"})}catch(g){alert(b)}}});return e.ajax(a)}function a(){var a=++u;v[a]={dfd:e.Deferred(),reqs:[]};setTimeout(function(){delete v[a]},A);return a}function m(a,b){var d=v[a];
if(d===k)return e.Deferred(function(b){b.reject('Batch "'+a+'" not found')}).promise();if(0===d.reqs.length)return d.dfd.resolve(),d.dfd.promise();var l=e.extend({},C,b),m={Sequential:l.sequential};e.each(d.reqs,function(a,b){var d=b.options.url.replace(/\.xml/i,".json"),d=c(d,b.options.data);"GET"==b.verb?d.url=e.telligent.evolution.url.modify({url:d.url,query:d.data||{}}).split("#")[0]:m["_REQUEST_"+a+"_DATA"]=e.param(d.data||{});m["_REQUEST_"+a+"_URL"]=h(d.url);m["_REQUEST_"+a+"_METHOD"]=b.verb});
e.ajax({url:e.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/batch.json",type:"POST",data:m,beforeSend:function(a){l.beforeSend&&l.beforeSend(a);n(a)}}).done(function(b,c){g(d,b.BatchResponses,this,c);d.dfd.resolveWith(this,[b]);delete v[a]}).fail(function(b,c,l){0!==b.readyState&&0!==b.status&&(b.responseJSON&&b.responseJSON.BatchResponses?g(d,b.responseJSON.BatchResponses,b,c):e.each(d.reqs,function(a,d){d.options.error&&p(d.options.error,d.options,[b,c,l]);d.dfd.rejectWith(d.options,[b,c,l])}),
d.dfd.rejectWith(this,[b,c,l]),delete v[a])});return d.dfd.promise()}function g(a,b,c,g){e.each(b,function(b,l){var m=a.reqs[b];if(200===l.StatusCode)m.options.success&&p(m.options.success,m.options,[l.BatchResponse,g,c]),m.dfd.resolveWith(m.options,[l.BatchResponse,g,c]);else{var r=d(l.BatchResponse,m.options.defaultErrorMessage,m.options.defaultMultiErrorMessagePrefix);if(m.options.error)p(m.options.error,c,[l,r,g]);else try{e.telligent.evolution.notifications.show(r,{type:"error"})}catch(t){alert(r)}m.dfd.rejectWith(c,
[l,r,g])}m.options.complete&&p(m.options.complete,m.options,[c,g])})}function p(a,b,c){if(a)if(e.isArray(a))for(var d=0;d<a.length;d++)a[d].apply(b,c);else a.apply(b,c)}function l(c,d){null!==w&&(c.batch=w);if(c&&c.batch){var g;g=c.batch;v[g]===k&&(g=a());g=v[g];var l={options:e.extend({},{defaultErrorMessage:f.defaultErrorMessage,defaultMultiErrorMessagePrefix:f.defaultMultiErrorMessagePrefix},c),verb:d,dfd:e.Deferred()};g.reqs.push(l);return l.dfd.promise()}return b(c,d)}function r(b,c){if(b){if(null!==
w)throw"Batched REST requests cannot be nested.";var d=a();w=d;try{b.apply(this)}finally{w=null}return m(d,c)}}var z=["RecordNotFound","BadRequest","Conflict","Unauthorized","Unknown"],t=/(?:<|>)/g,v={},u=0,A=6E4,w=null,C={sequential:!1,beforeSend:null};r.create=a;r.process=m;var y={get:function(a){return l(a,"GET")},post:function(a){return l(a,"POST")},put:function(a){return l(a,"PUT")},del:function(a){return l(a,"DELETE")},writeAuthorizationHeader:n,ensureRemoteUrlEncoding:h,batch:r};e.telligent=
e.telligent||{};e.telligent.evolution=e.telligent.evolution||{};e.extend(e.telligent.evolution,y);q.TelligentUtility||(q.TelligentUtility={WriteAuthorizationHeader:function(a){e.telligent.evolution.writeAuthorizationHeader(a)}});return y},jQuery,window);s("module.sockets.configurableLongPolling",function(f,e,q){var k={longPollDelay:0};return{configure:function(n){var h=f.extend({},k,n||{}),c=f.signalR,d=f.signalR.events,b=f.signalR.changeState,a=f.signalR.isDisconnecting,m=c.transports._logic;c.transports.longPolling=
{name:"longPolling",supportsKeepAlive:!1,reconnectDelay:3E3,init:function(b,c){var d=this,r,f=function(c){!1===a(b)&&(b.log("Server ping failed because '"+c+"', re-trying ping."),b._.pingLoopId=e.setTimeout(r,d.reconnectDelay))};b.log("Initializing long polling connection with server.");r=function(){m.pingServer(b).done(c).fail(f)};r()},start:function(g,p,l){var r=this,z=function(){t=z=f.noop;g.log("Longpolling connected.");p();l=null},t=function(){return l?(l(),l=null,g.log("LongPolling failed to connect."),
!0):!1},v=g._,u=0,k=function(a){e.clearTimeout(v.reconnectTimeoutId);v.reconnectTimeoutId=null;!0===b(g,c.connectionState.reconnecting,c.connectionState.connected)&&(g.log("Raising the reconnect event."),f(a).triggerHandler(d.onReconnect))};g.pollXhr&&(g.log("Polling xhr requests already exists, aborting."),g.stop());v.reconnectTimeoutId=null;v.pollTimeoutId=null;r.init(g,function(){g.messageId=null;v.pollTimeoutId=e.setTimeout(function(){(function C(b,l){var p=null!==b.messageId,n=m.getUrl(b,r.name,
p,!l);!0!==a(b)&&(g.log("Opening long polling request to '"+n+"'."),b.pollXhr=f.ajax(f.extend({},f.signalR.ajaxDefaults,{xhrFields:{withCredentials:g.withCredentials},url:n,type:"GET",dataType:g.ajaxDataType,contentType:g.contentType,success:function(c){var d=0,l,p,r;g.log("Long poll complete.");u=0;try{l=g._parseResponse(c)}catch(n){m.handleParseFailure(b,c,n.message,t);return}null!==v.reconnectTimeoutId&&k();z();l&&(p=m.maximizePersistentResponse(l));m.processMessages(b,l);h&&0<h.longPollDelay?
d=h.longPollDelay:p&&"number"===f.type(p.LongPollDelay)&&(d=p.LongPollDelay);p&&p.Disconnect||!0===a(b)||((r=p&&p.ShouldReconnect)&&m.ensureReconnectingState(b),0<d?v.pollTimeoutId=e.setTimeout(function(){C(b,r)},d):C(b,r))},error:function(a,l){e.clearTimeout(v.reconnectTimeoutId);v.reconnectTimeoutId=null;"abort"===l?g.log("Aborted xhr requst."):t()||(u++,g.state!==c.connectionState.reconnecting&&(g.log("An error occurred using longPolling. Status = "+l+".  Response = "+a.responseText+"."),f(b).triggerHandler(d.onError,
[a.responseText])),(g.state!==c.connectionState.connected&&g.state!==c.connectionState.reconnecting||m.verifyLastActive(g))&&m.ensureReconnectingState(b)&&(v.pollTimeoutId=e.setTimeout(function(){r.init(b,function(){C(b,!0)})},r.reconnectDelay)))}})),p&&!0===l&&(v.reconnectTimeoutId=e.setTimeout(function(){k(b)},Math.min(1E3*(Math.pow(2,u)-1),36E5))))})(g);e.setTimeout(function(){z()},250)},250)})},lostConnection:function(a){throw Error("Lost Connection not handled for LongPolling");},send:function(a,
b){m.ajaxSend(a,b)},stop:function(a){e.clearTimeout(a._.pollTimeoutId);e.clearTimeout(a._.reconnectTimeoutId);delete a._.pollTimeoutId;delete a._.reconnectTimeoutId;a.pollXhr&&(a.pollXhr.abort(),a.pollXhr=null,delete a.pollXhr)},abort:function(a,b){m.ajaxAbort(a,b)}}}}},jQuery,window);s("module.sockets",["module.sockets.configurableLongPolling"],function(f,e,q,k){function n(){return q.navigator.userAgent.match(/(iPod|iPhone|iPad)/)&&q.navigator.userAgent.match(/AppleWebKit/)}var h={},c=null,d;d=n()?
["longPolling","foreverFrame"]:["serverSentEvents","longPolling","foreverFrame"];var b=0,a=!1,m=0,g=null,p=0,l=function(a){p++;12<p||(clearTimeout(m),m=setTimeout(function(){a.start({transport:d});clearTimeout(m)},5E3))},r=function(a,b,c){if(a=h[a+"|"+b]){var d=c&&0<c.length?e.parseJSON(c):null;e.each(a,function(a,b){try{b(d)}catch(c){}})}},z=function(m){e.connection&&(f.configure({longPollDelay:n()?5E3:0}),e.each(m.sockets,function(a,d){z[d.name]={on:function(a,b){var c=d.fullName+"|"+a;h[c]=h[c]||
[];h[c].push(b)},off:function(a){delete h[d.fullName+"|"+a]},send:function(a,g){if(b==e.signalR.connectionState.connected){var l=e.telligent.evolution.url.serializeQuery(e.extend(g,{_s:d.fullName,_m:a}));c.send(l)}}}}),e.ajaxPrefilter(function(a,b,c){0===a.url.indexOf(m.endpoint)&&e.telligent.evolution.writeAuthorizationHeader(c)}),0<m.sockets.length&&(c=e.connection(m.endpoint),c.received(function(a){a=e.telligent.evolution.url.parseQuery(a);r(a._s,a._m,a._d)}),c.error(function(a){b=e.signalR.connectionState.disconnected;
c.stop()}),c.stateChanged(function(a){b=a.newState;b==e.signalR.connectionState.disconnected&&l(c)}),c.disconnected(function(){}),c.reconnected(function(){b=e.signalR.connectionState.connected}),c.start({transport:d,callback:function(){a||(a=!0,e.telligent.evolution.messaging.publish("socket.connected"));clearInterval(g);g=setInterval(function(){b==e.signalR.connectionState.connected&&c.send("_KEEP_ALIVE")},6E4);p=0}})))};e.telligent=e.telligent||{};e.telligent.evolution=e.telligent.evolution||{};
e.telligent.evolution.sockets=e.telligent.evolution.sockets||z;return{}},jQuery,window);s("module.template",function(f,e,q){var k={},n={open:"<%",close:"%>"},h=function(c,b){var a=f.extend({},n,b||{}),m=RegExp("\\"+a.open+"=([\\s\\S]+?)"+a.close,"g"),g=RegExp("\\"+a.open+":([\\s\\S]+?)"+a.close,"g"),a=RegExp("\\"+a.open+"(.*?)"+a.close,"g"),m=" var source = [];  with(data){with(extraHelpers){with(defaultHelpers){  source.push('"+c.replace(/[\r\n]/g,"").replace(m,"'); source.push(String($1)); source.push('").replace(g,
"'); source.push(escape(String($1))); source.push('").replace(a,"'); $1 source.push('")+"');  }}}  return source.join('');",g=new Function("defaultHelpers","extraHelpers","data",m);g.compiledSource="function(defaultHelpers, extraHelpers, data) { "+m+" } ";return g},c={compile:function(d,b,a){var m=k[d];if("undefined"===typeof m){var g=null!==document.getElementById(d)?document.getElementById(d).innerHTML:d,p=h(g,a);k[d]=m=function(a){return p.call(this,c.helpers||{},b||{},a||{})};m.source={raw:g,
compiled:p.compiledSource}}return m},helpers:{foreach:function(c,b){if(c&&0<c.length&&b)for(var a=0;a<c.length;a++)b(c[a],a)},escape:function(c){var b=/&/g,a=/</g,m=/>/g,g=/\"/g;return function(c){return c.replace(b,"&amp;").replace(a,"&lt;").replace(m,"&gt;").replace(g,"&quot;")}}()}};f.telligent=f.telligent||{};f.telligent.evolution=f.telligent.evolution||{};f.telligent.evolution.template=c;return{}},jQuery,window);s("module.tourtips",["module.configuration"],function(f,e,q,k){function n(){function a(b){return e.telligent.evolution.user.accessing.id+
":"+b}function b(a){return"tourtip_:"+a}var c=e.telligent.evolution.user.accessing.isSystemAccount?q.sessionStorage:q.localStorage;return{get:function(d){if(c)return JSON.parse(c.getItem(b(a(d))))},set:function(d,g){c&&c.setItem(b(a(d)),JSON.stringify(g))},remove:function(d){c&&c.removeItem(b(a(d)))}}}function h(){p&&(q.clearTimeout(a),a=q.setTimeout(h,g));var m=[],r=[];e.each(b,function(a,b){var c=l.get(b.key);c&&!c.read?m.push(b):c||r.push(b)});b.length=0;if(0<r.length)if(e.telligent.evolution.user.accessing.isSystemAccount)e.each(r,
function(a,b){m.push(b)}),c(m);else{var f={},u=[];e.each(r,function(a,b){u.push(b.key);f[b.key]=b});p=!0;d.list(u).then(function(a){p=!1;e.each(a.TourTips,function(a,b){l.set(b.Key,{read:b.Read});if(!b.Read){var c=f[b.Key];c&&m.push(c)}});c(m)})}else c(m)}function c(a){l=l||n();var b=l.get(r);b&&0<b&&b>(new Date).getTime()||(a=a.sort(function(a,b){return a.index-b.index}),e.telligent.evolution.messaging.publish("ui.tourtips",{tips:a}))}var d={mark:function(a,b){return(b?e.telligent.evolution.post:
e.telligent.evolution.del)({url:e.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/tourtips/{key}.json?IncludeFields=Key,Read",data:{key:a}})},list:function(a){return e.telligent.evolution.get({url:e.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/tourtips.json?IncludeFields=Key,Read",data:{Keys:a.join(",")}})}},b=[],a,m=0,g=1E3,p=!1,l,r="suppressUntil";e.telligent=e.telligent||{};e.telligent.evolution=e.telligent.evolution||{};e.telligent.evolution.tourTips={register:function(c){l=l||n();c&&
(c.index==k&&(c.index=m++),b.push(c),q.clearTimeout(a),a=q.setTimeout(h,g))},mark:function(a,b){l.set(a,{read:b});return e.telligent.evolution.user.accessing.isSystemAccount?e.Deferred(function(a){a.resolve()}).promise():d.mark(a,b)},suppress:function(a){l=l||n();a&&0<a?l.set(r,(new Date).getTime()+a):l.remove(r)}};return{}},jQuery,window);s("module.ui",["lib.util"],function(f,e,q,k){var n={};parseData=function(f){f=f.get(0);for(var c={},d=0;d<f.attributes.length;d++){var b=f.attributes[d];if(0===
b.name.indexOf("data-")){var a=b.name.substring(5);c[a]="configuration"===a?e.telligent.evolution.url.parseQuery(b.value):b.value}}return c};api={components:{},render:function(f){f=e(f||document);for(var c in api.components){var d=api.components[c],b=e(".ui-"+c,f);f.hasClass(".ui-"+c)&&b.add(f);b&&(0<b.length&&"undefined"!==typeof d.setup&&!n[c])&&(d.setup.call(this),n[c]=!0);b&&(0<b.length&&"undefined"!==typeof d.add)&&b.each(function(){var a=e(this);a.data("_telligent_evolution_ui_render_add."+
c)||(d.add.call(a,a,api.data(a)),a.data("_telligent_evolution_ui_render_add."+c,!0))})}},data:function(f){if(!f)return{};f=e(f);var c=f.data("_telligent_evolution_ui_data");if(null===c||"undefined"===typeof c)c=parseData(f),f.data("_telligent_evolution_ui_data",c);return c}};e.telligent||(e.telligent={});e.telligent.evolution||(e.telligent.evolution={});e.telligent.evolution.ui=api;e.each(["html","append","prepend"],function(h,c){e.fn[c]=f.wrap(e.fn[c],{after:function(){e.telligent.evolution.ui.render(this)}})});
e.each(["after","before"],function(h,c){e.fn[c]=f.wrap(e.fn[c],{after:function(){e.telligent.evolution.ui.render(this.parent())}})});return api},jQuery,window);s("module.url",function(f,e,q){var k=null,n=function(c,b,a,m,g){if(!c)return c;var p=/(?:\.config|\.ascx|\.asax|\.cs|\.vb)$/i.test(c);return c.replace(b,function(b,r,e){if(" "==b)return a;if("."!=b||p||e==c.length-1||"."==c.substr(e+1,1)){r=[];r[r.length]=g;for(e=0;e<b.length;e++){var f=b.charCodeAt(e).toString(16)+"",h=f.length;4==h?(r.push(f.substr(2,
2).toUpperCase()),r.push(f.substr(0,2).toUpperCase())):3==h?(r.push(f.substr(1,2).toUpperCase()),r.push("0"),r.push(f.substr(0,1).toUpperCase())):2==h&&(r.push(f.toUpperCase()),r.push("00"))}r[r.length]=g;return r.join("")}return m})},h=function(c,b,a,m){return c?c.replace(b,function(b,c,d){if(1==b.length){if(b==a)return" ";if(b==m)return"."}else{b=b.substr(1,b.length-2);if(0!=b.length%4)return"";c=[];for(d=0;d<b.length;d+=4)c[c.length]=String.fromCharCode(parseInt(b.substr(d+2,2)+b.substr(d,2),16));
return c.join("")}}):c},c={parseQuery:function(c){var b=c.split("?"),a={};c=(1<b.length?b[1]:c).split("#")[0].split("&");f.each(c,function(b,c){c=c.split("=");2===c.length&&(a[c[0]]=decodeURIComponent(c[1].replace(/\+/gi," ")))});return a},serializeQuery:function(c){c=c||{};var b=[];f.each(c,function(a,c){b[b.length]=encodeURIComponent(a)+"="+encodeURIComponent(c)});return b.join("&")},modify:function(d){d=f.extend({url:e.location.href,query:null,hash:e.location.hash,protocol:e.location.protocol},
d);var b=[d.url.split("?")[0].split("#")[0]],a;"string"===typeof d.query&&(d.query=c.parseQuery(d.query));(a=c.serializeQuery(f.extend(c.parseQuery(d.url),d.query)))&&0<a.length&&(b[b.length]="?"+a);d.hash&&0<d.hash.length&&(b[b.length]=(0!==d.hash.indexOf("#")?"#":"")+d.hash);return b.join("")},hashData:function(d,b){var a=!1,m="";f.isPlainObject(b)?(a=b.overrideCurrent,m=b.prefix||""):a=b;if(m){var g={},p;for(p in d)g[m+p]=d[p];d=g}if("undefined"===typeof d){d={};var a=e.location.href.split("#"),
l="";2<a.length&&(f.each(a,function(a,b){0<a&&(1<a&&(l+="#"),l+=b)}),a=[a[0],l]);2===a.length&&(d=c.parseQuery(a[1]));return d}a||(d=f.extend(c.hashData(),d));e.location.href=e.location.href.split("#")[0]+"#"+c.serializeQuery(d)},encode:function(c){return encodeURIComponent(c)},decode:function(c){return decodeURIComponent(c)},encodePathComponent:function(c){return n(c,/([^A-Za-z0-9 \.]+|\.| )/g,"+","-","_")},decodePathComponent:function(c){return h(c,/((?:_(?:[0-9a-f][0-9a-f][0-9a-f][0-9a-f])+_)|\-|\+)/ig,
"+","-")},encodeFileComponent:function(c){return n(c,/([^A-Za-z0-9 \.]+|\.| )/g,"-",".","_")},decodeFileComponent:function(c){return h(c,/((?:_(?:[0-9a-f][0-9a-f][0-9a-f][0-9a-f])+_)|_|\-)/ig,"-",".")},navigateTo:function(c){var b=f("base");if(0<b.length){k||(k=f("<a></a>").css({position:"absolute",left:"-1000px"}),f("body").append(k));var a=k.attr({href:c})[0];try{e.document.createEvent?a.dispatchEvent(function(a){a.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null);return a}(document.createEvent("MouseEvents"))):
a.dispatchEvent(new MouseEvent("click",{view:e,bubbles:!0,cancelable:!0}))}catch(m){(b=b.attr("target"))?e.open(c,b):e.document.location=c}}else e.document.location=c}};f.telligent||(f.telligent={});f.telligent.evolution||(f.telligent.evolution={});f.telligent.evolution.url=c;return{}},jQuery,window);s("plugins","plugin.evolutionBookmark plugin.evolutionComposer plugin.evolutionHighlight plugin.evolutionInlineTagEditor plugin.evolutionLike plugin.evolutionModerate plugin.evolutionPager plugin.evolutionResize plugin.evolutionStarRating plugin.evolutionTagTextBox plugin.evolutionTheater plugin.evolutionToggleLink plugin.evolutionTransform plugin.evolutionUserFileTextBox plugin.validation plugin.evolutionTextEditor plugin.evolutionScrollSlider plugin.evolutionMasonry plugin.evolutionTip".split(" "),
function(){return{}});s("plugin.evolutionBookmark",function(f,e,q){var k=function(b){b.toggle=f("<a></a>").attr({href:"#"});b.element.append(b.toggle);b.toggle.evolutionToggleLink({onHtml:"<span></span>"+f.telligent.evolution.html.encode(n(b,b.settings.deleteBookmarkText)),offHtml:"<span></span>"+f.telligent.evolution.html.encode(n(b,b.settings.addBookmarkText)),processingHtml:"<span></span>"+f.telligent.evolution.html.encode(n(b,b.settings.processingText)),changeState:function(a){c(a,b)},onTitle:n(b,
b.settings.deleteBookmarkText),offTitle:n(b,b.settings.addBookmarkText),processingTitle:n(b,b.settings.processingText),onCssClass:b.settings.deleteBookmarkCssClass,offCssClass:b.settings.addBookmarkCssClass,processingCssClass:b.settings.processingCssClass,val:b.settings.initialState})},n=function(b,a){return a.replace(/\{content_type_name\}/gi,b.settings.contentTypeName)},h=function(b,a){f.telligent.evolution.messaging.publish("ui.bookmark",{contentId:b.settings.contentId,contentTypeId:b.settings.contentTypeId,
typeId:b.settings.typeId,bookmarked:a})},c=function(b,a){if(b)a.settings.onBookmark(a.settings.contentId,a.settings.contentTypeId,a.settings.typeId,function(){h(a,!0)});else a.settings.onUnbookmark(a.settings.contentId,a.settings.contentTypeId,a.settings.typeId,function(){h(a,!1)})},d=function(b){f.telligent.evolution.messaging.subscribe("ui.bookmark",function(a){a.contentId===b.settings.contentId&&a.contentTypeId===b.settings.contentTypeId&&a.typeId===b.settings.typeId&&b.toggle&&b.toggle.evolutionToggleLink("val",
a.bookmarked)})};f.fn.evolutionBookmark=function(b){var a=f.extend({},f.fn.evolutionBookmark.defaults,b||{});return this.each(function(){var b={element:f(this),toggle:null,settings:a};k(b);d(b)})};f.fn.evolutionBookmark.defaults={contentId:"",contentTypeId:"",typeId:"",initialState:!1,contentTypeName:"",onBookmark:function(b,a,c,d){},onUnbookmark:function(b,a,c,d){},deleteBookmarkText:"Unbookmark {content_type_name}",addBookmarkText:"Bookmark this {content_type_name}",processingText:"...",addBookmarkCssClass:"internal-link favorite-off",
deleteBookmarkCssClass:"internal-link favorite-on",processingCssClass:"internal-link processing"};return{}},jQuery,window);s("plugin.evolutionComposer",["events.textinput"],function(f,e,q,k){var n=function(a,b){a=e(a);var c=a.data("__COMPOSER_CONTEXT");!c&&b&&(c=h(a,b),a.data("__COMPOSER_CONTEXT",c));return c},h=function(a,b){var g=e.extend({},e.fn.evolutionComposer.defaults,b||{}),g={input:a,settings:g,plugins:e.map(g.plugins,function(a){return"string"==typeof a?e.fn.evolutionComposer.plugins[a]:
a}),ranges:[],activePlugin:!1};g.pluginContext=c(g);g.input.evolutionHighlight();d(g);return g},c=function(a){return{settings:a.settings,input:a.input,data:function(b,c){return"undefined"!==typeof c?a.input.data(b,c):a.input.data(b)},val:function(b){return"undefined"!==typeof b?a.input.val(b):a.input.val()},release:function(){a.activePlugin.onDeactivate&&a.activePlugin.onDeactivate.call(a.input,a.pluginContext);a.activePlugin=!1},caretPosition:function(){return l(a.input)},currentWord:function(b){b=
e.extend({allowedWhiteSpaceBeforeCaret:0,allowedWhiteSpaceAfterCaret:0},b||{});var c=b.caretPosition||l(a.input),d="",m=e(a.input).val(),r="",f=0,h=c,z=0;if(c<m.length&&"\n"!==m[c]&&"\t"!==m[c]){r=m.substring(c);f=g(r);0>f&&(f=r.indexOf("\n"));0>f&&(f=r.indexOf("\t"));0>f&&(f=r.length);for(z=0;z<b.allowedWhiteSpaceAfterCaret;z++)if(0<f){var k=m.substring(c+f+1);nextWhiteSpaceIndex=g(k);nextWhiteSpaceIndex=-1===nextWhiteSpaceIndex?k.length:nextWhiteSpaceIndex;if(0<nextWhiteSpaceIndex)f+=nextWhiteSpaceIndex+
1;else break}0<f&&(h=0,d+=r.substring(0,f))}if(0<c&&"\n"!==m[c-1]&&"\t"!==m[c-1]){r=m.substring(0,c);f=p(r);for(z=0;z<b.allowedWhiteSpaceBeforeCaret;z++)if(0<f)if(c=p(m.substring(0,f)),c!==f)f=c;else break;f===r.length&&(f=r.lastIndexOf("\n"));f===r.length&&(f=r.lastIndexOf("\t"));f===r.length&&(f=r.length-1);f<r.length-1&&(h=f+1,d=r.substring(h)+d)}if(b.additionalWhiteSpaceSymbols)for(z=0;z<d.length;z++)if(-1==e.inArray(d[z],b.additionalWhiteSpaceSymbols)){d=d.substring(z);h+=z;break}return{value:d,
start:h,stop:h+d.length}},replace:function(b,c,d){var g=a.input.val();a.input.val(g.substring(0,b)+d+g.substring(c))},clearHighlights:function(b){var c=[];e.each(a.ranges,function(a,d){b&&d.className===b||c.push(d)});a.ranges=c;a.input.evolutionHighlight({ranges:a.ranges})},addHighlight:function(b){a.ranges.push(b)},renderHighlights:function(){a.input.evolutionHighlight({ranges:a.ranges})}}},d=function(c){c.input.bind({keypress:function(a){b(c,"onkeypress",a)},keydown:function(a){b(c,"onkeydown",
a)},textinput:function(d){a(c,d);b(c,"oninput",d);m(c,!1)}})},b=function(a,b,c){var d=!0;a.activePlugin&&a.activePlugin[b]&&(d=a.activePlugin[b].call(c.target,a.pluginContext,c));d?a[b]&&((d=a[b].call(c.target,c))||c.preventDefault()):c.preventDefault()},a=function(a,b){a.activePlugin||e.each(a.plugins,function(b,c){if(c.shouldActivate&&!0===c.shouldActivate.call(a.input,a.pluginContext))return a.activePlugin=c,c.onActivate&&c.onActivate.call(a.input,a.pluginContext),!1})},m=function(a,b){e.each(a.plugins,
function(c,d){d.onTransform&&d.onTransform.call(a.input,a.pluginContext,b)})},g=function(a){var b=[];e.each([" ","\t","\n"],function(c,d){var g=a.indexOf(d);0<=g&&b.push(g)});b.sort();return 0<b.length?b[0]:-1},p=function(a){var b=[];e.each([" ","\t","\n"],function(c,d){var g=a.lastIndexOf(d);0<=g&&b.push(g)});b.sort();return 0<b.length?b[b.length-1]:-1},l=function(a){a=a.get(0);if(a.selectionStart)return a.selectionStart;if(document.selection){var b=document.selection.createRange();if(null===b)return 0;
a=a.createTextRange();var c=a.duplicate();a.moveToBookmark(b.getBookmark());c.setEndPoint("EndToStart",a);return c.text.length}return 0},r=function(a){"undefined"!==typeof e.fn.evolutionResize&&a.input.evolutionResize().bind("evolutionResize",function(){a.input.evolutionHighlight("resize",a.input.width(),a.input.height())})},z={init:function(a){return this.filter("textarea").each(function(){var b=e(this),c=n(b,a);r(c);c.input.evolutionHighlight("resize",c.input.width(),c.input.height());if(null!==
c){e.each(c.plugins,function(a,d){d.init&&d.init.call(b,c.pluginContext)});c.settings.focus&&setTimeout(function(){b.focus()},10);var d=e.trim(c.input.val());0<d.length&&z.val.call(c.input,d)}})},val:function(a){if("undefined"!==typeof a){var b=n(this);b&&(b.input.val(a),m(b,!0),b.input.trigger("input"))}else{var b=n(this),c="";b&&(c=b.input.val(),e.each(b.plugins,function(a,d){d.val&&(c=d.val.call(b.input,c,b.pluginContext))}));return c}return this},onkeydown:function(a){var b=n(this);b&&(b.onkeydown=
a);return this},oninput:function(a){var b=n(this);b&&(b.oninput=a);return this},resize:function(a,b){var c=n(this);c&&c.input.evolutionHighlight("resize",a,b);return this}};e.fn.evolutionComposer=function(a){if(z[a])return z[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof a&&a)e.error("Method "+a+" does not exist on jQuery.evolutionComposer");else return z.init.apply(this,arguments)};e.fn.evolutionComposer.defaults={plugins:[],focus:!0};e.fn.evolutionComposer.plugins={};
return{}},jQuery,window);s("plugin.evolutionHighlight",function(f,e,q){var k=function(a,b){var c=a.data("_HIGHLIGHTER_CONTEXT");if("undefined"===typeof c||null===c)c={selection:a.filter("textarea"),settings:f.extend({},f.fn.evolutionHighlight.defaults,b||{})},n(c),a.data("_HIGHLIGHTER_CONTEXT",c);return c},n=function(a){a.wrapper=f("<div></div>");a.mirror=f("<div></div>");var b={position:"relative",width:a.selection.outerWidth(),height:a.selection.outerHeight()};f.each(["margin-left","margin-right",
"margin-top","margin-bottom"],function(c,d){b[d]=a.selection.css(d);a.selection.css(d,0)});var c={position:"absolute",top:"0px",left:"0px",zIndex:"0",borderTopColor:"transparent",borderBottomColor:"transparent",borderLeftColor:"transparent",borderRightColor:"transparent",backgroundColor:a.selection.css("backgroundColor"),color:"transparent",width:a.selection.width(),height:a.selection.height(),overflow:"hidden",whiteSpace:"normal"};f.each(a.settings.styles,function(b,d){c[d]=a.selection.css(d)});
var d={position:"absolute",top:"0px",left:"0px",zIndex:"1",backgroundColor:"transparent",width:a.selection.width(),height:a.selection.height()};a.wrapper.css(b).addClass("highlighter");a.mirror.css(c);a.selection.css(d);a.mirror.css("color",a.mirror.css("background-color"));a.selection.before(a.wrapper);a.wrapper.append(a.selection);a.wrapper.append(a.mirror)},h=/\s\s/gi,c=/\n/gi,d=function(a){var b={};f.each(a.settings.ranges,function(a,c){b[c.start]=b[c.start]||[];b[c.start].push(c);b[c.stop]=b[c.stop]||
[];b[c.stop].push(c)});var d=f.telligent.evolution.html.encode(a.selection.val());newValue=[];for(var p=spanDepth=0;p<d.length;p++)"undefined"!==typeof b[p]&&f.each(b[p],function(a,b){b.start===p?(newValue[newValue.length]='<span class="'+b.className+'" style="white-space:normal;">',spanDepth++):(newValue[newValue.length]="</span>",spanDepth--)}),newValue[newValue.length]=d.charAt(p);0<spanDepth&&(newValue[newValue.length]="</span>");var d=newValue.join("").replace(c,"<br />").replace(h,"&nbsp; "),
l=document.createElement("span");l.innerHTML=d;a.mirror.empty().get(0).appendChild(l)},b={init:function(a){var b=k(this,a);b.settings=f.extend({},f.fn.evolutionHighlight.defaults,a||{});d(b);return this},clear:function(){var a=k(this,null);if(null!==a)return a.mirror.html(""),this},resize:function(a,b){var c=k(this,null);if(null!==c){var d={width:a,height:b};c.mirror.css(d);c.selection.css(d);c.wrapper.css({width:c.selection.outerWidth(),height:c.selection.outerHeight()});return this}},css:function(a){var b=
k(this,null);if(null!==b)return b.wrapper.css(a),this}};f.fn.evolutionHighlight=function(a){if(b[a])return b[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof a&&a)f.error("Method "+a+" does not exist on jQuery.evolutionHighlight");else return b.init.apply(this,arguments)};f.fn.evolutionHighlight.defaults={ranges:[],styles:"border-top-width border-top-style border-bottom-width border-bottom-style border-right-width border-right-width-value border-right-style border-right-style-value border-left-width border-left-width-value border-left-style border-left-style-value font-family font-size font-size-adjust font-stretch font-style font-variant font-weight padding-bottom padding-left padding-right padding-top letter-spacing line-height text-align text-indent word-spacing".split(" ")};
return{}},jQuery,window);s("plugin.evolutionInlineTagEditor",function(f,e,q){var k={},n=function(c,b){if(c.internal.isInitialized){for(var a=b.split(/[,;]/g),m=[],g=0;g<a.length;g++){var p=f.trim(a[g]);p&&(m[m.length]=p)}c.settings.onSave(m,function(){c.settings.currentTags=m})}},h=function(d){return this.each(function(){var b={settings:f.extend({},f.fn.evolutionInlineTagEditor.defaults,d||{}),internal:{state:f(this)}};f(this).data("evolutionTagInlineEditor_context",b);f(this).html()||f(this).text(b.settings.editButtonText);
c(b)})},c=function(c){var b=f("<div></div>").addClass(c.settings.editorCssClass).attr("style","display: none;"),a=f('<label for="tag-area"></label>').hide(),m=f('<textarea id="tag-area"></textarea>').attr("cols","40").attr("rows","2");if(c.settings.allTags&&0<c.settings.allTags.length)var g=f('<input type="button" />').val(c.settings.selectTagsText);var p=f('<input type="button" />').val(c.settings.saveTagsText),l=f('<input type="button" />').val(c.settings.cancelText),r=f('<div style="white-space: nowrap; padding-top: 4px;"><table width="100%" cellspacing="0" cellpadding="0" border="0"><tbody><td align="left"></td><td align="right"></td></tr></tbody></table></div>');
r.find("td:eq(1)").append(p);r.find("td:eq(1)").append(l);g&&r.find("td:first").append(g);b.append(a);b.append(m);b.append(r);m.evolutionTagTextBox({allTags:c.settings.allTags});b.glowPopUpPanel({cssClass:c.settings.editorCssClass,position:"updown",zIndex:500,hideOnDocumentClick:!1});f(c.internal.state).bind("click.evolutionInlineTagEditor",function(a){b.glowPopUpPanel("hide").glowPopUpPanel("show",f(this));m.val(0<c.settings.currentTags.length?c.settings.currentTags.join(", "):"");return!1});p.bind("click.evolutionInlineTagEditor",
function(a){n(c,m.attr("value"));b.glowPopUpPanel("hide");return!1});l.bind("click.evolutionInlineTagEditor",function(a){b.glowPopUpPanel("hide");return!1});g&&g.bind("click.evolutionInlineTagEditor",function(a){m.evolutionTagTextBox("openTagSelector");return!1});c.internal.state.after(b);c.internal.isInitialized=!0};f.fn.evolutionInlineTagEditor=function(c){if(c in k)return k[c].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof c&&c)f.error("Method "+c+" does not exist on jQuery.fn.evolutionInlineTagEditor");
else return h.apply(this,arguments)};f.extend(f.fn.evolutionInlineTagEditor,{defaults:{allTags:[""],currentTags:[""],editorCssClass:"tags-editor",editButtonText:"Edit",selectTagsText:"Select Tags",saveTagsText:"Save",cancelText:"Cancel",onSave:function(c,b){}}});return{}},jQuery,window);s("plugin.evolutionLike",function(f,e,q){var k=!1,n=function(b){var a=b.settings.format;b.hasCount&&(a=a.replace(/\{count\}/gi,'<span class="like-count who-likes"></span>'));b.hasToggle&&(a=a.replace(/\{toggle\}/gi,
'<span class="like-toggle"><a href="#" class="internal-link"></a></span>'));b.hasMessage&&(a=a.replace(/\{message\}/gi,'<span class="like-message"></span>'));b.element.html(a);b.hasCount&&(b.countWrapper=b.element.find("span.like-count"),b.countWrapper.html(b.settings.initialCount),b.countWrapper.attr("data-count",b.settings.initialCount));b.hasToggle&&(b.toggleLink=b.element.find("span.like-toggle a"),b.toggleLink.evolutionToggleLink({onHtml:"<span></span>"+b.settings.unlikeText,offHtml:"<span></span>"+
b.settings.likeText,onTitle:"",offTitle:"",processingHtml:"<span></span>...",changeState:function(a){c(a,b)},onCssClass:"internal-link like-on",offCssClass:"internal-link like-off",processingCssClass:"internal-link processing",val:"true"===b.settings.initialState}));b.hasMessage&&(b.messageWrapper=b.element.find("span.like-message"),b.messageWrapper.html(b.settings.initialMessage))},h=function(b,a,c){var d="";if(0<a.count){var p=0;c?1===a.count?d=b.settings.whoLikesAccessingText:2===a.count?(d=b.settings.whoLikesAccessingTwoText,
p=-1):2<a.count&&(d=b.settings.whoLikesAccessingMultipleText,p=-1):1===a.count?d=b.settings.whoLikesOtherText:2===a.count?(p=-1,d=b.settings.whoLikesOtherTwoText):2<a.count&&(p=-1,d=b.settings.whoLikesOtherMultipleText);d=d.replace(/\{count\}/gi,a.count+p);d=d.replace(/\{user_profile_url\}/gi,a.latestLike.User.ProfileUrl);d=d.replace(/\{user_display_name\}/gi,a.latestLike.User.DisplayName)}f.telligent.evolution.messaging.publish("ui.like",{contentId:b.settings.contentId,contentTypeId:b.settings.contentTypeId,
typeId:b.settings.typeId,count:a.count,liked:c,message:d})},c=function(b,a){if(b)a.settings.onLike(a.settings.contentId,a.settings.contentTypeId,a.settings.typeId,function(b){h(a,b,!0)});else a.settings.onUnlike(a.settings.contentId,a.settings.contentTypeId,a.settings.typeId,function(b){h(a,b,!1)})},d=function(b){f.telligent.evolution.messaging.subscribe("ui.like",function(a){a.contentId===b.settings.contentId&&(a.contentTypeId===b.settings.contentTypeId&&a.typeId===b.settings.typeId)&&(b.hasToggle&&
b.toggleLink.evolutionToggleLink("val",a.liked),b.hasCount&&(b.countWrapper.html(a.count),b.countWrapper.attr("data-count",a.count)),b.hasMessage&&b.messageWrapper.html(a.message))})};f.fn.evolutionLike=function(b){var a=f.extend({},f.fn.evolutionLike.defaults,b||{});return this.each(function(){var b={element:f(this),settings:a,hasCount:0<=a.format.indexOf("{count}"),hasToggle:0<=a.format.indexOf("{toggle}"),hasMessage:0<=a.format.indexOf("{message}")};n(b);d(b)})};f.fn.evolutionLike.delegatePopups=
function(b){if(!k){k=!0;var a=f.extend({},f.fn.evolutionLike.defaults,b||{}),c=f.telligent.evolution.template.compile(a.likersTemplate),d=f.telligent.evolution.template.compile(a.likersPopupTemplate),p=function(b,c,d){a.onList(b.contentId,b.contentTypeId,b.typeId,function(a){d(a)},b.pageSize,c)},l=function(b,l){var e=0,h=f(c(b)),u=f(d({likers:h,hasMorePages:b.hasMorePages,showMoreText:a.modalShowMoreText})),k=u.find("ul"),w=u.find(".show-more"),n=a.onOptions(f(l).closest(a.delegatedSelector));k.html(h);
w.on("click",function(a){a.preventDefault();e++;p(n,e,function(a){k.append(c(a));a.hasMorePages?w.show():w.hide();k.scrollTop(k[0].scrollHeight)})});f.glowModal({title:a.modalTitleText,html:u,width:450,height:"100%"})};(function(){f(a.containerSelector).on("click",a.delegatedSelector+" .who-likes",function(b){var c=f(this);b=a.onOptions(f(c).closest(a.delegatedSelector));p(b,0,function(a){l(a,c)})})})()}};f.fn.evolutionLike.defaults={contentId:"",contentTypeId:"",typeId:"",initialState:!1,initialMessage:"",
initialCount:0,format:"",onLike:function(b,a,c,d){},onUnlike:function(b,a,c,d){},likeText:"Like",unlikeText:"Unlike",whoLikesOtherText:'<a href="{user_profile_url}" class="internal-link view-user-profile">{user_display_name}</a> likes this',whoLikesOtherTwoText:'<a href="{user_profile_url}" class="internal-link view-user-profile">{user_display_name}</a> <span class="who-likes">and 1 other</span> like this.',whoLikesOtherMultipleText:'<a href="{user_profile_url}" class="internal-link view-user-profile">{user_display_name}</a> and <span class="who-likes">{count} others</span> like this.',
whoLikesAccessingText:"You like this",whoLikesAccessingTwoText:'You and <span class="who-likes">1 other</span> like this',whoLikesAccessingMultipleText:'You and <span class="who-likes">{count} others</span> like this',modalTitleText:"People who like this",modalShowMoreText:"Show more",onList:function(b,a,c,d){},onOptions:function(b){},containerSelector:"",delegatedSelector:"",delay:500,likersTemplate:' <% foreach(likers, function(liker) { %>      <li class="content-item">          <div class="full-post-header"></div>          <div class="full-post">              <span class="avatar">                  <a href="<%: liker.profileUrl %>"  class="internal-link view-user-profile">                      <% if(liker.avatarHtml) { %>                          <%= liker.avatarHtml %>                      <% } else { %>                          <img src="<%: liker.avatarUrl %>" alt="" border="0" width="32" height="32" style="width:32px;height:32px" />                      <% } %>                  </a>              </span>              <span class="user-name">                  <a href="<%: liker.profileUrl %>" class="internal-link view-user-profile"><%= liker.displayName %></a>              </span>          </div>          <div class="full-post-footer"></div>      </li>  <% }); %> ',
likersPopupTemplate:' <div class="who-likes-list">      <div class="content-list-header"></div>      <ul class="content-list"><%= likers %></ul>      <div class="content-list-footer"></div>      <% if(hasMorePages) { %>          <a href="#" class="show-more"><%= showMoreText %></a>     <% } %>  </div> '};return{}},jQuery,window);s("plugin.evolutionMasonry",["lib.util"],function(f,e,q,k){function n(a){function b(d){a.length<=d?c.resolve():a[d]().done(function(){b(d+1)}).fail(function(){c.reject()})}
var c;c=e.Deferred();b(0);return c.promise()}function h(a){return e(document.createElement("div")).html("&nbsp;").addClass(a.columnClass).css({"float":"left",minHeight:"1px",overflow:"hidden"})}function c(a){for(var b=0;b<a.columns.length;b++)e(a.columns[b]).empty()}function d(a){for(var b=null,c=null,d=0;d<a.columns.length;d++)if(null===b||null===c)b=a.columns[d],c=a.columns[d].height();else{var g=a.columns[d].height();g<c&&(b=a.columns[d],c=g)}return b}function b(a,b){var g;b?g=b:(g=a.children,
c(a));n(e.map(g,function(b){return function(){return e.Deferred(function(c){var g=d(a);if(g){var p=g.height();a.animate?e(b).appendTo(g).css({opacity:0.01}).evolutionTransform({opacity:0.99},{duration:a.animationDuration}):g.append(b);var m=setInterval(function(){g.height()-p>a.threshold&&(clearInterval(m),clearTimeout(r),c.resolve())},5),r=setTimeout(function(){clearInterval(m);clearTimeout(r);c.resolve()},500)}else c.reject()}).promise()}}))}function a(a,c){c&&a.children.detach();a.container.empty();
a.columns=[];var d=0,g=0,p=h(a),m=!1;p.height(1200).appendTo(a.container);g=a.container.width();p.height(0).remove();for(var e=50;d<g&&0<e;){e--;var f=h(a);m?p.before(f):f.appendTo(a.container);d+=f.outerWidth(!0);d<=g?a.columns.push(f):f.remove();m||(p.appendTo(a.container),m=!0)}m&&p.remove();b(a)}function m(b){return this.each(function(){var c=e.extend({},e.fn.evolutionMasonry.defaults,b||{});c.container=e(this);c.children=c.container.children().detach();a(c);e(window).on("resized",function(){a(c,
!0)});c.container.data(g,c)})}var g="_evolutionMasonry_context",p={append:function(a){if(a&&0!=a.length){var c=e(a).filter("div");return this.each(function(){var a=e(this).data(g);a&&(a.children=a.children.add(c),b(a,c))})}}};e.fn.evolutionMasonry=function(a){if(a in p)return p[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof a&&a)e.error("Method "+a+" does not exist on jQuery.fn.evolutionMasonry");else return m.apply(this,arguments)};e.fn.evolutionMasonry.defaults={columnClass:"masonry-column",
animate:!0,animationDuration:150,threshold:35};return{}},jQuery,window);s("plugin.evolutionModerate",function(f,e,q){var k=f.telligent.evolution,n=function(c){c.settings.onReport(c.settings.contentId,c.settings.contentTypeId,function(d){k.messaging.publish("ui.reportabuse",{contentId:c.settings.contentId,contentTypeId:c.settings.contentTypeId});showNotification(c,d.Report)})},h=function(c){c.hideTimer&&(clearTimeout(c.hideTimer),c.hideTimer=null)};buildModerationLink=function(c){c.moderationLink=
f(k.template.compile(c.settings.moderationLinkTemplate)({linkClassName:c.settings.linkClassName,resources:{moderateLinkText:c.settings.moderateLinkText}})).appendTo(c.element)};buildModerationPopup=function(c){c.popup=f("<div></div>").glowPopUpPanel({cssClass:"content-moderation",position:"downleft",zIndex:1E3,hideOnDocumentClick:!0});c.popup.bind({glowPopUpPanelShown:function(d){c.moderationLink.addClass("open")},glowPopUpPanelHidden:function(d){c.moderationLink.removeClass("open")}})};buildModerationMenuContent=
function(c,d){c.settings.onGetAdditionalLinks(function(b){var a=[],a=c.settings.supportsAbuse?c.settings.initialState?b.concat([{href:"#",className:"evolutionModerateFlagged",text:c.settings.reportedLinkText}]):b.concat([{href:"#",className:"evolutionModerateFlag",text:c.settings.reportLinkText}]):b;b=f(k.template.compile(c.settings.moderationMenuTemplate)({links:a}));b.bind("mouseleave",function(a){hideMenu(c)});b.bind("mouseenter",function(a){h(c)});b.delegate("a","click",function(a){var b=f(a.target);
b.hasClass("evolutionModerateFlag")?(a.preventDefault(),n(c)):b.hasClass("evolutionModerateFlagged")?a.preventDefault():("#"===b.attr("href")&&a.preventDefault(),c.element.trigger("evolutionModerateLinkClicked",a.target))});d(b)})};showMenu=function(c){c.popup||buildModerationPopup(c);buildModerationMenuContent(c,function(d){h(c);c.popup.glowPopUpPanel("html",d).glowPopUpPanel("show",c.moderationLink)})};hideMenu=function(c){c.hideTimer||(c.hideTimer=setTimeout(function(){c.popup.glowPopUpPanel("hide");
c.hideTimer=null},200))};formatNotificationMessage=function(c,d){return c.settings.reportedNotificationMessageText.replace(/\{NAME\}/gi,d&&d.AuthorUser&&d.AuthorUser.DisplayName?d.AuthorUser.DisplayName:"")};showNotification=function(c,d){var b=k.template.compile(c.settings.notificationTemplate)({resources:{reportedNotificationMessageText:formatNotificationMessage(c,d),undoLinkText:c.settings.undoLinkText},contextId:c.contextId});k.notifications.show(b,{type:"moderation",duration:c.settings.notificationDuration,
cssClass:""})};handleFlagMessages=function(c){k.messaging.subscribe("ui.reportabuse",function(d){c.settings.contentId===d.contentId&&c.settings.contentTypeId===d.contentTypeId&&(c.settings.initialState=!0)})};init=function(c){buildModerationLink(c);c.moderationLink.bind({mouseenter:function(d){d.preventDefault();c.popup&&c.popup.glowPopUpPanel("isShown")?hideMenu(c):showMenu(c);h(c)},mouseleave:function(d){f(d.relatedTarget).is(".content-moderation")||0!==f(d.relatedTarget).closest(".content-moderation").length||
hideMenu(c)}});handleFlagMessages(c)};f.fn.evolutionModerate=function(c){var d=f.extend({},f.fn.evolutionModerate.defaults,c||{});return this.each(function(){var b={element:f(this),settings:d};init(b)})};f.fn.evolutionModerate.defaults={contentId:"",contentTypeId:"",initialState:!1,linkClassName:"",onReport:function(c,d,b){},onGetAdditionalLinks:function(c){c([])},notificationDuration:5E3,moderateLinkText:"moderate",supportsAbuse:!0,reportLinkText:"Flag as spam/abuse",reportedLinkText:"Flagged as spam/abuse",
reportedNotificationMessageText:"{NAME}'s post has been flagged. <strong>Thank you for your feedback.</strong>",undoLinkText:"Undo",moderationLinkTemplate:'<a href="#" class="<%: linkClassName %>"><span></span><%= resources.moderateLinkText %></a>',moderationMenuTemplate:'<ul class="navigation-list">   <% foreach(links, function(link){ %>       <li class="navigation-item">           <a href="<%: (link.href || "#") %>" class="<%: (link.className || "") %>"><%= link.text %></a>       </li>   <% }); %></ul>',
notificationTemplate:"<p><%= resources.reportedNotificationMessageText %></p>"};return{}},jQuery,window);s("plugin.evolutionPager",function(f,e,q){var k={},n={},h={},c=function(a){var b=[],c=a.settings,d=function(a){var b={};b[c.pageKey]=a;a={url:c.baseUrl,query:b};c.hash&&0<c.hash.length&&(a[c.hash]=c.hash);return f.telligent.evolution.url.modify(a)};0===c.totalItems||0===c.pageSize?a=0:(a=Math.floor(c.totalItems/c.pageSize),0<c.totalItems%c.pageSize&&(a+=1));if(1<a){c.showFirst&&3<=c.currentPage&&
a>c.numberOfPagesToDisplay&&(b[b.length]={type:"first",selected:!1,page:1,url:d(1)});c.showPrevious&&0<c.currentPage&&(b[b.length]={type:"previous",selected:!1,page:c.currentPage,url:d(c.currentPage)});if(c.showIndividualPages){var g;g=a<c.numberOfPagesToDisplay||0>c.currentPage-Math.floor(c.numberOfPagesToDisplay/2)?0:c.currentPage+Math.floor(c.numberOfPagesToDisplay/2)>=a?a-c.numberOfPagesToDisplay:c.currentPage-Math.floor(c.numberOfPagesToDisplay/2);var l;l=Math.floor(c.numberOfPagesToDisplay/
2);0===c.numberOfPagesToDisplay%2&&(l-=1);for(l=a<c.numberOfPagesToDisplay||c.currentPage+l>=a?a-1:0>c.currentPage-Math.floor(c.numberOfPagesToDisplay/2)?c.numberOfPagesToDisplay-1:c.currentPage+l;g<=l;g++)b[b.length]={type:"page",selected:c.currentPage===g,page:g+1,url:d(g+1)}}c.showNext&&c.currentPage+1<a&&(b[b.length]={type:"next",selected:!1,page:c.currentPage+2,url:d(c.currentPage+2)});c.showLast&&c.currentPage+3<a&&a>c.numberOfPagesToDisplay&&(b[b.length]={type:"last",selected:!1,page:a,url:d(a)})}return b},
d=function(a){var b=a.template({links:a.links});a.selection.html(b)},b=function(a){if(!a.settings.refreshOnAnyHashChange)return null;var b=f.telligent.evolution.url.hashData(),c=null,d;for(d in b)0==d.indexOf(a.settings.pageKey)&&(c=c||{},c[d.substr(a.settings.pageKey.length)]=b[d]);return c},a=function(a){var c=parseInt(f.telligent.evolution.url.hashData()[a.settings.pageKey],10),d=b(a);d&&(c=c||1);isNaN(c)||c===a.settings.currentPage||h[a.settings.pageKey]||(h[a.settings.pageKey]=!0,a.settings.onPage(c,
function(b){a.currentPageIndex=c;l(a,c,0,b,!1)},d||{}))},m=function(a){f(a.selection).delegate("a","click",function(b){b.preventDefault();b=f(this);var c={};c[a.settings.pageKey]=b.data("page");f.telligent.evolution.url.hashData(c)})},g=function(a){k[a.settings.pageKey]||(k[a.settings.pageKey]=!0,a.currentPageIndex=parseInt(f.telligent.evolution.url.hashData()[a.settings.pageKey],10),isNaN(a.currentPageIndex)&&(a.currentPageIndex=a.settings.currentPage),f(window).bind("hashchange",function(c){c=parseInt(f.telligent.evolution.url.hashData()[a.settings.pageKey],
10);if(b(a)||!isNaN(c)&&a.currentPageIndex!=c){a.newPageIndex=c;var d={currentPage:a.currentPageIndex||1,newPage:a.newPageIndex||1,container:a.settings.pagedContentContainer};f.telligent.evolution.messaging.publish(a.settings.pagedContentPagingEvent,d);a.selection.trigger("evolutionPagerPaging",d);a.currentPageIndex=c}}))},p=function(a){n[a.settings.pagedContentPagingEvent]&&(a.currentPageIndex=parseInt(f.telligent.evolution.url.hashData()[a.settings.pageKey],10),f.telligent.evolution.messaging.unsubscribe(n[a.settings.pagedContentPagingEvent]));
n[a.settings.pagedContentPagingEvent]=f.telligent.evolution.messaging.subscribe(a.settings.pagedContentPagingEvent,function(c){h[a.settings.pageKey]||(h[a.settings.pageKey]=!0,a.settings.onPage(c.newPage,function(b){a.currentPageIndex=c.newPage;l(a,c.newPage,c.currentPage,b,!0)},b(a)||{}))})},l=function(a,b,g,l,p){var m=function(){var c={page:b,container:a.settings.pagedContentContainer};f.telligent.evolution.messaging.publish(a.settings.pagedContentPagedEvent,c);a.selection.trigger("evolutionPagerPaged",
c)};!p||"slide"!==a.settings.transition&&"fade"!==a.settings.transition?(f(a.settings.pagedContentContainer).html(l),m(),h[a.settings.pageKey]=!1):(p="fade","slide"===a.settings.transition&&(p=b<g?"slideRight":"slideLeft"),g=f(a.settings.pagedContentContainer),l=f("<div></div>").attr("id",g.attr("id")).html(l).hide().insertAfter(a.settings.pagedContentContainer),g.glowTransition(l,{type:p,duration:a.settings.transitionDuration,complete:function(){f(a.settings.pagedContentContainer).css({width:"",
height:"",overflow:"hidden"});m();h[a.settings.pageKey]=!1}}));a.settings.currentPage=b-1;a.links=c(a);d(a)};f.fn.evolutionPager=function(b){b=f.extend({},f.fn.evolutionPager.defaults,b||{});var l={selection:this,settings:b,template:f.telligent.evolution.template.compile(b.template)};l.links=c(l);d(l);b.onPage&&(b.pagedContentContainer&&0<b.pagedContentContainer.length)&&(p(l),g(l),m(l),a(l));return this};f.fn.evolutionPager.defaults={currentPage:0,pageSize:10,totalItems:0,showPrevious:!1,showNext:!1,
showFirst:!0,showLast:!0,showIndividualPages:!0,numberOfPagesToDisplay:5,pageKey:"pi",hash:"",baseUrl:window.location.href,onPage:function(a,b){},pagedContentContainer:"",pagedContentPagingEvent:"ui.page.paging",pagedContentPagedEvent:"ui.page.paged",transition:null,transitionDuration:250,refreshOnAnyHashChange:!1,template:' <% foreach(links, function(link, i) { %>      <% if(link.type === "first") { %>          <a href="<%: link.url %>" class="first" data-type="first" data-page="<%= link.page %>" data-selected="false"><span>&#171;</span></a>      <% } else if(link.type === "previous") { %>          <a href="<%: link.url %>" class="previous" data-type="previous" data-page="<%= link.page %>" data-selected="false"><span>&#60;</span></a>     <% } else if(link.type === "page") { %>          <a href="<%: link.url %>" class="page<%= link.selected ? " selected" : "" %>" data-type="page" data-page="<%= link.page %>" data-selected="<%= link.selected ? "true" : "false" %>"><span><%= link.page %></span></a>      <% } else if(link.type === "next") { %>          <a href="<%: link.url %>" class="next" data-type="next" data-page="<%= link.page %>" data-selected="false"><span>&#62;</span></a>     <% } else if(link.type === "last") { %>          <a href="<%: link.url %>" class="last" data-type="last" data-page="<%= link.page %>" data-selected="false"><span>&#187;</span></a>      <% } %>      <% if(i < (links.length - 1)) { %>          <span class="separator"></span>      <% } %>  <% }); %> '};
return{}},jQuery,window);s("plugin.evolutionResize",function(f,e,q){function k(){if(!h){h=!0;var b=f("<textarea>test</textarea>").css({overflow:"hidden",resize:"none",visible:"none"}).appendTo("body");1>=Math.abs(b.prop("scrollHeight")-b.height())&&(n=0);b.remove()}}var n=null,h=!1,c=function(b){b.area.css({height:"auto"}).css({height:b.area.prop("scrollHeight")-(null===n?b.offset:n)});var a=b.area.outerHeight();a!==b.oldHeight&&(a>=b.maxHeight?b.area.css({overflow:"visible"}):b.area.css({overflow:"hidden"}),
b.area.trigger("evolutionResize",{newHeight:a,oldHeight:b.oldHeight}),b.oldHeight=a)},d=function(b){return parseInt(b.replace("px",""),10)};f.fn.evolutionResize=function(){k();return this.filter("textarea").each(function(){var b=f(this).css({resize:"none",overflow:"hidden"}),a={area:b,oldHeight:b.height(),maxHeight:d(b.css("max-height")),offset:b.innerHeight()!==b.height()?d(b.css("padding-top"))+d(b.css("padding-bottom")):0};b.bind("input keydown keyup",function(){c(a)});c(a)})};return{}},jQuery,
window);s("plugin.evolutionScrollSlider",function(f,e,q){var k=!1,n=function(c){var d=!1,b=function(){var a=c.document.height(),b=c.window.height(),d=c.window.scrollTop();return(a-d-b)/a};c.window.bind("scroll.evolutionScrollSlider",function(){d=!0});setInterval(function(){d&&(d=!1,!k&&1-b()>=c.revealAt?(k=!0,c.document.trigger("evolutionScrollSliderShow")):k&&1-b()<c.revealAt&&(k=!1,c.document.trigger("evolutionScrollSliderHide")))},c.bounceDelay)},h=function(c){var d=f("<div></div>").hide().addClass(c.className).css({width:c.width,
minHeight:c.height,maxHeight:0.7*c.window.height(),position:"fixed",bottom:c.offsetBottom,right:"0px"}).appendTo("body"),b=function(){c.load(function(a){a&&(d.html(a),d.css({right:-d.width()}).show().animate({right:c.offsetRight},{duration:c.animationDuration}))})},a=function(){d.animate({right:-d.width()},{duration:c.animationDuration,complete:function(){d.hide()}})};c.document.on("evolutionScrollSliderShow.evolutionScrollSlider",function(){b()}).on("evolutionScrollSliderHide.evolutionScrollSlider",
function(){a()})};f.evolutionScrollSlider=function(c){c=f.extend({},f.evolutionScrollSlider.defaults,c||{},{window:f(window),document:f(document)});c.document.unbind(".evolutionScrollSlider");c.window.unbind(".evolutionScrollSlider");n(c);h(c)};f.evolutionScrollSlider.hide=function(){f(document).trigger("evolutionScrollSliderHide")};f.evolutionScrollSlider.defaults={load:function(c){c(null)},width:400,height:75,className:"slider-content",animationDuration:250,offsetBottom:25,offsetRight:25,bounceDelay:150,
revealAt:0.8};return{}},jQuery,window);s("plugin.evolutionStarRating",function(f,e,q){var k=[],n=/MSIE 6/i.test(navigator.userAgent)?"gif":"png",h=function(b,a){return 1==a%2?b.settings.imagesPathUrl+"star-right-on."+n:b.settings.imagesPathUrl+"star-left-on."+n},c=function(b,a){return 1==a%2?b.settings.imagesPathUrl+"star-right-off."+n:b.settings.imagesPathUrl+"star-left-off."+n};_cacheImages=function(b){var a,d,g;for(g=0;2>g;g++)d=h(b,g),_isImageCached(d)||(a=new Image,a.src=d,k[k.length]=a),d=c(b,
g),_isImageCached(d)||(a=new Image,a.src=d,k[k.length]=a)};_isImageCached=function(b,a){var c;for(c=0;c<k.length;c++)if(k[c].src==a)return!0;return!1};_getItemTitle=function(b,a,c){return"object"==typeof b.settings.titles?b.settings.titles[a].replace("{0}",c):b.settings.titles?b.settings.titles.replace("{0}",c):c};_getValue=function(b){return"undefined"!==typeof b.internal.value?b.internal.value:b.settings.value};_setValue=function(b,a){b.internal.isInitialized&&!b.settings.isReadOnly&&(b.internal.value=
a,b.settings.allowMultipleSelections||(b.settings.isReadOnly=!0),b.internal.savingValue=!0,b.settings.onRate(a))};_showValue=function(b,a){var d,g=2*b.settings.maxRating;a=2*a-1;var p="img"==b.settings.starElement;for(d=0;d<g;d++)d<=a?p?f(b.internal.state.find("img").get(d)).attr("src",h(b,d)).removeClass().addClass("star-on-"+(0==d%2?"left":"right")):f(b.internal.state.find("span").get(d)).removeClass().addClass("star-on-"+(0==d%2?"left":"right")):p?f(b.internal.state.find("img").get(d)).attr("src",
c(b,d)).removeClass().addClass("star-off-"+(0==d%2?"left":"right")):f(b.internal.state.find("span").get(d)).removeClass().addClass("star-off-"+(0==d%2?"left":"right"))};_mouseOver=function(b,a){b.internal.isInitialized&&!b.settings.isReadOnly&&(b.internal.state.addClass(b.settings.overClass),_showValue(b,a))};_mouseOut=function(b,a){b.internal.isInitialized&&!b.settings.isReadOnly&&(b.internal.state.removeClass(b.settings.overClass),_showValue(b,a))};_init=function(b){return this.each(function(){var a=
{settings:f.extend({},f.fn.evolutionStarRating.defaults,b||{}),internal:{state:f(this)}};a.settings.imagesPathUrl||(a.settings.imagesPathUrl=f.telligent.evolution.site.getBaseUrl()+"utility/images/");_cacheImages(a);f(this).data("evolutionStarRating_context",a);_initialize(a)})};_initialize=function(b){b.internal.state.addClass(b.settings.starClass).css("white-space","nowrap").find("a").unbind(".evolutionStarRating").empty().end().bind("mouseleave",function(){_showValue(b,_getValue(b))});b.settings.isReadOnly&&
b.internal.state.addClass(b.settings.readOnlyClass);var a,d=2*b.settings.maxRating,g="undefined"===typeof b.settings.ratingCount,p="img"==b.settings.starElement;for(a=0;a<d;a++)(function(){var d,e;e=p?f("<img />").css({borderLeftWidth:"0px",borderTopWidth:"0px",borderRightWidth:"0px",borderBottomWidth:"0px"}):f("<span></span>");b.settings.isReadOnly||(d=f('<a href="#" />').css({textDecoration:"none"}).append(e));var m=(a+1)/2;m<=b.settings.value?p?e.attr("src",h(b,a)).addClass("star-on-"+(0==a%2?
"left":"right")):e.addClass("star-on-"+(0==a%2?"left":"right")):p?e.attr("src",c(b,a)).addClass("star-off-"+(0==a%2?"left":"right")):e.addClass("star-off-"+(0==a%2?"left":"right"));if(!b.settings.isReadOnly){if(b.settings.useHalfStars)t=_getItemTitle(b,a,m);else var m=Math.ceil(m),t=_getItemTitle(b,m,m);g&&d.attr("title",t);p&&e.attr("alt",t);d.data("rating-value",m).bind("click.evolutionStarRating",function(a){_setValue(b,d.data("rating-value"));return!1}).bind("focus.evolutionStarRating",function(a){_mouseOver(b,
d.data("rating-value"))}).bind("mouseover.evolutionStarRating",function(a){_mouseOver(b,d.data("rating-value"))}).bind("blur.evolutionStarRating",function(a){_mouseOut(b,d.data("rating-value"))}).bind("mouseout.evolutionStarRating",function(a){_mouseOut(b,d.data("rating-value"))})}p&&e.attr("align","absmiddle").attr("border",0);d?b.internal.state.append(d):b.internal.state.append(e)})();_setMessage(b);b.internal.isInitialized=!0};_setMessage=function(b){!b.settings.ratingMessageFormat||(isNaN(parseInt(b.settings.ratingCount))||
isNaN(parseInt(b.settings.value)))||b.internal.state.attr("title",b.settings.ratingMessageFormat.replace(/\{rating\}/gi,Math.round(10*b.settings.value)/10).replace(/\{count\}/gi,b.settings.ratingCount))};var d={val:function(b){var a=this.data("evolutionStarRating_context");return null!==a?"undefined"!==typeof b?(a.internal.value=b,_showValue(a,b),b):_getValue(a):0},readOnly:function(b){var a=this.data("evolutionStarRating_context");if(null!==a)if("undefined"!==typeof b)(a.settings.isReadOnly=b)?a.internal.state.find("a").css({cursor:"default"}):
a.internal.state.find("a").css({cursor:"pointer"});else return a.settings.isReadOnly;return!0},option:function(b,a){if("object"===typeof b)return this.each(function(){var a=f(this).data("evolutionStarRating_context");null!=a&&(a.settings=f.extend({},a.settings,b),_init.apply(f(this),[a.settings]))});if("undefined"!==typeof b&&"undefined"!==typeof a)return this.each(function(){var c=f(this).data("evolutionStarRating_context");null!=c&&(c.settings[b]=a,_init.apply(f(this),[c.settings]))});if("undefined"!==
typeof b){var c=this.data("evolutionStarRating_context");return null!==c?c.settings[b]:null}}};f.fn.evolutionStarRating=function(b){if(b in d)return d[b].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof b&&b)f.error("Method "+b+" does not exist on jQuery.fn.evolutionStarRating");else return _init.apply(this,arguments)};f.extend(f.fn.evolutionStarRating,{defaults:{value:0,maxRating:5,imagesPathUrl:"",starElement:"img",useHalfStars:!1,starClass:"rating",overClass:"active",readOnlyClass:"readonly",
titles:"Terrible Poor Fair Average Good Excellent".split(" "),isReadOnly:!1,allowMultipleSelections:!0,ratingCount:void 0,ratingMessageFormat:"Average rating: {rating} out of {count} ratings.",onRate:function(b){}}});return{}},jQuery,window);s("plugin.evolutionTagTextBox",function(f,e,q){var k={openTagSelector:function(){var a=this.data("evolutionTagTextBox");if(a){window.__tagEditor={SetSelectedTags:function(b){for(var c=[],d=h(a),e=a.settings.allTags,m,t=0;t<d.length;t++){m=!1;for(var v=0;v<e.length;v++)if(d[t].toUpperCase()==
e[v].toUpperCase()){m=!0;break}m||(c[c.length]=d[t])}for(t=0;t<b.length;t++)c[c.length]=b[t];f(a.internal.state).val(c.join(", "))},GetAllTagsWithEncoding:function(){for(var b=[],c=a.settings.allTags,d=f("<div></div>"),e=0;e<c.length;e++)d.text(c[e]),b[e]=[c[e],d.html()];return b},GetSelectedTags:function(){return h(a)}};var b=f.telligent.evolution.ensureRemoteUrlEncoding(a.settings.selectTagsModalUrl);"~/"==b.substr(0,2)&&(b=f.telligent.evolution.site.getBaseUrl()+b.substr(2));window.Telligent_Modal?
window.Telligent_Modal.Open(b,400,350,null):f.glowModal&&f.glowModal(b,{width:400,height:350})}}},n=function(a){return this.each(function(){var e={settings:f.extend({},f.fn.evolutionTagTextBox.defaults,a||{}),internal:{state:this,suggestionTimeoutHandle:null,previousTags:[],previousValue:"",currentTag:"",currentTagPosition:0}};f(this).data("evolutionTagTextBox",e);b(e);f(this).bind("keyup.evolutionTagTextBox",function(a){return d(e,a)});f(this).bind("keydown.evolutionTagTextBox",function(a){return c(e,
a)});f(this).bind("onblur.evolutionTagTextBox",function(a){window.clearTimeout(e.internal.suggestionTimeoutHandle);return!0})})},h=function(a){a=f(a.internal.state).val().split(/;|,/);for(var b=[],c=0;c<a.length;c++)a[c]=a[c].replace(/^\s+|\s+$/g,""),""!=a[c]&&(b[b.length]=a[c]);return b},c=function(a,b){window.clearTimeout(a.internal.suggestionTimeoutHandle);b||(b=window.event);if(b){if(13==b.keyCode){a.internal.state.focus();if(document.selection){var c=window.document.selection.createRange();c.text&&
0<c.text.length&&(c.moveStart("character",c.text.length),c.select())}else if(a.internal.state.selectionStart||"0"==a.internal.state.selectionStart)a.internal.state.selectionStart=a.internal.state.selectionEnd;b.cancelBubble=!0;return b.returnValue=!1}if(8==b.keyCode)if(a.internal.state.focus(),document.selection){if(c=window.document.selection.createRange())return c.moveStart("character",-1),c.text="",b.cancelBubble=!0,b.returnValue=!1}else if(a.internal.state.selectionStart||"0"==a.internal.state.selectionStart){var c=
a.internal.state.selectionStart,d=a.internal.state.selectionEnd;if(c==d)return!0;0<c&&c--;a.internal.state.value=a.internal.state.value.substring(0,c)+a.internal.state.value.substring(d);a.internal.state.selectionStart=c;a.internal.state.selectionEnd=c;b.cancelBubble=!0;return b.returnValue=!1}return!0}},d=function(a,c){window.clearTimeout(a.internal.suggestionTimeoutHandle);a.internal.suggestionTimeoutHandle=window.setTimeout(function(){if((document.selection||a.internal.state.selectionStart||"0"==
a.internal.state.selectionStart)&&f(a.internal.state).val()!=a.internal.previousValue&&(a.internal.previousValue=f(a.internal.state).val(),b(a),""!=a.internal.currentTag)){var c;b:{c=a.internal.currentTag;var d,l,e,m=a.settings.allTags;for(d=0;d<m.length;d++)if(0==m[d].toLowerCase().indexOf(c)){e=!1;for(l=0;l<a.internal.previousTags.length&&!e;l++)a.internal.previousTags[l]==m[d].toLowerCase()&&(e=!0);if(!e){c=m[d];break b}}c=null}if(c&&c.length!=a.internal.currentTag.length)if(c=c.substr(a.internal.currentTag.length),
f(a.internal.state).val(f(a.internal.state).val().substr(0,a.internal.currentTagPosition+a.internal.currentTag.length)+c+f(a.internal.state).val().substr(a.internal.currentTagPosition+a.internal.currentTag.length)),a.internal.state.focus(),document.selection)d=a.internal.state.createTextRange(),d.select(),d.moveStart("character",a.internal.currentTagPosition+a.internal.currentTag.length),d.moveEnd("character",-(f(a.internal.state).val().length-(a.internal.currentTagPosition+a.internal.currentTag.length+
c.length))),d.select();else if(a.internal.state.selectionStart||"0"==a.internal.state.selectionStart)a.internal.state.selectionStart=a.internal.currentTagPosition+a.internal.currentTag.length,a.internal.state.selectionEnd=a.internal.currentTagPosition+a.internal.currentTag.length+c.length}},249);return!0},b=function(a){var b=f(a.internal.state).val().toLowerCase().split(/;|,/),c,d,l;a.internal.currentTag="";var e=0,h=!0;for(c=0;c<b.length;c++){d=b[c].replace(/^\s+/g,"");e+=b[c].length-d.length;b[c]=
d;l=!1;for(d=0;d<a.internal.previousTags.length&&!l;d++)b[c]==a.internal.previousTags[d]&&(a.internal.previousTags.splice(d,1),l=!0);l||(""!=a.internal.currentTag?h=!1:(a.internal.currentTag=b[c],a.internal.currentTagPosition=e));e+=b[c].length+1}h||(a.internal.currentTag="");a.internal.previousTags=b};f.fn.evolutionTagTextBox=function(a){if(a in k)return k[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof a&&a)f.error("Method "+a+" does not exist on jQuery.fn.evolutionTagTextBox");
else return n.apply(this,arguments)};f.extend(f.fn.evolutionTagTextBox,{defaults:{allTags:[],selectTagsModalUrl:"~/utility/tagselector?TagEditor=__tagEditor"}});return{}},jQuery,window);s("plugin.evolutionTextEditor",function(f,e,q){var k=function(c){var d="";c.isReadOnly?d=c.readOnlyView.html():f.telligent.evolution.put({url:f.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/html/fromtext.json",data:{text:c.editor.evolutionComposer("val")},dataType:"json",async:!1,success:function(b){d=b.Html}});
return d},n=function(c,d){f.telligent.evolution.put({url:f.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/text/fromhtml.json",data:{html:d},dataType:"json",async:!1,success:function(b){b.TextConversion.IsDataLost?(c.isReadOnly||(c.readOnlyView.css("height",c.editor.height()+"px"),c.readOnlyView.css("width",c.editor.width()+"px"),c.isReadOnly=!0,c.readOnlyView.show(),c.editorWrapper.hide()),c.readOnlyView.html(d),c.editor.val("<!html>"+d)):(c.isReadOnly&&(c.isReadOnly=!1,c.readOnlyView.hide(),
c.editorWrapper.show()),c.editor.evolutionComposer("val",b.TextConversion.Text),c.editor.trigger("input"))}})},h={init:function(c){return this.each(function(){var d=f(this);if(!d.data("__EVOLUTIONTEXTEDITOR_CONTEXT")){var b=d.innerWidth()-parseInt(d.css("padding-left"),10)-parseInt(d.css("padding-right"),10),a=d.innerHeight()-parseInt(d.css("padding-top"),10)-parseInt(d.css("padding-bottom"),10),e=d.val(),g=f('<div class="text-editor-wrapper"></div>');g.insertAfter(d);g.append(d);var p=f('<div class="text-editor-read-only" style="overflow: auto; padding: 2px; border: 1px solid; box-sizing: border-box"></div>').hide();
p.on("click",function(){c.readOnlyMessage&&alert(c.readOnlyMessage)});p.insertAfter(g);d.evolutionComposer({plugins:c.plugins,focus:!1}).data("__EVOLUTIONTEXTEDITOR_CONTEXT",{editorWrapper:g,editor:d,readOnlyView:p,isReadOnly:!1});setTimeout(function(){d.evolutionComposer("resize",b,a)},50);0<f.trim(e).length&&n(f(d).data("__EVOLUTIONTEXTEDITOR_CONTEXT"),e)}})},val:function(c){if("undefined"!==typeof c){var d=f(this).data("__EVOLUTIONTEXTEDITOR_CONTEXT");if(d)return n(d,c)}else return(d=f(this).data("__EVOLUTIONTEXTEDITOR_CONTEXT"))?
k(d):"";return this},focus:function(c){(c=f(this).data("__EVOLUTIONTEXTEDITOR_CONTEXT"))&&(c.isReadOnly||c.editor.focus());return this},resize:function(c,d){var b=f(this).data("__EVOLUTIONTEXTEDITOR_CONTEXT");b&&(b.evolutionComposer("resize",c,d),isNaN(parseInt(c,10))||b.readOnlyView.css("width",c+"px"),isNaN(parseInt(d,10))||b.readOnlyView.css("height",d+"px"));return this}};f.fn.evolutionTextEditor=function(c){if(h[c])return h[c].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==
typeof c&&c)f.error("Method "+c+" does not exist on jQuery.evolutionTextEditor");else return h.init.apply(this,arguments)};return{}},jQuery,window);s("plugin.evolutionTheater",function(f,e,q){var k={show:function(e){var h=f.extend({},k.defaults,e||{}),c=f('<div class="theater-mask"></div>').hide().appendTo("body"),d=f('<div class="theater-container"></div>').hide().appendTo("body");e=f('<div class="theater-content-container"></div>').appendTo(d);var b=f('<div class="theater-content"></div>').appendTo(e),
a=f('<a href="#" class="theater-next">&rarr;</a>').appendTo(d),m=f('<a href="#" class="theater-back">&larr;</a>').appendTo(d),g=f('<a href="#" class="theater-close">X</a>').appendTo(e),p=null,l=null,r=null,z=function(g,e){f("body").css({overflow:"hidden"});p=g;g(function(g){a.hide();m.hide();e?e(b,g):b.hide().html(g);c.is(":visible")||(c.show(),d.show());h.loaded(b);l=h.nextContent(b);r=h.previousContent(b);b.show();l&&null!==l&&a.show();r&&null!==r&&m.show()})},t=function(){f("body").css({overflow:"auto"});
a.unbind("_evolution_theater");m.unbind("_evolution_theater");g.unbind("_evolution_theater");d.unbind("_evolution_theater");c.hide().remove();d.hide().remove();f(document).unbind("_evolution_theater")};k.refresh=function(a){z(p,a)};k.hide=function(){t()};a.bind("click._evolution_theater",function(a){a.preventDefault();l&&null!==l&&z(l)});m.bind("click._evolution_theater",function(a){a.preventDefault();r&&null!==r&&z(r)});g.bind("click._evolution_theater",function(a){a.preventDefault();t()});d.bind("click._evolution_theater",
function(a){a.target===d.get(0)&&t()});f(document).bind("keydown._evolution_theater",function(b){c.is(":visible")&&(39===b.which?f(b.target).is("input,textarea")||(l&&null!==l&&z(l),a.addClass("pressed")):37===b.which?f(b.target).is("input,textarea")||(r&&null!==r&&z(r),m.addClass("pressed")):27===b.which&&t())});f(document).bind("keyup._evolution_theater",function(b){c.is(":visible")&&(39===b.which?a.removeClass("pressed"):37===b.which&&m.removeClass("pressed"))});z(h.content)},hide:function(){},
refresh:function(){},defaults:{content:function(){return null},nextContent:function(){return null},previousContent:function(){return null},loaded:function(){}}};f.evolutionTheater=k;return{}},jQuery,window);s("plugin.evolutionTip",function(f,e,q){function k(){n&&(n.ui.remove(),"title"!=n.attribute&&"alt"!=n.attribute||n.element.attr(n.attribute,n.content))}var n;f.fn.evolutionTip=function(e){var c=f.extend({},f.fn.evolutionTip.defaults,e||{});c.template=f.telligent.evolution.template.compile(c.template);
return this.off("._evolutionTip").on("mouseenter._evolutionTip",function(d){k();d=f(this);for(var b=["data-"+c.attribute,"title","alt"],a,e,g=0;g<b.length;g++){a=b[g];var p=d.attr(a);if(p&&0<f.trim(p).length){e=p;break}}e&&0!=e.length&&(n={attribute:a,content:e,element:d,ui:f(c.template({content:e})).css({position:"absolute",top:-500,left:-500}).appendTo("body")},"title"!=n.attribute&&"alt"!=n.attribute||n.element.attr(n.attribute,""),b=f(window),e=f(document).scrollTop(),a=d.offset(),targetWidth=
d.outerWidth(),targetHeight=d.outerHeight(),windowWidth=b.outerWidth(),windowHeight=b.outerHeight(),tipWidth=n.ui.outerWidth(),tipHeight=n.ui.outerHeight(!0),d="center",b="above",30>=targetHeight+a.top-tipHeight-e&&(b="below"),30>=a.left-tipWidth/2?d="left":30>=windowWidth-(a.left+targetWidth+tipWidth/2)&&(d="right"),e="right"==d?a.left+targetWidth-tipWidth:"left"==d?a.left:a.left+targetWidth/2-tipWidth/2,a="above"==b?a.top-tipHeight:a.top+targetHeight,n.ui.addClass(b).addClass(d).css({left:e,top:a}))}).on("mouseleave._evolutionTip",
function(){k()})};f.fn.evolutionTip.hide=function(){k()};f.fn.evolutionTip.defaults={template:'<div class="tip"><%= content %></div>',attribute:"tip"};return{}},jQuery,window);s("plugin.evolutionToggleLink",function(f,e,q){var k={val:function(c){if(void 0===c){var d=this.data("evolutionToggleLink");return d?d.settings.val:!1}return this.each(function(){var b=f(this).data("evolutionToggleLink");b&&(b.settings.val=c,b.internal.processing=!1,h(b))})}},n=function(c){return this.each(function(){var d=
{settings:f.extend({},f.fn.evolutionToggleLink.defaults,c||{}),internal:{state:f(this),processing:!1}};d.internal.state.data("evolutionToggleLink",d).click(function(b){!d.internal.processing&&d.settings.changeState&&(d.internal.processing=!0,h(d),d.settings.changeState(!d.settings.val));return!1});h(d)})},h=function(c){c.internal.processing?c.internal.state.attr("class",c.settings.processingCssClass).attr("title",c.settings.processingTitle).html(c.settings.processingHtml):c.settings.val?c.internal.state.attr("class",
c.settings.onCssClass).attr("title",c.settings.onTitle).html(c.settings.onHtml):c.internal.state.attr("class",c.settings.offCssClass).attr("title",c.settings.offTitle).html(c.settings.offHtml)};f.fn.evolutionToggleLink=function(c){if(c in k)return k[c].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof c&&c)f.error("Method "+c+" does not exist on jQuery.fn.evolutionToggleLink");else return n.apply(this,arguments)};f.extend(f.fn.evolutionToggleLink,{defaults:{onHtml:"",offHtml:"",
processingHtml:"",changeState:null,onCssClass:"",offCssClass:"",processingCssClass:"",onTitle:"",offTitle:"",processingTitle:"",val:!1}});return{}},jQuery,window);s("plugin.evolutionTransform",function(f,e,q){function k(){var a=(document.body||document.documentElement).style,b="Moz webkit Webkit Khtml O ms".split(" ");if("string"==typeof a.transition)return!0;for(var c=0;c<b.length;c++)if("string"==typeof a[b[c]+"Transition"])return!0;return!1}function n(e,u){if(!this||0==this.length)return this;
var A=e||{};u=u||{};var w=[],C,y,D=null,B=null,G=null,x=null;e=[];null===z&&(z=k());this.each(function(){if(3!==this.nodeType){var k=f(this);if(!z)return A.x&&(A.left=A.x),A.y&&(A.y=A.y),k.css(A);for(var s in n.defaults)u[s]||(u[s]=n.defaults[s]);for(var E in A)k=A[E],E===h||E===d?(C=k,delete A[E]):E===c||E===b?(y=k,delete A[E]):E===a?(D=k,delete A[E]):E===m?(B=k,delete A[E]):E===g?(G=k,delete A[E]):E===p?(x=k,delete A[E]):(E==l?0===k?A[E]=1E-5:1===k&&(A[E]=0.99999):"number"===typeof k&&0==k%1&&(A[E]=
k+"px"),w[w.length]=E);if(C!=q||y!=q)e[e.length]="translate3d("+(C||0)+"px, "+(y||0)+"px, 0px)";D!=q&&(e[e.length]="rotateZ("+D+"deg)");B!=q&&(e[e.length]="rotateX("+B+"deg)");G!=q&&(e[e.length]="rotateY("+G+"deg)");x!=q&&(e[e.length]="scale("+x+")");0<e.length&&(k=t+"transform",mergedTransforms=e.join(" "),w[w.length]=k,A[k]=mergedTransforms,A.transform=mergedTransforms);k=f.fn.evolutionTransform.animationEnabled?u.duration/1E3+"s "+u.easing:"";transition=w.join(" "+k+", ")+" "+k;f.noop(this.offsetHeight);
if(G||B)r=r||f("body").get(0),r.style[t+"perspective"]=u.perspective,r.style.perspective=u.perspective;this.style[t+"transition"]=transition;this.style.transition=transition;for(E in A)this.style[E]=A[E]}});return this}var h="x",c="y",d="left",b="top",a="rotate",m="rotateX",g="rotateY",p="scale",l="opacity",r,z=null,t=function(){if(!("getComputedStyle"in window))return"";var a=window.getComputedStyle(document.documentElement,"");return"-"+(Array.prototype.slice.call(a).join("").match(/-(moz|webkit|ms)-/)||
""===a.OLink&&["","o"])[1]+"-"}();n.defaults={duration:0,easing:"linear",perspective:250};f.fn.evolutionTransform=n;f.fn.evolutionTransform.animationEnabled=!0;return{}},jQuery,window);s("plugin.evolutionUserFileTextBox",function(f,e,q){var k={},n=1,h=function(c){return this.each(function(){var d={settings:f.extend({},f.fn.evolutionUserFileTextBox.defaults,c||{}),internal:{state:this,preview:null,select:null,remove:null}};f.telligent.evolution.post({url:d.settings.endpoint,data:{m:"c"},success:function(b){d.internal.contextid=
b.uploadContextId;d.internal.uploadurl=b.uploadUrl;b=f("<div></div>").attr("class",d.settings.cssClass);d.internal.preview=f("<div></div>").attr("class",d.settings.previewCssClass);b.append(d.internal.preview);d.internal.select=f('<a href="#" class="upload"></a>').attr("id","userfiletextbox_"+(new Date).getTime()+"_"+n++).html(d.settings.selectText).glowUpload({fileFilter:null,uploadUrl:d.internal.uploadurl,renderMode:"link"}).bind("glowUploadBegun",function(a){d.uploading=!0;d.internal.select.html("0%")}).bind("glowUploadComplete",
function(a,b){d.internal.select.html(d.settings.selectText);b&&0<b.name.length&&f.telligent.evolution.post({url:d.settings.endpoint,data:{m:"f",ContextId:d.internal.contextid,FileName:b.name},success:function(a){d.internal.state.value=a.url;d.uploading=!1;d.internal.preview.html(a.previewHtml).slideDown(100);d.internal.remove.show()}})}).bind("glowUploadFileProgress",function(a,b){d.internal.select.html(b.percent+"%")});b.append(d.internal.select);d.internal.remove=f('<a href="#" class="remove" style="margin-left: 1em;"></a>').html(d.settings.removeText).click(function(){d.internal.preview.html("").slideUp(100);
d.internal.state.value="";d.internal.remove.hide();return!1}).hide();b.append(d.internal.remove);var a=f(d.internal.state).val();a?(d.internal.remove.show(),f.telligent.evolution.post({url:d.settings.endpoint,data:{m:"p",Url:a},success:function(a){d.internal.preview.html(a.previewHtml).slideDown(100)}})):d.internal.preview.html("").hide();f(d.internal.state).data("evolutionUserFileTextBox",d).before(b).hide()}})})};f.fn.evolutionUserFileTextBox=function(c){if(c in k)return k[c].apply(this,Array.prototype.slice.call(arguments,
1));if("object"!==typeof c&&c)f.error("Method "+c+" does not exist on jQuery.fn.evolutionUserFileTextBox");else return h.apply(this,arguments)};f.extend(f.fn.evolutionUserFileTextBox,{defaults:{removeText:"",selectText:"",noFileText:"",initialPreviewHtml:"",cssClass:"user-file-url",previewCssClass:"user-file-url-preview",endpoint:""}});return{}},jQuery,window);s("plugin.validation",function(f,e,q){f.telligent||(f.telligent={});f.telligent.evolution||(f.telligent.evolution={});f.telligent.evolution.validation=
{registerExtensions:function(a){f.validator&&(f.validator.addMethod("passwordvalid",function(b,c){return this.optional(c)||b.match(a.passwordRegex)},a.passwordInvalidMessage),f.validator.addMethod("email",function(b,c){return this.optional(c)||b.match(RegExp(a.emailRegex))},a.emailInvalidMessage),f.validator.addMethod("url",function(b,c){return this.optional(c)||b.match(a.urlRegex)?!0:("http://"+b).match(a.urlRegex)?(f(c).val("http://"+b),!0):!1},a.urlInvalidMessage),f.validator.addMethod("emails",
function(b,c){for(var d=b.split(/[;,]/),g=!0,e=RegExp(a.emailRegex),f=0;f<d.length;f++)jQuery.trim(d[f]).match(e)||(g=!1);return this.optional(c)||g},a.emailsInvalidMessage),f.validator.addMethod("username",function(b,c){return this.optional(c)||b.match(a.usernameRegex)},a.usernameInvalidMessage),f.validator.addMethod("usernameexists",function(a,b,c){if(this.optional(b))return"dependency-mismatch";var d=this.previousValue(b);this.settings.messages[b.name]||(this.settings.messages[b.name]={});d.originalMessage=
this.settings.messages[b.name].remote;this.settings.messages[b.name].remote=d.message;c="string"==typeof c&&{url:c}||c;var g=f.telligent.evolution.site.getBaseUrl()+"Utility/Validation/Core_Validator.asmx/IsUsernameAvailable";c.url&&(g=c.url);if(d.old!==a){d.old=a;var e=this;this.startRequest(b);var p='{"username":"'+a+'","elementName":"'+b.name+'"}';f.telligent.evolution.post({url:g,dataType:"json",contentType:"application/json; charset=utf-8",data:p,success:function(c){b=e.findByName(c.d.ElementName)[0];
e.settings.messages[b.name].remote=d.originalMessage;var g=!0===c.d.IsValid;if(g){var m=e.formSubmitted;e.prepareElement(b);e.formSubmitted=m;e.successList.push(b);e.showErrors()}else m={},c=d.message=c.d.ErrorMessage||e.defaultMessage(b,"usernameexists"),m[b.name]=f.isFunction(c)?p(a):c,e.showErrors(m);d.valid=g;e.stopRequest(b,g)}});return"pending"}return this.pending[b.name]?"pending":d.valid},void 0),f.validator.addMethod("emailexists",function(a,b,c){if(this.optional(b))return"dependency-mismatch";
var d=this.previousValue(b);this.settings.messages[b.name]||(this.settings.messages[b.name]={});d.originalMessage=this.settings.messages[b.name].remote;this.settings.messages[b.name].remote=d.message;c="string"==typeof c&&{url:c}||c;var g=f.telligent.evolution.site.getBaseUrl()+"Utility/Validation/Core_Validator.asmx/IsEmailAvailable";c.url&&(g=c.url);if(d.old!==a){d.old=a;var e=this;this.startRequest(b);var p='{"email":"'+a+'","elementName":"'+b.name+'"}';f.telligent.evolution.post({url:g,dataType:"json",
contentType:"application/json; charset=utf-8",data:p,success:function(c){b=e.findByName(c.d.ElementName)[0];e.settings.messages[b.name].remote=d.originalMessage;var g=!0===c.d.IsValid;if(g){var m=e.formSubmitted;e.prepareElement(b);e.formSubmitted=m;e.successList.push(b);e.showErrors()}else m={},c=d.message=e.customMessage(b.name,"emailexists")||c.d.ErrorMessage||e.defaultMessage(b,"emailexists"),m[b.name]=f.isFunction(c)?p(a):c,e.showErrors(m);d.valid=g;e.stopRequest(b,g)}});return"pending"}return this.pending[b.name]?
"pending":d.valid},void 0),f.validator.addMethod("groupnameexists",function(a,b,c){if(this.optional(b))return"dependency-mismatch";var d=encodeURIComponent(f.trim(a));if(0==d.length)return!0;var g=this.previousValue(b);this.settings.messages[b.name]||(this.settings.messages[b.name]={});g.originalMessage=this.settings.messages[b.name].remote;this.settings.messages[b.name].remote=g.message;c=c.getParentId();d='{"groupName":"'+d+'","parentGroupId":'+c+',"elementName":"'+b.name+'"}';if(g.old!==d){g.old=
d;var e=this;this.startRequest(b);c=f.telligent.evolution.site.getBaseUrl()+"Utility/Validation/Core_Validator.asmx/IsGroupNameAvailable";f.telligent.evolution.post({url:c,dataType:"json",contentType:"application/json; charset=utf-8",data:d,success:function(c){b=e.findByName(c.d.ElementName)[0];e.settings.messages[b.name].remote=g.originalMessage;var d=!0===c.d.IsValid;if(d){var p=e.formSubmitted;e.prepareElement(b);e.formSubmitted=p;e.successList.push(b);e.showErrors()}else p={},c=g.message=c.d.ErrorMessage||
e.defaultMessage(b,"groupnameexists"),p[b.name]=f.isFunction(c)?message(a):c,e.showErrors(p);g.valid=d;e.stopRequest(b,d)}});return"pending"}return this.pending[b.name]?"pending":g.valid},void 0),f.validator.addMethod("wikipageexists",function(a,b,c){if(this.optional(b))return"dependency-mismatch";var d=encodeURIComponent(f.trim(a));if(0==d.length)return!0;var g=this.previousValue(b);this.settings.messages[b.name]||(this.settings.messages[b.name]={});g.originalMessage=this.settings.messages[b.name].remote;
this.settings.messages[b.name].remote=g.message;c='{"pageName":"'+d+'","wikiId":'+c.wikiId+',"pageId":'+c.pageId+',"parentPageId":'+c.parentPageId()+',"elementName":"'+b.name+'"}';if(g.old!==c){g.old=c;var e=this;this.startRequest(b);d=f.telligent.evolution.site.getBaseUrl()+"Utility/Validation/Core_Validator.asmx/IsWikiPageNameAvailable";f.telligent.evolution.post({url:d,dataType:"json",contentType:"application/json; charset=utf-8",data:c,success:function(c){b=e.findByName(c.d.ElementName)[0];e.settings.messages[b.name].remote=
g.originalMessage;var d=!0===c.d.IsValid;if(d){var p=e.formSubmitted;e.prepareElement(b);e.formSubmitted=p;e.successList.push(b);e.showErrors()}else p={},c=g.message=c.d.ErrorMessage||e.defaultMessage(b,"wikipageexists"),p[b.name]=f.isFunction(c)?message(a):c,e.showErrors(p);g.valid=d;e.stopRequest(b,d)}});return"pending"}return this.pending[b.name]?"pending":g.valid},void 0),f.validator.addMethod("mailinglistnameexists",function(a,b,c){if(""==f.trim(a))return this.optional(b);var d=this.previousValue(b);
this.settings.messages[b.name]||(this.settings.messages[b.name]={});d.originalMessage=this.settings.messages[b.name].remote;this.settings.messages[b.name].remote=d.message;c="string"==typeof c&&{url:c}||c;var g=f.telligent.evolution.site.getBaseUrl()+"Utility/Validation/Core_Validator.asmx/IsMailingListNameAvailable";c.url&&(g=c.url);if(d.old!==a){d.old=a;var e=this;this.startRequest(b);var p='{"mailingListName":"'+a+'","elementName":"'+b.name+'"}';f.telligent.evolution.post({url:g,dataType:"json",
contentType:"application/json; charset=utf-8",data:p,success:function(c){b=e.findByName(c.d.ElementName)[0];e.settings.messages[b.name].remote=d.originalMessage;var g=!0===c.d.IsValid;if(g){var m=e.formSubmitted;e.prepareElement(b);e.formSubmitted=m;e.successList.push(b);e.showErrors()}else m={},c=d.message=c.d.ErrorMessage||e.defaultMessage(b,"mailinglistnameexists"),m[b.name]=f.isFunction(c)?p(a):c,e.showErrors(m);d.valid=g;e.stopRequest(b,g)}});return"pending"}return this.pending[b.name]?"pending":
d.valid},void 0))}};var k={addField:function(a,b,c,g){var e=this.data("evolutionValidation");if(e&&"undefined"!==typeof e){e.internal.fields[e.internal.fields.length]={selector:a,messageSelector:c,isValid:!0,context:g,initialized:!1};a=f(a);a.data("_evolutionValidation",e).data("_evolutionValidationFieldIndex",e.internal.fields.length-1).data("_evolutionValidationOldValue","$$$$$NULL$$$$$").rules("add",b);try{a.keydown(function(){if(e.internal.hasAttemptedSubmit){window.clearTimeout(e.internal.keyPressValidationHandle);
var a=this;e.internal.keyPressValidationHandle=window.setTimeout(function(){d(e,f(a))},499)}})}catch(m){}a.blur(function(){d(e,f(this))})}return this},addCustomValidation:function(b,c,d,e,g){var f=this.data("evolutionValidation");if(f&&"undefined"!==typeof f){var m=f.internal.customValidations.length;f.internal.customValidations[m]={id:b,validationFunction:c,message:d,messageSelector:e,isValid:!0,context:g,initialized:!1};return function(){return a(f,m)}}},isValid:function(){var b=this.data("evolutionValidation");
if(!b)return this;for(var e=0;e<b.internal.fields.length;e++)b.internal.fields[e].initialized||d(b,f(b.internal.fields[e].selector));for(e=0;e<b.internal.customValidations.length;e++)b.internal.customValidations[e].initialized||a(b,e);return c(b)},validate:function(){var b=this.data("evolutionValidation");if(!b)return this;for(var c=0;c<b.internal.fields.length;c++)d(b,f(b.internal.fields[c].selector));for(c=0;c<b.internal.customValidations.length;c++)a(b,c);return k.isValid.apply(f(b.internal.state),
[])},validateField:function(a){try{var b=this.data("evolutionValidation");f(a).data("_evolutionValidationOldValue","$$$$$NULL$$$$$");return d(b,f(a))}catch(c){}},validateCustom:function(b){var c=this.data("evolutionValidation");if(!c)return this;for(var d=0;d<c.internal.customValidations.length;d++)if(c.internal.customValidations[d].id==b)return a(c,d);return!0},reset:function(){var a=this.data("evolutionValidation");if(!a)return this;for(var b=0;b<a.internal.customValidations.length;b++)f(a.internal.customValidations[b].messageSelector).hide(),
a.internal.customValidations[b].isValid=!0,a.internal.customValidations[b].initialized=!1;for(b=0;b<a.internal.fields.length;b++)f(a.internal.fields[b].messageSelector).hide(),a.internal.fields[b].errorMessage=null,a.internal.fields[b].isValid=!0,a.internal.fields[b].initialized=!1,f(a.internal.fields[b].selector).data("_evolutionValidationOldValue","$$$$$NULL$$$$$");a.internal.submitButtonClicked=!1;a.internal.hasAttemptedSubmit=!1;window.clearTimeout(a.internal.initialValidationHandle);a.internal.initialValidationHandle=
window.setTimeout(function(){h(a)},249)}},n=function(a){return this.each(function(){var b={settings:f.extend({},f.fn.evolutionValidation.defaults,a||{}),internal:{state:this,submitButtonClicked:!1,hasAttemptedSubmit:!1,fields:[],customValidations:[],initialValidationHandle:null}};f(this).data("evolutionValidation",b);f(this).click(function(a){return m(b,a)});this._isValid=function(){return m(b,{})};window.clearTimeout(b.internal.initialValidationHandle);b.internal.initialValidationHandle=window.setTimeout(function(){h(b)},
499)})},h=function(a){window.clearTimeout(a.internal.initialValidationHandle);try{var c=!1;if(!0===a.settings.validateOnLoad)c=!0;else if(!1!==a.settings.validateOnLoad)for(var d=0;d<a.internal.fields.length;d++){var e=f(a.internal.fields[d].selector),m=e.attr("type");if("checkbox"!=m&&"radio"!=m&&"select"!=m&&"submit"!=m&&"button"!=m&&"reset"!=m&&""!=b(a,e)){c=!0;break}}if(c){a.internal.hasAttemptedSubmit=!0;var v=k.validate.apply(f(a.internal.state));g(a);if(a.settings.onValidated)a.settings.onValidated(v,
!1,null)}else if(!a.internal.hasAttemptedSubmit&&a.settings.onValidated)a.settings.onValidated(!0,!1,null)}catch(u){a.internal.initialValidationHandle=window.setTimeout(function(){h(a)},499)}},c=function(a){for(var b=0;b<a.internal.fields.length;b++)if(!a.internal.fields[b].isValid)return!1;for(b=0;b<a.internal.customValidations.length;b++)if(!a.internal.customValidations[b].isValid)return!1;return!0},d=function(a,c){var d=b(a,c);if(d!=c.data("_evolutionValidationOldValue"))return c.data("_evolutionValidationOldValue",
d),c.valid();d=c.data("_evolutionValidationFieldIndex");return 0>d||d>=a.internal.fields.length?!1:a.internal.fields[d].isValid},b=function(a,b){return"checkbox"==b.attr("type")||"radio"==b.attr("type")?b.get(0).checked?b.val():"":b.val()},a=function(a,b){if(0>b||b>=a.internal.customValidations.length)return!0;var d=a.internal.customValidations[b].validationFunction();a.internal.customValidations[b].initialized=!0;if(!0===d){a.internal.customValidations[b].isValid=!0;f(a.internal.customValidations[b].messageSelector).hide();
if(c(a)&&a.internal.hasAttemptedSubmit&&a.settings.onValidated)a.settings.onValidated(!0,a.internal.submitButtonClicked,a.internal.customValidations[b].context);return!0}d=c(a);a.internal.customValidations[b].isValid=!1;a.internal.hasAttemptedSubmit&&f(a.internal.customValidations[b].messageSelector).html(a.internal.customValidations[b].message).show();if((a.internal.submitButtonClicked||d)&&a.internal.hasAttemptedSubmit&&a.settings.onValidated)a.settings.onValidated(!1,a.internal.submitButtonClicked,
a.internal.customValidations[b].context);return!1},m=function(a,b){var c=!a.internal.hasAttemptedSubmit;a.internal.hasAttemptedSubmit=!0;a.internal.submitButtonClicked=!0;k.validate.apply(f(a.internal.state),[]);var d=k.isValid.apply(f(a.internal.state),[]);c&&!d&&g(a);c=!0;d&&a.settings.onSuccessfulClick&&(c=a.settings.onSuccessfulClick(b));a.internal.submitButtonClicked=!1;!d&&b&&(b.cancelBubble=!0,b.returnValue=!1);return d&&!1!==c},g=function(a){for(var b=0;b<a.internal.fields.length;b++)a.internal.fields[b].isValid||
null==a.internal.fields[b].errorMessage||(f(a.internal.fields[b].messageSelector).html(a.internal.fields[b].errorMessage).show(),a.internal.fields[b].errorMessage=null);for(b=0;b<a.internal.customValidations.length;b++)a.internal.customValidations[b].isValid||f(a.internal.customValidations[b].messageSelector).html(a.internal.customValidations[b].message).show()};f.fn.evolutionValidation=function(a){if(a in k)return k[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof a&&a)f.error("Method "+
a+" does not exist on jQuery.fn.evolutionValidation");else return n.apply(this,arguments)};f.extend(f.fn.evolutionValidation,{defaults:{validateOnLoad:null,onValidated:null,onSuccessfulClick:null},init:function(){f.fn.validate&&f("form").validate({errorPlacement:function(a,b){var c=f(b).data("_evolutionValidation");if(c){var d=parseInt(f(b).data("_evolutionValidationFieldIndex"),10);0>d||d>=c.internal.fields.length||(c.internal.hasAttemptedSubmit?f(c.internal.fields[d].messageSelector).html(a).show():
c.internal.fields[d].errorMessage=a)}},highlight:function(a,b,d){if(b=f(a).data("_evolutionValidation"))if(d=c(b),a=f(a).data("_evolutionValidationFieldIndex"),!(0>a||a>=b.internal.fields.length)&&(b.internal.fields[a].isValid=!1,b.internal.fields[a].initialized=!0,(b.internal.submitButtonClicked||d)&&b.internal.hasAttemptedSubmit&&b.settings.onValidated))b.settings.onValidated(!1,b.internal.submitButtonClicked,b.internal.fields[a].context)},unhighlight:function(a,b,d){if(b=f(a).data("_evolutionValidation"))if(a=
f(a).data("_evolutionValidationFieldIndex"),!(0>a||a>=b.internal.fields.length)&&(b.internal.fields[a].isValid=!0,b.internal.fields[a].initialized=!0,c(b)&&b.internal.hasAttemptedSubmit&&b.settings.onValidated))b.settings.onValidated(!0,b.internal.submitButtonClicked,b.internal.fields[a].context)},onsubmit:!1,onkeyup:!1,onfocusout:!1})}});e.Telligent_Validation=function(a,b){this._jq=f(a);b.onValidatedFunction&&(b.onValidated=b.onValidatedFunction);b.onSuccessfulClickFunction&&(b.onSuccessfulClick=
b.onSuccessfulClickFunction);this._jq.evolutionValidation(b)};Telligent_Validation.prototype.AddField=function(a,b,c,d){this._jq.evolutionValidation("addField",a,b,c,d)};Telligent_Validation.prototype.AddCustomValidation=function(a,b,c,d,e){return this._jq.evolutionValidation("addCustomValidation",a,b,c,d,e)};Telligent_Validation.prototype.IsValid=function(){return this._jq.evolutionValidation("isValid")};Telligent_Validation.prototype.Validate=function(){return this._jq.evolutionValidation("validate")};
Telligent_Validation.prototype.ValidateField=function(a){return this._jq.evolutionValidation("validateField",a)};Telligent_Validation.prototype.ValidateCustom=function(a){return this._jq.evolutionValidation("validateCustom",a)};return{}},jQuery,window);"object"!==typeof JSON&&(JSON={});(function(){function f(a){return 10>a?"0"+a:a}function e(a){n.lastIndex=0;return n.test(a)?'"'+a.replace(n,function(a){var b=d[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+
'"':'"'+a+'"'}function q(a,d){var g,f,l,r,k=h,t,v=d[a];v&&("object"===typeof v&&"function"===typeof v.toJSON)&&(v=v.toJSON(a));"function"===typeof b&&(v=b.call(d,a,v));switch(typeof v){case "string":return e(v);case "number":return isFinite(v)?String(v):"null";case "boolean":case "null":return String(v);case "object":if(!v)return"null";h+=c;t=[];if("[object Array]"===Object.prototype.toString.apply(v)){r=v.length;for(g=0;g<r;g+=1)t[g]=q(g,v)||"null";l=0===t.length?"[]":h?"[\n"+h+t.join(",\n"+h)+"\n"+
k+"]":"["+t.join(",")+"]";h=k;return l}if(b&&"object"===typeof b)for(r=b.length,g=0;g<r;g+=1)"string"===typeof b[g]&&(f=b[g],(l=q(f,v))&&t.push(e(f)+(h?": ":":")+l));else for(f in v)Object.prototype.hasOwnProperty.call(v,f)&&(l=q(f,v))&&t.push(e(f)+(h?": ":":")+l);l=0===t.length?"{}":h?"{\n"+h+t.join(",\n"+h)+"\n"+k+"}":"{"+t.join(",")+"}";h=k;return l}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(a){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+
1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()});var k=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,h,c,d={"\b":"\\b","\t":"\\t","\n":"\\n",
"\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},b;"function"!==typeof JSON.stringify&&(JSON.stringify=function(a,d,e){var f;c=h="";if("number"===typeof e)for(f=0;f<e;f+=1)c+=" ";else"string"===typeof e&&(c=e);if((b=d)&&"function"!==typeof d&&("object"!==typeof d||"number"!==typeof d.length))throw Error("JSON.stringify");return q("",{"":a})});"function"!==typeof JSON.parse&&(JSON.parse=function(a,b){function c(a,d){var e,f,h=a[d];if(h&&"object"===typeof h)for(e in h)Object.prototype.hasOwnProperty.call(h,
e)&&(f=c(h,e),void 0!==f?h[e]=f:delete h[e]);return b.call(a,d,h)}var d;a=String(a);k.lastIndex=0;k.test(a)&&(a=a.replace(k,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return d=eval("("+a+")"),"function"===typeof b?c({"":d},""):d;throw new SyntaxError("JSON.parse");})})();!function(f,
e){function q(e,c){for(var d,b=[],a=0;a<e.length;++a){var m;if(!(m=n[e[a]]))a:{m=f;for(var g=e[a].split(/[.\/]/),p=0;p<g.length;++p){if(!m[g[p]]){m=void 0;break a}m=m[g[p]]}}if(d=m,!d)throw"module definition dependecy not found: "+e[a];b.push(d)}c.apply(null,b)}function k(f,c,d){if("string"!=typeof f)throw"invalid module definition, module id must be defined and be a string";if(c===e)throw"invalid module definition, dependencies must be specified";if(d===e)throw"invalid module definition, definition function must be specified";
q(c,function(){n[f]=d.apply(null,arguments)})}var n={};k("moxie/core/utils/Basic",[],function(){var e=function(a){return void 0===a?"undefined":null===a?"null":a.nodeType?"node":{}.toString.call(a).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()},c=function(a){return d(arguments,function(f,g){0<g&&d(f,function(d,g){void 0!==d&&(e(a[g])===e(d)&&~b(e(d),["array","object"])?c(a[g],d):a[g]=d)})}),a},d=function(a,b){var c,d;if(a)if("number"===e(a.length))for(d=0,c=a.length;c>d&&!1!==b(a[d],d);d++);else if("object"===
e(a))for(c in a)if(a.hasOwnProperty(c)&&!1===b(a[c],c))break},b=function(a,b){if(b){if(Array.prototype.indexOf)return Array.prototype.indexOf.call(b,a);for(var c=0,d=b.length;d>c;c++)if(b[c]===a)return c}return-1};return{guid:function(){var a=0;return function(b){var c=(new Date).getTime().toString(32),d;for(d=0;5>d;d++)c+=Math.floor(65535*Math.random()).toString(32);return(b||"o_")+c+(a++).toString(32)}}(),typeOf:e,extend:c,each:d,isEmptyObj:function(a){var b;if(!a||"object"!==e(a))return!0;for(b in a)return!1;
return!0},inSeries:function(a,b){function c(f){"function"===e(a[f])&&a[f](function(a){++f<d&&!a?c(f):b(a)})}var d=a.length;"function"!==e(b)&&(b=function(){});a&&a.length||b();c(0)},inParallel:function(a,b){var c=0,e=a.length,f=Array(e);d(a,function(a,d){a(function(a){if(a)return b(a);var h=[].slice.call(arguments);h.shift();f[d]=h;c++;c===e&&(f.unshift(null),b.apply(this,f))})})},inArray:b,arrayDiff:function(a,c){var d=[];"array"!==e(a)&&(a=[a]);"array"!==e(c)&&(c=[c]);for(var f in a)-1===b(a[f],
c)&&d.push(a[f]);return d.length?d:!1},arrayIntersect:function(a,c){var e=[];return d(a,function(a){-1!==b(a,c)&&e.push(a)}),e.length?e:null},toArray:function(a){var b,c=[];for(b=0;b<a.length;b++)c[b]=a[b];return c},trim:function(a){return a?String.prototype.trim?String.prototype.trim.call(a):a.toString().replace(/^\s*/,"").replace(/\s*$/,""):a},sprintf:function(a){var b=[].slice.call(arguments,1);return a.replace(/%[a-z]/g,function(){var a=b.shift();return"undefined"!==e(a)?a:""})},parseSizeStr:function(a){if("string"!=
typeof a)return a;var b={t:1099511627776,g:1073741824,m:1048576,k:1024},c;return a=/^([0-9\.]+)([tmgk]?)$/.exec(a.toLowerCase().replace(/[^0-9\.tmkg]/g,"")),c=a[2],a=+a[1],b.hasOwnProperty(c)&&(a*=b[c]),Math.floor(a)}}});k("moxie/core/utils/Env",["moxie/core/utils/Basic"],function(e){var c=function(a){var b={has:function(a,b){return-1!==b.toLowerCase().indexOf(a.toLowerCase())},lowerize:function(a){return a.toLowerCase()}},c=function(){for(var b,c=0,d,e,g,f,l,h=arguments;c<h.length;c+=2){l=h[c];var p=
h[c+1];if("undefined"===typeof b)for(g in b={},p)d=p[g],"object"===typeof d?b[d[0]]=a:b[d]=a;for(d=e=0;d<l.length;d++)if(f=l[d].exec(this.getUA())){for(g=0;g<p.length;g++)l=f[++e],d=p[g],"object"===typeof d&&0<d.length?2==d.length?"function"==typeof d[1]?b[d[0]]=d[1].call(this,l):b[d[0]]=d[1]:3==d.length?"function"!==typeof d[1]||d[1].exec&&d[1].test?b[d[0]]=l?l.replace(d[1],d[2]):a:b[d[0]]=l?d[1].call(this,l,d[2]):a:4==d.length&&(b[d[0]]=l?d[3].call(this,l.replace(d[1],d[2])):a):b[d]=l?l:a;break}if(f)break}return b},
d=function(c,d){for(var e in d)if("object"===typeof d[e]&&0<d[e].length)for(var f=0;f<d[e].length;f++){if(b.has(d[e][f],c))return"?"===e?a:e}else if(b.has(d[e],c))return"?"===e?a:e;return c},e={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2E3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",RT:"ARM"},f=[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],["name","version"],[/\s(opr)\/([\w\.]+)/i],
[["name","Opera"],"version"],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi)\/([\w\.-]+)/i],["name","version"],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[["name","IE"],"version"],[/(edge)\/((\d+)?[\w\.]+)/i],["name","version"],[/(yabrowser)\/([\w\.]+)/i],[["name",
"Yandex"],"version"],[/(comodo_dragon)\/([\w\.]+)/i],[["name",/_/g," "],"version"],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i,/(uc\s?browser|qqbrowser)[\/\s]?([\w\.]+)/i],["name","version"],[/(dolfin)\/([\w\.]+)/i],[["name","Dolphin"],"version"],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[["name","Chrome"],"version"],[/XiaoMi\/MiuiBrowser\/([\w\.]+)/i],["version",["name","MIUI Browser"]],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)/i],["version",["name","Android Browser"]],
[/FBAV\/([\w\.]+);/i],["version",["name","Facebook"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],["version",["name","Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],["version","name"],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],["name",["version",d,{"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],["name","version"],[/(navigator|netscape)\/([\w\.-]+)/i],[["name",
"Netscape"],"version"],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],["name","version"]],h=[[/windows.+\sedge\/([\w\.]+)/i],["version",["name",
"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],["name","version"],[/rv\:([\w\.]+).*(gecko)/i],["version","name"]],k=[[/microsoft\s(windows)\s(vista|xp)/i],["name","version"],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],["name",["version",d,e]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[["name","Windows"],["version",
d,e]],[/\((bb)(10);/i],[["name","BlackBerry"],"version"],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\os|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],["name","version"],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[["name","Symbian"],"version"],[/\((series40);/i],["name"],[/mozilla.+\(mobile;.+gecko.+firefox/i],[["name","Firefox OS"],"version"],[/(nintendo|playstation)\s([wids3portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,
/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],["name","version"],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[["name","Chromium OS"],"version"],[/(sunos)\s?([\w\.]+\d)*/i],[["name","Solaris"],"version"],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],["name","version"],[/(ip[honead]+)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i],[["name",
"iOS"],["version",/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[["name","Mac OS"],["version",/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],["name","version"]];return function(a){var b=a||(window&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:"");this.getBrowser=function(){return c.apply(this,
f)};this.getEngine=function(){return c.apply(this,h)};this.getOS=function(){return c.apply(this,k)};this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS()}};this.getUA=function(){return b};this.setUA=function(a){return b=a,this};this.setUA(b)}}(),d=function(){var b={define_property:!1,create_canvas:function(){var a=document.createElement("canvas");return!(!a.getContext||!a.getContext("2d"))}(),return_response_type:function(a){try{if(-1!==
e.inArray(a,["","text","document"]))return!0;if(window.XMLHttpRequest){var b=new XMLHttpRequest;if(b.open("get","/"),"responseType"in b)return b.responseType=a,b.responseType!==a?!1:!0}}catch(c){}return!1},use_data_uri:function(){var a=new Image;return a.onload=function(){b.use_data_uri=1===a.width&&1===a.height},setTimeout(function(){a.src="data:image/gif;base64,R0lGODlhAQABAIAAAP8AAAAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw=="},1),!1}(),use_data_uri_over32kb:function(){return b.use_data_uri&&("IE"!==
a.browser||9<=a.version)},use_data_uri_of:function(a){return b.use_data_uri&&33E3>a||b.use_data_uri_over32kb()},use_fileinput:function(){if(navigator.userAgent.match(/(Android (1.0|1.1|1.5|1.6|2.0|2.1))|(Windows Phone (OS 7|8.0))|(XBLWP)|(ZuneWP)|(w(eb)?OSBrowser)|(webOS)|(Kindle\/(1.0|2.0|2.5|3.0))/))return!1;var a=document.createElement("input");return a.setAttribute("type","file"),!a.disabled}};return function(a){var c=[].slice.call(arguments);return c.shift(),"function"===e.typeOf(b[a])?b[a].apply(this,
c):!!b[a]}}(),b=(new c).getResult(),a={can:d,uaParser:c,browser:b.browser.name,version:b.browser.version,os:b.os.name,osVersion:b.os.version,verComp:function(a,b,c){var d=0,e=0,f=0,h={dev:-6,alpha:-5,a:-5,beta:-4,b:-4,RC:-3,rc:-3,"#":-2,p:1,pl:1},d=function(a){return a=(""+a).replace(/[_\-+]/g,"."),a=a.replace(/([^.\d]+)/g,".$1.").replace(/\.{2,}/g,"."),a.length?a.split("."):[-8]};a=d(a);b=d(b);e=Math.max(a.length,b.length);for(d=0;e>d;d++)if(a[d]!=b[d]){if(a[d]=a[d]?isNaN(a[d])?h[a[d]]||-7:parseInt(a[d],
10):0,b[d]=b[d]?isNaN(b[d])?h[b[d]]||-7:parseInt(b[d],10):0,a[d]<b[d]){f=-1;break}if(a[d]>b[d]){f=1;break}}if(!c)return f;switch(c){case ">":case "gt":return 0<f;case ">=":case "ge":return 0<=f;case "<=":case "le":return 0>=f;case "==":case "=":case "eq":return 0===f;case "<>":case "!=":case "ne":return 0!==f;case "":case "<":case "lt":return 0>f;default:return null}},swf_url:"../flash/Moxie.swf",xap_url:"../silverlight/Moxie.xap",global_event_dispatcher:"moxie.core.EventTarget.instance.dispatchEvent"};
return a.OS=a.os,a});k("moxie/core/I18n",["moxie/core/utils/Basic"],function(e){var c={};return{addI18n:function(d){return e.extend(c,d)},translate:function(d){return c[d]||d},_:function(c){return this.translate(c)},sprintf:function(c){var b=[].slice.call(arguments,1);return c.replace(/%[a-z]/g,function(){var a=b.shift();return"undefined"!==e.typeOf(a)?a:""})}}});k("moxie/core/utils/Mime",["moxie/core/utils/Basic","moxie/core/I18n"],function(e,c){var d={mimes:{},extensions:{},addMimeType:function(b){b=
b.split(/,/);var a,c,d;for(a=0;a<b.length;a+=2){d=b[a+1].split(/ /);for(c=0;c<d.length;c++)this.mimes[d[c]]=b[a];this.extensions[b[a]]=d}},extList2mimes:function(b,a){var c,d,f,l,r=[];for(d=0;d<b.length;d++)for(c=b[d].extensions.split(/\s*,\s*/),f=0;f<c.length;f++){if("*"===c[f])return[];if(l=this.mimes[c[f]],l&&-1===e.inArray(l,r)&&r.push(l),a&&/^\w+$/.test(c[f]))r.push("."+c[f]);else if(!l)return[]}return r},mimes2exts:function(b){var a=this,c=[];return e.each(b,function(b){if("*"===b)return c=
[],!1;var d=b.match(/^(\w+)\/(\*|\w+)$/);d&&("*"===d[2]?e.each(a.extensions,function(b,e){RegExp("^"+d[1]+"/").test(e)&&[].push.apply(c,a.extensions[e])}):a.extensions[b]&&[].push.apply(c,a.extensions[b]))}),c},mimes2extList:function(b){var a=[],d=[];return"string"===e.typeOf(b)&&(b=e.trim(b).split(/\s*,\s*/)),d=this.mimes2exts(b),a.push({title:c.translate("Files"),extensions:d.length?d.join(","):"*"}),a.mimes=b,a},getFileExtension:function(b){return(b=b&&b.match(/\.([^.]+)$/))?b[1].toLowerCase():
""},getFileMime:function(b){return this.mimes[this.getFileExtension(b)]||""}};return d.addMimeType("application/msword,doc dot,application/pdf,pdf,application/pgp-signature,pgp,application/postscript,ps ai eps,application/rtf,rtf,application/vnd.ms-excel,xls xlb,application/vnd.ms-powerpoint,ppt pps pot,application/zip,zip,application/x-shockwave-flash,swf swfl,application/vnd.openxmlformats-officedocument.wordprocessingml.document,docx,application/vnd.openxmlformats-officedocument.wordprocessingml.template,dotx,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,xlsx,application/vnd.openxmlformats-officedocument.presentationml.presentation,pptx,application/vnd.openxmlformats-officedocument.presentationml.template,potx,application/vnd.openxmlformats-officedocument.presentationml.slideshow,ppsx,application/x-javascript,js,application/json,json,audio/mpeg,mp3 mpga mpega mp2,audio/x-wav,wav,audio/x-m4a,m4a,audio/ogg,oga ogg,audio/aiff,aiff aif,audio/flac,flac,audio/aac,aac,audio/ac3,ac3,audio/x-ms-wma,wma,image/bmp,bmp,image/gif,gif,image/jpeg,jpg jpeg jpe,image/photoshop,psd,image/png,png,image/svg+xml,svg svgz,image/tiff,tiff tif,text/plain,asc txt text diff log,text/html,htm html xhtml,text/css,css,text/csv,csv,text/rtf,rtf,video/mpeg,mpeg mpg mpe m2v,video/quicktime,qt mov,video/mp4,mp4,video/x-m4v,m4v,video/x-flv,flv,video/x-ms-wmv,wmv,video/avi,avi,video/webm,webm,video/3gpp,3gpp 3gp,video/3gpp2,3g2,video/vnd.rn-realvideo,rv,video/ogg,ogv,video/x-matroska,mkv,application/vnd.oasis.opendocument.formula-template,otf,application/octet-stream,exe"),
d});k("moxie/core/utils/Dom",["moxie/core/utils/Env"],function(e){var c=function(c,b){return c.className?RegExp("(^|\\s+)"+b+"(\\s+|$)").test(c.className):!1};return{get:function(c){return"string"!=typeof c?c:document.getElementById(c)},hasClass:c,addClass:function(d,b){c(d,b)||(d.className=d.className?d.className.replace(/\s+$/,"")+" "+b:b)},removeClass:function(c,b){c.className&&(c.className=c.className.replace(RegExp("(^|\\s+)"+b+"(\\s+|$)"),function(a,b,c){return" "===b&&" "===c?" ":""}))},getStyle:function(c,
b){return c.currentStyle?c.currentStyle[b]:window.getComputedStyle?window.getComputedStyle(c,null)[b]:void 0},getPos:function(c,b){function a(a){var b,c,d=0,e=0;return a&&(c=a.getBoundingClientRect(),b="CSS1Compat"===l.compatMode?l.documentElement:l.body,d=c.left+b.scrollLeft,e=c.top+b.scrollTop),{x:d,y:e}}var f=0,g=0,p,l=document,r;if(b=b||l.body,c&&c.getBoundingClientRect&&"IE"===e.browser&&(!l.documentMode||8>l.documentMode))return p=a(c),r=a(b),{x:p.x-r.x,y:p.y-r.y};for(p=c;p&&p!=b&&p.nodeType;)f+=
p.offsetLeft||0,g+=p.offsetTop||0,p=p.offsetParent;for(p=c.parentNode;p&&p!=b&&p.nodeType;)f-=p.scrollLeft||0,g-=p.scrollTop||0,p=p.parentNode;return{x:f,y:g}},getSize:function(c){return{w:c.offsetWidth||c.clientWidth,h:c.offsetHeight||c.clientHeight}}}});k("moxie/core/Exceptions",["moxie/core/utils/Basic"],function(e){function c(c,b){for(var a in c)if(c[a]===b)return a;return null}return{RuntimeError:function(){function d(a){this.code=a;this.name=c(b,a);this.message=this.name+": RuntimeError "+this.code}
var b={NOT_INIT_ERR:1,NOT_SUPPORTED_ERR:9,JS_ERR:4};return e.extend(d,b),d.prototype=Error.prototype,d}(),OperationNotAllowedException:function(){function c(b){this.code=b;this.name="OperationNotAllowedException"}return e.extend(c,{NOT_ALLOWED_ERR:1}),c.prototype=Error.prototype,c}(),ImageError:function(){function d(a){this.code=a;this.name=c(b,a);this.message=this.name+": ImageError "+this.code}var b={WRONG_FORMAT:1,MAX_RESOLUTION_ERR:2,INVALID_META_ERR:3};return e.extend(d,b),d.prototype=Error.prototype,
d}(),FileException:function(){function d(a){this.code=a;this.name=c(b,a);this.message=this.name+": FileException "+this.code}var b={NOT_FOUND_ERR:1,SECURITY_ERR:2,ABORT_ERR:3,NOT_READABLE_ERR:4,ENCODING_ERR:5,NO_MODIFICATION_ALLOWED_ERR:6,INVALID_STATE_ERR:7,SYNTAX_ERR:8};return e.extend(d,b),d.prototype=Error.prototype,d}(),DOMException:function(){function d(a){this.code=a;this.name=c(b,a);this.message=this.name+": DOMException "+this.code}var b={INDEX_SIZE_ERR:1,DOMSTRING_SIZE_ERR:2,HIERARCHY_REQUEST_ERR:3,
WRONG_DOCUMENT_ERR:4,INVALID_CHARACTER_ERR:5,NO_DATA_ALLOWED_ERR:6,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INUSE_ATTRIBUTE_ERR:10,INVALID_STATE_ERR:11,SYNTAX_ERR:12,INVALID_MODIFICATION_ERR:13,NAMESPACE_ERR:14,INVALID_ACCESS_ERR:15,VALIDATION_ERR:16,TYPE_MISMATCH_ERR:17,SECURITY_ERR:18,NETWORK_ERR:19,ABORT_ERR:20,URL_MISMATCH_ERR:21,QUOTA_EXCEEDED_ERR:22,TIMEOUT_ERR:23,INVALID_NODE_TYPE_ERR:24,DATA_CLONE_ERR:25};return e.extend(d,b),d.prototype=Error.prototype,d}(),EventException:function(){function c(b){this.code=
b;this.name="EventException"}return e.extend(c,{UNSPECIFIED_EVENT_TYPE_ERR:0}),c.prototype=Error.prototype,c}()}});k("moxie/core/EventTarget",["moxie/core/utils/Env","moxie/core/Exceptions","moxie/core/utils/Basic"],function(e,c,d){function b(){var a={};d.extend(this,{uid:null,init:function(){this.uid||(this.uid=d.guid("uid_"))},addEventListener:function(b,c,e,f){var h=this,k;return this.hasOwnProperty("uid")||(this.uid=d.guid("uid_")),b=d.trim(b),/\s/.test(b)?void d.each(b.split(/\s+/),function(a){h.addEventListener(a,
c,e,f)}):(b=b.toLowerCase(),e=parseInt(e,10)||0,k=a[this.uid]&&a[this.uid][b]||[],k.push({fn:c,priority:e,scope:f||this}),a[this.uid]||(a[this.uid]={}),void(a[this.uid][b]=k))},hasEventListener:function(b){return(b=b?a[this.uid]&&a[this.uid][b]:a[this.uid])?b:!1},removeEventListener:function(b,c){b=b.toLowerCase();var e=a[this.uid]&&a[this.uid][b],f;if(e){if(c)for(f=e.length-1;0<=f;f--){if(e[f].fn===c){e.splice(f,1);break}}else e=[];e.length||(delete a[this.uid][b],d.isEmptyObj(a[this.uid])&&delete a[this.uid])}},
removeAllEventListeners:function(){a[this.uid]&&delete a[this.uid]},dispatchEvent:function(b){var e,f,h,r={},k=!0;if("string"!==d.typeOf(b)){if(f=b,"string"!==d.typeOf(f.type))throw new c.EventException(c.EventException.UNSPECIFIED_EVENT_TYPE_ERR);b=f.type;void 0!==f.total&&void 0!==f.loaded&&(r.total=f.total,r.loaded=f.loaded);r.async=f.async||!1}if(-1!==b.indexOf("::")?!function(a){e=a[0];b=a[1]}(b.split("::")):e=this.uid,b=b.toLowerCase(),f=a[e]&&a[e][b]){f.sort(function(a,b){return b.priority-
a.priority});h=[].slice.call(arguments);h.shift();r.type=b;h.unshift(r);var t=[];d.each(f,function(a){h[0].target=a.scope;t.push(r.async?function(b){setTimeout(function(){b(!1===a.fn.apply(a.scope,h))},1)}:function(b){b(!1===a.fn.apply(a.scope,h))})});t.length&&d.inSeries(t,function(a){k=!a})}return k},bind:function(){this.addEventListener.apply(this,arguments)},unbind:function(){this.removeEventListener.apply(this,arguments)},unbindAll:function(){this.removeAllEventListeners.apply(this,arguments)},
trigger:function(){return this.dispatchEvent.apply(this,arguments)},handleEventProps:function(a){var b=this;this.bind(a.join(" "),function(a){var b="on"+a.type.toLowerCase();"function"===d.typeOf(this[b])&&this[b].apply(this,arguments)});d.each(a,function(a){a="on"+a.toLowerCase(a);"undefined"===d.typeOf(b[a])&&(b[a]=null)})}})}return b.instance=new b,b});k("moxie/runtime/Runtime",["moxie/core/utils/Env","moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/EventTarget"],function(e,c,d,b){function a(b,
e,f,h,m){var k=this,n,q=c.guid(e+"_");m=m||"browser";b=b||{};g[q]=this;f=c.extend({access_binary:!1,access_image_binary:!1,display_media:!1,do_cors:!1,drag_and_drop:!1,filter_by_extension:!0,resize_image:!1,report_upload_progress:!1,return_response_headers:!1,return_response_type:!1,return_status_code:!0,send_custom_headers:!1,select_file:!1,select_folder:!1,select_multiple:!0,send_binary_string:!1,send_browser_cookies:!0,send_multipart:!0,slice_blob:!1,stream_upload:!1,summon_file_dialog:!1,upload_filesize:!0,
use_http_method:!0},f);b.preferred_caps&&(m=a.getMode(h,b.preferred_caps,m));n=function(){var a={};return{exec:function(b,c,d,e){return n[c]&&(a[b]||(a[b]={context:this,instance:new n[c]}),a[b].instance[d])?a[b].instance[d].apply(this,e):void 0},removeInstance:function(b){delete a[b]},removeAllInstances:function(){var b=this;c.each(a,function(a,d){"function"===c.typeOf(a.instance.destroy)&&a.instance.destroy.call(a.context);b.removeInstance(d)})}}}();c.extend(this,{initialized:!1,uid:q,type:e,mode:a.getMode(h,
b.required_caps,m),shimid:q+"_container",clients:0,options:b,can:function(b,d,e){e=e||f;if("string"===c.typeOf(b)&&"undefined"===c.typeOf(d)&&(b=a.parseCaps(b)),"object"===c.typeOf(b)){for(var g in b)if(!this.can(g,b[g],e))return!1;return!0}return"function"===c.typeOf(e[b])?e[b].call(this,d):d===e[b]},getShimContainer:function(){var a,b=d.get(this.shimid);return b||(a=this.options.container?d.get(this.options.container):document.body,b=document.createElement("div"),b.id=this.shimid,b.className="moxie-shim moxie-shim-"+
this.type,c.extend(b.style,{position:"absolute",top:"0px",left:"0px",width:"1px",height:"1px",overflow:"hidden"}),a.appendChild(b)),b},getShim:function(){return n},shimExec:function(a,b){var c=[].slice.call(arguments,2);return k.getShim().exec.call(this,this.uid,a,b,c)},exec:function(a,b){var c=[].slice.call(arguments,2);return k[a]&&k[a][b]?k[a][b].apply(this,c):k.shimExec.apply(this,arguments)},destroy:function(){if(k){var a=d.get(this.shimid);a&&a.parentNode.removeChild(a);n&&n.removeAllInstances();
this.unbindAll();delete g[this.uid];q=k=n=this.uid=null}}});this.mode&&b.required_caps&&!this.can(b.required_caps)&&(this.mode=!1)}var f={},g={};return a.order="html5,flash,silverlight,html4",a.getRuntime=function(a){return g[a]?g[a]:!1},a.addConstructor=function(a,c){c.prototype=b.instance;f[a]=c},a.getConstructor=function(a){return f[a]||null},a.getInfo=function(b){var c=a.getRuntime(b);return c?{uid:c.uid,type:c.type,mode:c.mode,can:function(){return c.can.apply(c,arguments)}}:null},a.parseCaps=
function(a){var b={};return"string"!==c.typeOf(a)?a||{}:(c.each(a.split(","),function(a){b[a]=!0}),b)},a.can=function(b,c){var d,e=a.getConstructor(b),f;return e?(d=new e({required_caps:c}),f=d.mode,d.destroy(),!!f):!1},a.thatCan=function(b,c){var d=(c||a.order).split(/\s*,\s*/),e;for(e in d)if(a.can(d[e],b))return d[e];return null},a.getMode=function(a,b,d){var e=null;if("undefined"===c.typeOf(d)&&(d="browser"),b&&!c.isEmptyObj(a)){if(c.each(b,function(b,d){if(a.hasOwnProperty(d)){var f=a[d](b);
if("string"==typeof f&&(f=[f]),e){if(!(e=c.arrayIntersect(e,f)))return e=!1}else e=f}}),e)return-1!==c.inArray(d,e)?d:e[0];if(!1===e)return!1}return d},a.capTrue=function(){return!0},a.capFalse=function(){return!1},a.capTest=function(a){return function(){return!!a}},a});k("moxie/runtime/RuntimeClient",["moxie/core/utils/Env","moxie/core/Exceptions","moxie/core/utils/Basic","moxie/runtime/Runtime"],function(e,c,d,b){return function(){var a;d.extend(this,{connectRuntime:function(e){function f(d){var l,
k;return d.length?(l=d.shift().toLowerCase(),(k=b.getConstructor(l))?(a=new k(e),a.bind("Init",function(){a.initialized=!0;setTimeout(function(){a.clients++;h.trigger("RuntimeInit",a)},1)}),a.bind("Error",function(){a.destroy();f(d)}),a.mode?void a.init():void a.trigger("Error")):void f(d)):(h.trigger("RuntimeError",new c.RuntimeError(c.RuntimeError.NOT_INIT_ERR)),void(a=null))}var h=this,l;if("string"===d.typeOf(e)?l=e:"string"===d.typeOf(e.ruid)&&(l=e.ruid),l){if(a=b.getRuntime(l))return a.clients++,
a;throw new c.RuntimeError(c.RuntimeError.NOT_INIT_ERR);}f((e.runtime_order||b.order).split(/\s*,\s*/))},disconnectRuntime:function(){a&&0>=--a.clients&&a.destroy();a=null},getRuntime:function(){return a&&a.uid?a:a=null},exec:function(){return a?a.exec.apply(this,arguments):null}})}});k("moxie/file/FileInput","moxie/core/utils/Basic moxie/core/utils/Env moxie/core/utils/Mime moxie/core/utils/Dom moxie/core/Exceptions moxie/core/EventTarget moxie/core/I18n moxie/runtime/Runtime moxie/runtime/RuntimeClient".split(" "),
function(e,c,d,b,a,f,g,p,l){function r(c){var f=this,m;if(-1!==e.inArray(e.typeOf(c),["string","node"])&&(c={browse_button:c}),m=b.get(c.browse_button),!m)throw new a.DOMException(a.DOMException.NOT_FOUND_ERR);m={accept:[{title:g.translate("All Files"),extensions:"*"}],name:"file",multiple:!1,required_caps:!1,container:m.parentNode||document.body};c=e.extend({},m,c);"string"==typeof c.required_caps&&(c.required_caps=p.parseCaps(c.required_caps));"string"==typeof c.accept&&(c.accept=d.mimes2extList(c.accept));
(m=b.get(c.container))||(m=document.body);"static"===b.getStyle(m,"position")&&(m.style.position="relative");m=m=null;l.call(f);e.extend(f,{uid:e.guid("uid_"),ruid:null,shimid:null,files:null,init:function(){f.bind("RuntimeInit",function(a,d){f.ruid=d.uid;f.shimid=d.shimid;f.bind("Ready",function(){f.trigger("Refresh")},999);f.bind("Refresh",function(){var a,f,g,l;g=b.get(c.browse_button);l=b.get(d.shimid);g&&(a=b.getPos(g,b.get(c.container)),f=b.getSize(g),l&&e.extend(l.style,{top:a.y+"px",left:a.x+
"px",width:f.w+"px",height:f.h+"px"}))});d.exec.call(f,"FileInput","init",c)});f.connectRuntime(e.extend({},c,{required_caps:{select_file:!0}}))},disable:function(a){var b=this.getRuntime();b&&b.exec.call(this,"FileInput","disable","undefined"===e.typeOf(a)?!0:a)},refresh:function(){f.trigger("Refresh")},destroy:function(){var a=this.getRuntime();a&&(a.exec.call(this,"FileInput","destroy"),this.disconnectRuntime());"array"===e.typeOf(this.files)&&e.each(this.files,function(a){a.destroy()});this.files=
null;this.unbindAll()}});this.handleEventProps(k)}var k="ready change cancel mouseenter mouseleave mousedown mouseup".split(" ");return r.prototype=f.instance,r});k("moxie/core/utils/Encode",[],function(){var e=function(c){return unescape(encodeURIComponent(c))},c=function(c){return decodeURIComponent(escape(c))};return{utf8_encode:e,utf8_decode:c,atob:function(d,b){if("function"==typeof window.atob)return b?c(window.atob(d)):window.atob(d);var a,e,f,h,l,r=0,k=0,t="",n=[];if(!d)return d;d+="";do a=
"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(d.charAt(r++)),e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(d.charAt(r++)),h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(d.charAt(r++)),l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(d.charAt(r++)),f=a<<18|e<<12|h<<6|l,a=f>>16&255,e=f>>8&255,f&=255,64==h?n[k++]=String.fromCharCode(a):64==l?n[k++]=String.fromCharCode(a,e):n[k++]=
String.fromCharCode(a,e,f);while(r<d.length);return t=n.join(""),b?c(t):t},btoa:function(c,b){if(b&&(c=e(c)),"function"==typeof window.btoa)return window.btoa(c);var a,f,g,p,l=0,r=0,k="",k=[];if(!c)return c;do a=c.charCodeAt(l++),f=c.charCodeAt(l++),g=c.charCodeAt(l++),p=a<<16|f<<8|g,a=p>>18&63,f=p>>12&63,g=p>>6&63,p&=63,k[r++]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(a)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(f)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(g)+
"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(p);while(l<c.length);k=k.join("");l=c.length%3;return(l?k.slice(0,l-3):k)+"===".slice(l||3)}}});k("moxie/file/Blob",["moxie/core/utils/Basic","moxie/core/utils/Encode","moxie/runtime/RuntimeClient"],function(e,c,d){function b(f,g){function p(c,d,f){var g,m=a[this.uid];return"string"===e.typeOf(m)&&m.length?(g=new b(null,{type:f,size:d-c}),g.detach(m.substr(c,g.size)),g):null}d.call(this);f&&this.connectRuntime(f);g?"string"===
e.typeOf(g)&&(g={data:g}):g={};e.extend(this,{uid:g.uid||e.guid("uid_"),ruid:f,size:g.size||0,type:g.type||"",slice:function(a,b,c){return this.isDetached()?p.apply(this,arguments):this.getRuntime().exec.call(this,"Blob","slice",this.getSource(),a,b,c)},getSource:function(){return a[this.uid]?a[this.uid]:null},detach:function(b){if(this.ruid&&(this.getRuntime().exec.call(this,"Blob","destroy"),this.disconnectRuntime(),this.ruid=null),b=b||"","data:"==b.substr(0,5)){var d=b.indexOf(";base64,");this.type=
b.substring(5,d);b=c.atob(b.substring(d+8))}this.size=b.length;a[this.uid]=b},isDetached:function(){return!this.ruid&&"string"===e.typeOf(a[this.uid])},destroy:function(){this.detach();delete a[this.uid]}});g.data?this.detach(g.data):a[this.uid]=g}var a={};return b});k("moxie/file/File",["moxie/core/utils/Basic","moxie/core/utils/Mime","moxie/file/Blob"],function(e,c,d){function b(a,b){b||(b={});d.apply(this,arguments);this.type||(this.type=c.getFileMime(b.name));var f;b.name?(f=b.name.replace(/\\/g,
"/"),f=f.substr(f.lastIndexOf("/")+1)):this.type&&(f=this.type.split("/")[0],f=e.guid((""!==f?f:"file")+"_"),c.extensions[this.type]&&(f+="."+c.extensions[this.type][0]));e.extend(this,{name:f||e.guid("file_"),relativePath:"",lastModifiedDate:b.lastModifiedDate||(new Date).toLocaleString()})}return b.prototype=d.prototype,b});k("moxie/file/FileDrop","moxie/core/I18n moxie/core/utils/Dom moxie/core/Exceptions moxie/core/utils/Basic moxie/core/utils/Env moxie/file/File moxie/runtime/RuntimeClient moxie/core/EventTarget moxie/core/utils/Mime".split(" "),
function(e,c,d,b,a,f,g,p,l){function r(a){var d=this,f;"string"==typeof a&&(a={drop_zone:a});f={accept:[{title:e.translate("All Files"),extensions:"*"}],required_caps:{drag_and_drop:!0}};a="object"==typeof a?b.extend({},f,a):f;a.container=c.get(a.drop_zone)||document.body;"static"===c.getStyle(a.container,"position")&&(a.container.style.position="relative");"string"==typeof a.accept&&(a.accept=l.mimes2extList(a.accept));g.call(d);b.extend(d,{uid:b.guid("uid_"),ruid:null,files:null,init:function(){d.bind("RuntimeInit",
function(b,c){d.ruid=c.uid;c.exec.call(d,"FileDrop","init",a);d.dispatchEvent("ready")});d.connectRuntime(a)},destroy:function(){var a=this.getRuntime();a&&(a.exec.call(this,"FileDrop","destroy"),this.disconnectRuntime());this.files=null;this.unbindAll()}});this.handleEventProps(k)}var k=["ready","dragenter","dragleave","drop","error"];return r.prototype=p.instance,r});k("moxie/file/FileReader","moxie/core/utils/Basic moxie/core/utils/Encode moxie/core/Exceptions moxie/core/EventTarget moxie/file/Blob moxie/runtime/RuntimeClient".split(" "),
function(e,c,d,b,a,f){function g(){function b(e,f){if(this.trigger("loadstart"),this.readyState===g.LOADING)return this.trigger("error",new d.DOMException(d.DOMException.INVALID_STATE_ERR)),void this.trigger("loadend");if(!(f instanceof a))return this.trigger("error",new d.DOMException(d.DOMException.NOT_FOUND_ERR)),void this.trigger("loadend");if(this.result=null,this.readyState=g.LOADING,f.isDetached()){var h=f.getSource();switch(e){case "readAsText":case "readAsBinaryString":this.result=h;break;
case "readAsDataURL":this.result="data:"+f.type+";base64,"+c.btoa(h)}this.readyState=g.DONE;this.trigger("load");this.trigger("loadend")}else this.connectRuntime(f.ruid),this.exec("FileReader","read",e,f)}f.call(this);e.extend(this,{uid:e.guid("uid_"),readyState:g.EMPTY,result:null,error:null,readAsBinaryString:function(a){b.call(this,"readAsBinaryString",a)},readAsDataURL:function(a){b.call(this,"readAsDataURL",a)},readAsText:function(a){b.call(this,"readAsText",a)},abort:function(){this.result=
null;-1===e.inArray(this.readyState,[g.EMPTY,g.DONE])&&(this.readyState===g.LOADING&&(this.readyState=g.DONE),this.exec("FileReader","abort"),this.trigger("abort"),this.trigger("loadend"))},destroy:function(){this.abort();this.exec("FileReader","destroy");this.disconnectRuntime();this.unbindAll()}});this.handleEventProps(p);this.bind("Error",function(a,b){this.readyState=g.DONE;this.error=b},999);this.bind("Load",function(a){this.readyState=g.DONE},999)}var p="loadstart progress load abort error loadend".split(" ");
return g.EMPTY=0,g.LOADING=1,g.DONE=2,g.prototype=b.instance,g});k("moxie/core/utils/Url",[],function(){var e=function(c,d){for(var b="source scheme authority userInfo user pass host port relative path directory file query fragment".split(" "),a=b.length,f={http:80,https:443},g={},p=/^(?:([^:\/?#]+):)?(?:\/\/()(?:(?:()(?:([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?))?()(?:(()(?:(?:[^?#\/]*\/)*)()(?:[^?#]*))(?:\\?([^#]*))?(?:#(.*))?)/.exec(c||"");a--;)p[a]&&(g[b[a]]=p[a]);g.scheme||(d&&"string"!=
typeof d||(d=e(d||document.location.href)),g.scheme=d.scheme,g.host=d.host,g.port=d.port,b="",/^[^\/]/.test(g.path)&&(b=d.path,b=/\/[^\/]*\.[^\/]*$/.test(b)?b.replace(/\/[^\/]+$/,"/"):b.replace(/\/?$/,"/")),g.path=b+(g.path||""));return g.port||(g.port=f[g.scheme]||80),g.port=parseInt(g.port,10),g.path||(g.path="/"),delete g.source,g};return{parseUrl:e,resolveUrl:function(c){c="object"==typeof c?c:e(c);return c.scheme+"://"+c.host+(c.port!=={http:80,https:443}[c.scheme]?":"+c.port:"")+c.path+(c.query?
c.query:"")},hasSameOrigin:function(c){function d(b){return[b.scheme,b.host,b.port].join("/")}return"string"==typeof c&&(c=e(c)),d(e())===d(c)}}});k("moxie/runtime/RuntimeTarget",["moxie/core/utils/Basic","moxie/runtime/RuntimeClient","moxie/core/EventTarget"],function(e,c,d){function b(){this.uid=e.guid("uid_");c.call(this);this.destroy=function(){this.disconnectRuntime();this.unbindAll()}}return b.prototype=d.instance,b});k("moxie/file/FileReaderSync",["moxie/core/utils/Basic","moxie/runtime/RuntimeClient",
"moxie/core/utils/Encode"],function(e,c,d){return function(){function b(a,b){if(!b.isDetached()){var c=this.connectRuntime(b.ruid).exec.call(this,"FileReaderSync","read",a,b);return this.disconnectRuntime(),c}c=b.getSource();switch(a){case "readAsBinaryString":return c;case "readAsDataURL":return"data:"+b.type+";base64,"+d.btoa(c);case "readAsText":for(var e="",f=0,h=c.length;h>f;f++)e+=String.fromCharCode(c[f]);return e}}c.call(this);e.extend(this,{uid:e.guid("uid_"),readAsBinaryString:function(a){return b.call(this,
"readAsBinaryString",a)},readAsDataURL:function(a){return b.call(this,"readAsDataURL",a)},readAsText:function(a){return b.call(this,"readAsText",a)}})}});k("moxie/xhr/FormData",["moxie/core/Exceptions","moxie/core/utils/Basic","moxie/file/Blob"],function(e,c,d){return function(){var b,a=[];c.extend(this,{append:function(e,f){var h=this,l=c.typeOf(f);f instanceof d?b={name:e,value:f}:"array"===l?(e+="[]",c.each(f,function(a){h.append(e,a)})):"object"===l?c.each(f,function(a,b){h.append(e+"["+b+"]",
a)}):"null"===l||"undefined"===l||"number"===l&&isNaN(f)?h.append(e,"false"):a.push({name:e,value:f.toString()})},hasBlob:function(){return!!this.getBlob()},getBlob:function(){return b&&b.value||null},getBlobName:function(){return b&&b.name||null},each:function(d){c.each(a,function(a){d(a.value,a.name)});b&&d(b.value,b.name)},destroy:function(){b=null;a=[]}})}});k("moxie/xhr/XMLHttpRequest","moxie/core/utils/Basic moxie/core/Exceptions moxie/core/EventTarget moxie/core/utils/Encode moxie/core/utils/Url moxie/runtime/Runtime moxie/runtime/RuntimeTarget moxie/file/Blob moxie/file/FileReaderSync moxie/xhr/FormData moxie/core/utils/Env moxie/core/utils/Mime".split(" "),
function(e,c,d,b,a,f,g,p,l,r,k,n){function v(){this.uid=e.guid("uid_")}function u(){function d(a,b){return B.hasOwnProperty(a)?1===arguments.length?k.can("define_property")?B[a]:D[a]:void(k.can("define_property")?B[a]=b:D[a]=b):void 0}function l(a){function b(){J&&(J.destroy(),J=null);p.dispatchEvent("loadend");p=null}function c(f){J.bind("LoadStart",function(a){d("readyState",u.LOADING);p.dispatchEvent("readystatechange");p.dispatchEvent(a);S&&p.upload.dispatchEvent(a)});J.bind("Progress",function(a){d("readyState")!==
u.LOADING&&(d("readyState",u.LOADING),p.dispatchEvent("readystatechange"));p.dispatchEvent(a)});J.bind("UploadProgress",function(a){S&&p.upload.dispatchEvent({type:"progress",lengthComputable:!1,total:a.total,loaded:a.loaded})});J.bind("Load",function(a){d("readyState",u.DONE);d("status",Number(f.exec.call(J,"XMLHttpRequest","getStatus")||0));d("statusText",q[d("status")]||"");d("response",f.exec.call(J,"XMLHttpRequest","getResponse",d("responseType")));~e.inArray(d("responseType"),["text",""])?d("responseText",
d("response")):"document"===d("responseType")&&d("responseXML",d("response"));Q=f.exec.call(J,"XMLHttpRequest","getAllResponseHeaders");p.dispatchEvent("readystatechange");0<d("status")?(S&&p.upload.dispatchEvent(a),p.dispatchEvent(a)):(R=!0,p.dispatchEvent("error"));b()});J.bind("Abort",function(a){p.dispatchEvent(a);b()});J.bind("Error",function(a){R=!0;d("readyState",u.DONE);p.dispatchEvent("readystatechange");T=!0;p.dispatchEvent(a);b()});f.exec.call(J,"XMLHttpRequest","send",{url:x,method:H,
async:G,user:E,password:N,headers:s,mimeType:I,encoding:O,responseType:p.responseType,withCredentials:p.withCredentials,options:K},a)}var p=this;(new Date).getTime();J=new g;"string"==typeof K.required_caps&&(K.required_caps=f.parseCaps(K.required_caps));K.required_caps=e.extend({},K.required_caps,{return_response_type:p.responseType});a instanceof r&&(K.required_caps.send_multipart=!0);e.isEmptyObj(s)||(K.required_caps.send_custom_headers=!0);U||(K.required_caps.do_cors=!0);K.ruid?c(J.connectRuntime(K)):
(J.bind("RuntimeInit",function(a,b){c(b)}),J.bind("RuntimeError",function(a,b){p.dispatchEvent("RuntimeError",b)}),J.connectRuntime(K))}var D=this,B={timeout:0,readyState:u.UNSENT,withCredentials:!1,status:0,statusText:"",responseType:"",responseXML:null,responseText:null,response:null},G=!0,x,H,s={},E,N,O=null,I=null,M=!1,F=!1,S=!1,T=!1,R=!1,U=!1,K={},J,Q="",P;e.extend(this,B,{uid:e.guid("uid_"),upload:new v,open:function(f,g,l,m,p){var r;if(!f||!g)throw new c.DOMException(c.DOMException.SYNTAX_ERR);
if(/[\u0100-\uffff]/.test(f)||b.utf8_encode(f)!==f)throw new c.DOMException(c.DOMException.SYNTAX_ERR);if(~e.inArray(f.toUpperCase(),"CONNECT DELETE GET HEAD OPTIONS POST PUT TRACE TRACK".split(" "))&&(H=f.toUpperCase()),~e.inArray(H,["CONNECT","TRACE","TRACK"]))throw new c.DOMException(c.DOMException.SECURITY_ERR);if(g=b.utf8_encode(g),r=a.parseUrl(g),U=a.hasSameOrigin(r),x=a.resolveUrl(g),(m||p)&&!U)throw new c.DOMException(c.DOMException.INVALID_ACCESS_ERR);if(E=m||r.user,N=p||r.pass,G=l||!0,!1===
G&&(d("timeout")||d("withCredentials")||""!==d("responseType")))throw new c.DOMException(c.DOMException.INVALID_ACCESS_ERR);M=!G;F=!1;s={};d("responseText","");d("responseXML",null);d("response",null);d("status",0);d("statusText","");d("readyState",u.OPENED);this.dispatchEvent("readystatechange")},setRequestHeader:function(a,f){if(d("readyState")!==u.OPENED||F)throw new c.DOMException(c.DOMException.INVALID_STATE_ERR);if(/[\u0100-\uffff]/.test(a)||b.utf8_encode(a)!==a)throw new c.DOMException(c.DOMException.SYNTAX_ERR);
return a=e.trim(a).toLowerCase(),~e.inArray(a,"accept-charset accept-encoding access-control-request-headers access-control-request-method connection content-length cookie cookie2 content-transfer-encoding date expect host keep-alive origin referer te trailer transfer-encoding upgrade user-agent via".split(" "))||/^(proxy\-|sec\-)/.test(a)?!1:(s[a]?s[a]+=", "+f:s[a]=f,!0)},getAllResponseHeaders:function(){return Q||""},getResponseHeader:function(a){return a=a.toLowerCase(),R||~e.inArray(a,["set-cookie",
"set-cookie2"])?null:Q&&""!==Q&&(P||(P={},e.each(Q.split(/\r\n/),function(a){a=a.split(/:\s+/);2===a.length&&(a[0]=e.trim(a[0]),P[a[0].toLowerCase()]={header:a[0],value:e.trim(a[1])})})),P.hasOwnProperty(a))?P[a].header+": "+P[a].value:null},overrideMimeType:function(a){var b;if(~e.inArray(d("readyState"),[u.LOADING,u.DONE]))throw new c.DOMException(c.DOMException.INVALID_STATE_ERR);if(a=e.trim(a.toLowerCase()),/;/.test(a)&&(b=a.match(/^([^;]+)(?:;\scharset\=)?(.*)$/))&&(a=b[1]),!n.mimes[a])throw new c.DOMException(c.DOMException.SYNTAX_ERR);
},send:function(a,d){if(K="string"===e.typeOf(d)?{ruid:d}:d?d:{},this.readyState!==u.OPENED||F)throw new c.DOMException(c.DOMException.INVALID_STATE_ERR);if(a instanceof p)K.ruid=a.ruid,I=a.type||"application/octet-stream";else if(a instanceof r){if(a.hasBlob()){var f=a.getBlob();K.ruid=f.ruid;I=f.type||"application/octet-stream"}}else"string"==typeof a&&(O="UTF-8",I="text/plain;charset=UTF-8",a=b.utf8_encode(a));this.withCredentials||(this.withCredentials=K.required_caps&&K.required_caps.send_browser_cookies&&
!U);S=!M&&this.upload.hasEventListener();R=!1;T=!a;M||(F=!0);l.call(this,a)},abort:function(){if(R=!0,M=!1,~e.inArray(d("readyState"),[u.UNSENT,u.OPENED,u.DONE]))d("readyState",u.UNSENT);else{if(d("readyState",u.DONE),F=!1,!J)throw new c.DOMException(c.DOMException.INVALID_STATE_ERR);J.getRuntime().exec.call(J,"XMLHttpRequest","abort",T);T=!0}},destroy:function(){J&&("function"===e.typeOf(J.destroy)&&J.destroy(),J=null);this.unbindAll();this.upload&&(this.upload.unbindAll(),this.upload=null)}});this.handleEventProps(w.concat(["readystatechange"]));
this.upload.handleEventProps(w)}var q={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",306:"Reserved",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",
405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",426:"Upgrade Required",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",
504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",510:"Not Extended"};v.prototype=d.instance;var w="loadstart progress abort error load timeout loadend".split(" ");return u.UNSENT=0,u.OPENED=1,u.HEADERS_RECEIVED=2,u.LOADING=3,u.DONE=4,u.prototype=d.instance,u});k("moxie/runtime/Transporter",["moxie/core/utils/Basic","moxie/core/utils/Encode","moxie/runtime/RuntimeClient","moxie/core/EventTarget"],function(e,c,d,b){function a(){function b(c,
d){var m=this;l=d;m.bind("TransportingProgress",function(b){n=b.loaded;k>n&&-1===e.inArray(m.state,[a.IDLE,a.DONE])&&f.call(m)},999);m.bind("TransportingComplete",function(){n=k;m.state=a.DONE;r=null;m.result=l.exec.call(m,"Transporter","getAsBlob",c||"")},999);m.state=a.BUSY;m.trigger("TransportingStarted");f.call(m)}function f(){var a;a=k-n;q>a&&(q=a);a=c.btoa(r.substr(n,q));l.exec.call(this,"Transporter","receive",a,k)}var p,l,r,k,n,q;d.call(this);e.extend(this,{uid:e.guid("uid_"),state:a.IDLE,
result:null,transport:function(a,c,d){var f=this;d=e.extend({chunk_size:204798},d);(p=d.chunk_size%3)&&(d.chunk_size+=3-p);q=d.chunk_size;k=n=0;r=this.result=null;if(r=a,k=a.length,"string"===e.typeOf(d)||d.ruid)b.call(f,c,this.connectRuntime(d));else{var g=function(a,d){f.unbind("RuntimeInit",g);b.call(f,c,d)};this.bind("RuntimeInit",g);this.connectRuntime(d)}},abort:function(){this.state=a.IDLE;l&&(l.exec.call(this,"Transporter","clear"),this.trigger("TransportingAborted"));k=n=0;r=this.result=
null},destroy:function(){this.unbindAll();l=null;this.disconnectRuntime();k=n=0;r=this.result=null}})}return a.IDLE=0,a.BUSY=1,a.DONE=2,a.prototype=b.instance,a});k("moxie/image/Image","moxie/core/utils/Basic moxie/core/utils/Dom moxie/core/Exceptions moxie/file/FileReaderSync moxie/xhr/XMLHttpRequest moxie/runtime/Runtime moxie/runtime/RuntimeClient moxie/runtime/Transporter moxie/core/utils/Env moxie/core/EventTarget moxie/file/Blob moxie/file/File moxie/core/utils/Encode".split(" "),function(e,
c,d,b,a,f,g,p,l,r,k,n,q){function u(){function b(a){var c=e.typeOf(a);try{if(a instanceof u){if(!a.size)throw new d.DOMException(d.DOMException.INVALID_STATE_ERR);r.apply(this,arguments)}else if(a instanceof k){if(!~e.inArray(a.type,["image/jpeg","image/png"]))throw new d.ImageError(d.ImageError.WRONG_FORMAT);y.apply(this,arguments)}else if(-1!==e.inArray(c,["blob","file"]))b.call(this,new n(null,a),arguments[1]);else if("string"===c)"data:"===a.substr(0,5)?b.call(this,new k(null,{data:a}),arguments[1]):
D.apply(this,arguments);else{if("node"!==c||"img"!==a.nodeName.toLowerCase())throw new d.DOMException(d.DOMException.TYPE_MISMATCH_ERR);b.call(this,a.src,arguments[1])}}catch(f){this.trigger("error",f.code)}}function r(a,b){var c=this.connectRuntime(a.ruid);this.ruid=c.uid;c.exec.call(this,"Image","loadFromImage",a,"undefined"===e.typeOf(b)?!0:b)}function y(a,b){function c(b){d.ruid=b.uid;b.exec.call(d,"Image","loadFromBlob",a)}var d=this;d.name=a.name||"";a.isDetached()?(this.bind("RuntimeInit",
function(a,b){c(b)}),b&&"string"==typeof b.required_caps&&(b.required_caps=f.parseCaps(b.required_caps)),this.connectRuntime(e.extend({required_caps:{access_image_binary:!0,resize_image:!0}},b))):c(this.connectRuntime(a.ruid))}function D(b,c){var d=this,e;e=new a;e.open("get",b);e.responseType="blob";e.onprogress=function(a){d.trigger(a)};e.onload=function(){y.call(d,e.response,!0)};e.onerror=function(a){d.trigger(a)};e.onloadend=function(){e.destroy()};e.bind("RuntimeError",function(a,b){d.trigger("RuntimeError",
b)});e.send(null,c)}g.call(this);e.extend(this,{uid:e.guid("uid_"),ruid:null,name:"",size:0,width:0,height:0,type:"",meta:{},clone:function(){this.load.apply(this,arguments)},load:function(){b.apply(this,arguments)},downsize:function(a,b,c,f){var g={width:this.width,height:this.height,type:this.type||"image/jpeg",quality:90,crop:!1,preserveHeaders:!0,resample:!1};a="object"==typeof a?e.extend(g,a):e.extend(g,{width:a,height:b,crop:c,preserveHeaders:f});try{if(!this.size)throw new d.DOMException(d.DOMException.INVALID_STATE_ERR);
if(this.width>u.MAX_RESIZE_WIDTH||this.height>u.MAX_RESIZE_HEIGHT)throw new d.ImageError(d.ImageError.MAX_RESOLUTION_ERR);this.exec("Image","downsize",a.width,a.height,a.crop,a.preserveHeaders)}catch(l){this.trigger("error",l.code)}},crop:function(a,b,c){this.downsize(a,b,!0,c)},getAsCanvas:function(){if(!l.can("create_canvas"))throw new d.RuntimeError(d.RuntimeError.NOT_SUPPORTED_ERR);return this.connectRuntime(this.ruid).exec.call(this,"Image","getAsCanvas")},getAsBlob:function(a,b){if(!this.size)throw new d.DOMException(d.DOMException.INVALID_STATE_ERR);
return this.exec("Image","getAsBlob",a||"image/jpeg",b||90)},getAsDataURL:function(a,b){if(!this.size)throw new d.DOMException(d.DOMException.INVALID_STATE_ERR);return this.exec("Image","getAsDataURL",a||"image/jpeg",b||90)},getAsBinaryString:function(a,b){var c=this.getAsDataURL(a,b);return q.atob(c.substring(c.indexOf("base64,")+7))},embed:function(a,b){function f(b,c){var r=this;if(l.can("create_canvas")){var k=r.getAsCanvas();if(k)return a.appendChild(k),k=null,r.destroy(),void g.trigger("embedded")}k=
r.getAsDataURL(b,c);if(!k)throw new d.ImageError(d.ImageError.WRONG_FORMAT);if(l.can("use_data_uri_of",k.length))a.innerHTML='<img src="'+k+'" width="'+r.width+'" height="'+r.height+'" />',r.destroy(),g.trigger("embedded");else{var n=new p;n.bind("TransportingComplete",function(){m=g.connectRuntime(this.result.ruid);g.bind("Embedded",function(){e.extend(m.getShimContainer().style,{top:"0px",left:"0px",width:r.width+"px",height:r.height+"px"});m=null},999);m.exec.call(g,"ImageView","display",this.result.uid,
width,height);r.destroy()});n.transport(q.atob(k.substring(k.indexOf("base64,")+7)),b,{required_caps:{display_media:!0},runtime_order:"flash,silverlight",container:a})}}var g=this,m;b=e.extend({width:this.width,height:this.height,type:this.type||"image/jpeg",quality:90},b||{});try{if(!(a=c.get(a)))throw new d.DOMException(d.DOMException.INVALID_NODE_TYPE_ERR);if(!this.size)throw new d.DOMException(d.DOMException.INVALID_STATE_ERR);this.width>u.MAX_RESIZE_WIDTH||this.height>u.MAX_RESIZE_HEIGHT;var r=
new u;return r.bind("Resize",function(){f.call(this,b.type,b.quality)}),r.bind("Load",function(){r.downsize(b)}),this.meta.thumb&&this.meta.thumb.width>=b.width&&this.meta.thumb.height>=b.height?r.load(this.meta.thumb.data):r.clone(this,!1),r}catch(k){this.trigger("error",k.code)}},destroy:function(){this.ruid&&(this.getRuntime().exec.call(this,"Image","destroy"),this.disconnectRuntime());this.unbindAll()}});this.handleEventProps(A);this.bind("Load Resize",function(){var a=void 0,a=this.exec("Image",
"getInfo");this.size=a.size;this.width=a.width;this.height=a.height;this.type=a.type;this.meta=a.meta;""===this.name&&(this.name=a.name)},999)}var A=["progress","load","error","resize","embedded"];return u.MAX_RESIZE_WIDTH=8192,u.MAX_RESIZE_HEIGHT=8192,u.prototype=r.instance,u});k("moxie/runtime/html5/Runtime",["moxie/core/utils/Basic","moxie/core/Exceptions","moxie/runtime/Runtime","moxie/core/utils/Env"],function(e,c,d,b){var a={};return d.addConstructor("html5",function(c,f,p){var l=this,r=d.capTest,
k=d.capTrue;p=e.extend({access_binary:r(window.FileReader||window.File&&window.File.getAsDataURL),access_image_binary:function(){return l.can("access_binary")&&!!a.Image},display_media:r(b.can("create_canvas")||b.can("use_data_uri_over32kb")),do_cors:r(window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest),drag_and_drop:r(function(){var a=document.createElement("div");return("draggable"in a||"ondragstart"in a&&"ondrop"in a)&&("IE"!==b.browser||b.verComp(b.version,9,">"))}()),filter_by_extension:r("Chrome"===
b.browser&&b.verComp(b.version,28,">=")||"IE"===b.browser&&b.verComp(b.version,10,">=")||"Safari"===b.browser&&b.verComp(b.version,7,">=")),return_response_headers:k,return_response_type:function(a){return"json"===a&&window.JSON?!0:b.can("return_response_type",a)},return_status_code:k,report_upload_progress:r(window.XMLHttpRequest&&(new XMLHttpRequest).upload),resize_image:function(){return l.can("access_binary")&&b.can("create_canvas")},select_file:function(){return b.can("use_fileinput")&&window.File},
select_folder:function(){return l.can("select_file")&&"Chrome"===b.browser&&b.verComp(b.version,21,">=")},select_multiple:function(){return!(!l.can("select_file")||"Safari"===b.browser&&"Windows"===b.os||"iOS"===b.os&&b.verComp(b.osVersion,"7.0.0",">")&&b.verComp(b.osVersion,"8.0.0","<"))},send_binary_string:r(window.XMLHttpRequest&&((new XMLHttpRequest).sendAsBinary||window.Uint8Array&&window.ArrayBuffer)),send_custom_headers:r(window.XMLHttpRequest),send_multipart:function(){return!!(window.XMLHttpRequest&&
(new XMLHttpRequest).upload&&window.FormData)||l.can("send_binary_string")},slice_blob:r(window.File&&(File.prototype.mozSlice||File.prototype.webkitSlice||File.prototype.slice)),stream_upload:function(){return l.can("slice_blob")&&l.can("send_multipart")},summon_file_dialog:function(){return l.can("select_file")&&("Firefox"===b.browser&&b.verComp(b.version,4,">=")||"Opera"===b.browser&&b.verComp(b.version,12,">=")||"IE"===b.browser&&b.verComp(b.version,10,">=")||!!~e.inArray(b.browser,["Chrome",
"Safari"]))},upload_filesize:k},p);d.call(this,c,f||"html5",p);e.extend(this,{init:function(){this.trigger("Init")},destroy:function(a){return function(){a.call(l);a=l=null}}(this.destroy)});e.extend(this.getShim(),a)}),a});k("moxie/core/utils/Events",["moxie/core/utils/Basic"],function(e){function c(){this.returnValue=!1}function d(){this.cancelBubble=!0}var b={},a="moxie_"+e.guid(),f=function(c,d,f){var m;if(d=d.toLowerCase(),c[a]&&b[c[a]]&&b[c[a]][d]){m=b[c[a]][d];for(var k=m.length-1;0<=k&&(m[k].orig!==
f&&m[k].key!==f||(c.removeEventListener?c.removeEventListener(d,m[k].func,!1):c.detachEvent&&c.detachEvent("on"+d,m[k].func),m[k].orig=null,m[k].func=null,m.splice(k,1),void 0===f));k--);if(m.length||delete b[c[a]][d],e.isEmptyObj(b[c[a]])){delete b[c[a]];try{delete c[a]}catch(n){c[a]=void 0}}}};return{addEvent:function(f,m,l,r){var k;m=m.toLowerCase();f.addEventListener?(k=l,f.addEventListener(m,k,!1)):f.attachEvent&&(k=function(){var a=window.event;a.target||(a.target=a.srcElement);a.preventDefault=
c;a.stopPropagation=d;l(a)},f.attachEvent("on"+m,k));f[a]||(f[a]=e.guid());b.hasOwnProperty(f[a])||(b[f[a]]={});f=b[f[a]];f.hasOwnProperty(m)||(f[m]=[]);f[m].push({func:k,orig:l,key:r})},removeEvent:f,removeAllEvents:function(c,d){c&&c[a]&&e.each(b[c[a]],function(a,b){f(c,b,d)})}}});k("moxie/runtime/html5/file/FileInput","moxie/runtime/html5/Runtime moxie/file/File moxie/core/utils/Basic moxie/core/utils/Dom moxie/core/utils/Events moxie/core/utils/Mime moxie/core/utils/Env".split(" "),function(e,
c,d,b,a,f,g){return e.FileInput=function(){var e;d.extend(this,{init:function(l){var h=this,k=h.getRuntime(),n,q,u;e=l;l=e.accept.mimes||f.extList2mimes(e.accept,k.can("filter_by_extension"));n=k.getShimContainer();n.innerHTML='<input id="'+k.uid+'" type="file" style="font-size:999px;opacity:0;"'+(e.multiple&&k.can("select_multiple")?"multiple":"")+(e.directory&&k.can("select_folder")?"webkitdirectory directory":"")+(l?' accept="'+l.join(",")+'"':"")+" />";l=b.get(k.uid);d.extend(l.style,{position:"absolute",
top:0,left:0,width:"100%",height:"100%"});q=b.get(e.browse_button);k.can("summon_file_dialog")&&("static"===b.getStyle(q,"position")&&(q.style.position="relative"),u=parseInt(b.getStyle(q,"z-index"),10)||1,q.style.zIndex=u,n.style.zIndex=u-1,a.addEvent(q,"click",function(a){var c=b.get(k.uid);c&&!c.disabled&&c.click();a.preventDefault()},h.uid));u=k.can("summon_file_dialog")?q:n;a.addEvent(u,"mouseover",function(){h.trigger("mouseenter")},h.uid);a.addEvent(u,"mouseout",function(){h.trigger("mouseleave")},
h.uid);a.addEvent(u,"mousedown",function(){h.trigger("mousedown")},h.uid);a.addEvent(b.get(e.container),"mouseup",function(){h.trigger("mouseup")},h.uid);l.onchange=function w(a){(h.files=[],d.each(this.files,function(a){var b="";return e.directory&&"."==a.name?!0:(a.webkitRelativePath&&(b="/"+a.webkitRelativePath.replace(/^\//,"")),a=new c(k.uid,a),a.relativePath=b,void h.files.push(a))}),"IE"!==g.browser&&"IEMobile"!==g.browser)?this.value="":(a=this.cloneNode(!0),this.parentNode.replaceChild(a,
this),a.onchange=w);h.files.length&&h.trigger("change")};h.trigger({type:"ready",async:!0});n=null},disable:function(a){var c=this.getRuntime(),d;(d=b.get(c.uid))&&(d.disabled=!!a)},destroy:function(){var c=this.getRuntime(),d=c.getShim(),c=c.getShimContainer();a.removeAllEvents(c,this.uid);a.removeAllEvents(e&&b.get(e.container),this.uid);a.removeAllEvents(e&&b.get(e.browse_button),this.uid);c&&(c.innerHTML="");d.removeInstance(this.uid);e=null}})}});k("moxie/runtime/html5/file/Blob",["moxie/runtime/html5/Runtime",
"moxie/file/Blob"],function(e,c){return e.Blob=function(){function d(b,a,c){var d;if(!window.File.prototype.slice)return(d=window.File.prototype.webkitSlice||window.File.prototype.mozSlice)?d.call(b,a,c):null;try{return b.slice(),b.slice(a,c)}catch(e){return b.slice(a,c-a)}}this.slice=function(){return new c(this.getRuntime().uid,d.apply(this,arguments))}}});k("moxie/runtime/html5/file/FileDrop","moxie/runtime/html5/Runtime moxie/file/File moxie/core/utils/Basic moxie/core/utils/Dom moxie/core/utils/Events moxie/core/utils/Mime".split(" "),
function(e,c,d,b,a,f){return e.FileDrop=function(){function e(a){if(!a.dataTransfer||!a.dataTransfer.types)return!1;a=d.toArray(a.dataTransfer.types||[]);return-1!==d.inArray("Files",a)||-1!==d.inArray("public.file-url",a)||-1!==d.inArray("application/x-moz-file",a)}function h(a,b){var e;A.length?(e=f.getFileExtension(a.name),e=!e||-1!==d.inArray(e,A)):e=!0;e&&(e=new c(C,a),e.relativePath=b||"",u.push(e))}function l(a){for(var b=[],c=0;c<a.length;c++)[].push.apply(b,a[c].extensions.split(/\s*,\s*/));
return-1===d.inArray("*",b)?b:[]}function k(a,b){var c=[];d.each(a,function(a){var b=a.webkitGetAsEntry();b&&(b.isFile?h(a.getAsFile(),b.fullPath):c.push(b))});c.length?n(c,b):b()}function n(a,b){var c=[];d.each(a,function(a){c.push(function(b){t(a,b)})});d.inSeries(c,function(){b()})}function t(a,b){a.isFile?a.file(function(c){h(c,a.fullPath);b()},function(){b()}):a.isDirectory?q(a,b):b()}function q(a,b){function c(a){e.readEntries(function(b){b.length?([].push.apply(d,b),c(a)):a()},a)}var d=[],
e=a.createReader();c(function(){n(d,b)})}var u=[],A=[],w,C;d.extend(this,{init:function(b){var c=this;w=b;C=c.ruid;A=l(w.accept);b=w.container;a.addEvent(b,"dragover",function(a){e(a)&&(a.preventDefault(),a.dataTransfer.dropEffect="copy")},c.uid);a.addEvent(b,"drop",function(a){e(a)&&(a.preventDefault(),u=[],a.dataTransfer.items&&a.dataTransfer.items[0].webkitGetAsEntry?k(a.dataTransfer.items,function(){c.files=u;c.trigger("drop")}):(d.each(a.dataTransfer.files,function(a){h(a)}),c.files=u,c.trigger("drop")))},
c.uid);a.addEvent(b,"dragenter",function(a){c.trigger("dragenter")},c.uid);a.addEvent(b,"dragleave",function(a){c.trigger("dragleave")},c.uid)},destroy:function(){a.removeAllEvents(w&&b.get(w.container),this.uid);C=u=A=w=null}})}});k("moxie/runtime/html5/file/FileReader",["moxie/runtime/html5/Runtime","moxie/core/utils/Encode","moxie/core/utils/Basic"],function(e,c,d){return e.FileReader=function(){var b,a=!1;d.extend(this,{read:function(e,f){var h=this;h.result="";b=new window.FileReader;b.addEventListener("progress",
function(a){h.trigger(a)});b.addEventListener("load",function(d){h.result=a?c.atob(b.result.substring(b.result.indexOf("base64,")+7)):b.result;h.trigger(d)});b.addEventListener("error",function(a){h.trigger(a,b.error)});b.addEventListener("loadend",function(a){b=null;h.trigger(a)});"function"===d.typeOf(b[e])?(a=!1,b[e](f.getSource())):"readAsBinaryString"===e&&(a=!0,b.readAsDataURL(f.getSource()))},abort:function(){b&&b.abort()},destroy:function(){b=null}})}});k("moxie/runtime/html5/xhr/XMLHttpRequest",
"moxie/runtime/html5/Runtime moxie/core/utils/Basic moxie/core/utils/Mime moxie/core/utils/Url moxie/file/File moxie/file/Blob moxie/xhr/FormData moxie/core/Exceptions moxie/core/utils/Env".split(" "),function(e,c,d,b,a,f,g,p,l){return e.XMLHttpRequest=function(){function e(a,b){var c=this,d,g;d=b.getBlob().getSource();g=new window.FileReader;g.onload=function(){b.append(b.getBlobName(),new f(null,{type:d.type,data:g.result}));n.send.call(c,a,b)};g.readAsBinaryString(d)}function h(){var a;if(!window.XMLHttpRequest||
"IE"===l.browser&&l.verComp(l.version,8,"<"))a:{for(var b=["Msxml2.XMLHTTP.6.0","Microsoft.XMLHTTP"],c=0;c<b.length;c++)try{a=new ActiveXObject(b[c]);break a}catch(d){}a=void 0}else a=new window.XMLHttpRequest;return a}function k(a){var b="----moxieboundary"+(new Date).getTime(),c="";if(!this.getRuntime().can("send_binary_string"))throw new p.RuntimeError(p.RuntimeError.NOT_SUPPORTED_ERR);return q.setRequestHeader("Content-Type","multipart/form-data; boundary="+b),a.each(function(a,d){c+=a instanceof
f?"--"+b+'\r\nContent-Disposition: form-data; name="'+d+'"; filename="'+unescape(encodeURIComponent(a.name||"blob"))+'"\r\nContent-Type: '+(a.type||"application/octet-stream")+"\r\n\r\n"+a.getSource()+"\r\n":"--"+b+'\r\nContent-Disposition: form-data; name="'+d+'"\r\n\r\n'+unescape(encodeURIComponent(a))+"\r\n"}),c+="--"+b+"--\r\n"}var n=this,q,A;c.extend(this,{send:function(a,d){var p=this,n="Mozilla"===l.browser&&l.verComp(l.version,4,">=")&&l.verComp(l.version,7,"<"),v="Android Browser"===l.browser,
s=!1;if(A=a.url.replace(/^.+?\/([\w\-\.]+)$/,"$1").toLowerCase(),q=h(),q.open(a.method,a.url,a.async,a.user,a.password),d instanceof f)d.isDetached()&&(s=!0),d=d.getSource();else if(d instanceof g){if(d.hasBlob())if(d.getBlob().isDetached())d=k.call(p,d),s=!0;else if((n||v)&&"blob"===c.typeOf(d.getBlob().getSource())&&window.FileReader)return void e.call(p,a,d);if(d instanceof g){var x=new window.FormData;d.each(function(a,b){a instanceof f?x.append(b,a.getSource()):x.append(b,a)});d=x}}q.upload?
(a.withCredentials&&(q.withCredentials=!0),q.addEventListener("load",function(a){p.trigger(a)}),q.addEventListener("error",function(a){p.trigger(a)}),q.addEventListener("progress",function(a){p.trigger(a)}),q.upload.addEventListener("progress",function(a){p.trigger({type:"UploadProgress",loaded:a.loaded,total:a.total})})):q.onreadystatechange=function(){switch(q.readyState){case 3:var c,d;try{b.hasSameOrigin(a.url)&&(c=q.getResponseHeader("Content-Length")||0),q.responseText&&(d=q.responseText.length)}catch(e){c=
d=0}p.trigger({type:"progress",lengthComputable:!!c,total:parseInt(c,10),loaded:d});break;case 4:q.onreadystatechange=function(){},p.trigger(0===q.status?"error":"load")}};c.isEmptyObj(a.headers)||c.each(a.headers,function(a,b){q.setRequestHeader(b,a)});""!==a.responseType&&"responseType"in q&&("json"!==a.responseType||l.can("return_response_type","json")?q.responseType=a.responseType:q.responseType="text");s?q.sendAsBinary?q.sendAsBinary(d):!function(){for(var a=new Uint8Array(d.length),b=0;b<d.length;b++)a[b]=
255&d.charCodeAt(b);q.send(a.buffer)}():q.send(d);p.trigger("loadstart")},getStatus:function(){try{if(q)return q.status}catch(a){}return 0},getResponse:function(b){var c=this.getRuntime();try{switch(b){case "blob":var e=new a(c.uid,q.response),f=q.getResponseHeader("Content-Disposition");if(f){var g=f.match(/filename=([\'\"'])([^\1]+)\1/);g&&(A=g[2])}return e.name=A,e.type||(e.type=d.getFileMime(A)),e;case "json":return l.can("return_response_type","json")?q.response:200===q.status&&window.JSON?JSON.parse(q.responseText):
null;case "document":var h=q.responseXML,m=q.responseText;return"IE"===l.browser&&m&&h&&!h.documentElement&&/[^\/]+\/[^\+]+\+xml/.test(q.getResponseHeader("Content-Type"))&&(h=new window.ActiveXObject("Microsoft.XMLDOM"),h.async=!1,h.validateOnParse=!1,h.loadXML(m)),h&&("IE"===l.browser&&0!==h.parseError||!h.documentElement||"parsererror"===h.documentElement.tagName)?null:h;default:return""!==q.responseText?q.responseText:null}}catch(p){return null}},getAllResponseHeaders:function(){try{return q.getAllResponseHeaders()}catch(a){}return""},
abort:function(){q&&q.abort()},destroy:function(){n=A=null}})}});k("moxie/runtime/html5/utils/BinaryReader",["moxie/core/utils/Basic"],function(e){function c(a){a instanceof ArrayBuffer?d.apply(this,arguments):b.apply(this,arguments)}function d(a){var b=new DataView(a);e.extend(this,{readByteAt:function(a){return b.getUint8(a)},writeByteAt:function(a,c){b.setUint8(a,c)},SEGMENT:function(c,d,e){switch(arguments.length){case 2:return a.slice(c,c+d);case 1:return a.slice(c);case 3:if(null===e&&(e=new ArrayBuffer),
e instanceof ArrayBuffer){var f=new Uint8Array(this.length()-d+e.byteLength);0<c&&f.set(new Uint8Array(a.slice(0,c)),0);f.set(new Uint8Array(e),c);f.set(new Uint8Array(a.slice(c+d)),c+e.byteLength);this.clear();a=f.buffer;b=new DataView(a);break}default:return a}},length:function(){return a?a.byteLength:0},clear:function(){b=a=null}})}function b(a){function b(c,d,e){e=3===arguments.length?e:a.length-d-1;a=a.substr(0,d)+c+a.substr(e+d)}e.extend(this,{readByteAt:function(b){return a.charCodeAt(b)},
writeByteAt:function(a,c){b(String.fromCharCode(c),a,1)},SEGMENT:function(c,d,e){switch(arguments.length){case 1:return a.substr(c);case 2:return a.substr(c,d);case 3:b(null!==e?e:"",c,d);break;default:return a}},length:function(){return a?a.length:0},clear:function(){a=null}})}return e.extend(c.prototype,{littleEndian:!1,read:function(a,b){var c,d,e;if(a+b>this.length())throw Error("You are trying to read outside the source boundaries.");d=this.littleEndian?0:-8*(b-1);for(c=e=0;b>e;e++)c|=this.readByteAt(a+
e)<<Math.abs(d+8*e);return c},write:function(a,b,c){var d,e;if(a>this.length())throw Error("You are trying to write outside the source boundaries.");d=this.littleEndian?0:-8*(c-1);for(e=0;c>e;e++)this.writeByteAt(a+e,b>>Math.abs(d+8*e)&255)},BYTE:function(a){return this.read(a,1)},SHORT:function(a){return this.read(a,2)},LONG:function(a){return this.read(a,4)},SLONG:function(a){a=this.read(a,4);return 2147483647<a?a-4294967296:a},CHAR:function(a){return String.fromCharCode(this.read(a,1))},STRING:function(a,
b){return this.asArray("CHAR",a,b).join("")},asArray:function(a,b,c){for(var d=[],e=0;c>e;e++)d[e]=this[a](b+e);return d}}),c});k("moxie/runtime/html5/image/JPEGHeaders",["moxie/runtime/html5/utils/BinaryReader","moxie/core/Exceptions"],function(e,c){return function b(a){var f=[],g,p,l,k=0;if(g=new e(a),65496!==g.SHORT(0))throw g.clear(),new c.ImageError(c.ImageError.WRONG_FORMAT);for(p=2;p<=g.length();)if(l=g.SHORT(p),65488<=l&&65495>=l)p+=2;else{if(65498===l||65497===l)break;k=g.SHORT(p+2)+2;65505<=
l&&65519>=l&&f.push({hex:l,name:"APP"+(15&l),start:p,length:k,segment:g.SEGMENT(p,k)});p+=k}return g.clear(),{headers:f,restore:function(a){var b,c,g;g=new e(a);p=65504==g.SHORT(2)?4+g.SHORT(4):2;c=0;for(b=f.length;b>c;c++)g.SEGMENT(p,0,f[c].segment),p+=f[c].length;return a=g.SEGMENT(),g.clear(),a},strip:function(a){var c,f,g;c=new b(a);f=c.headers;c.purge();c=new e(a);for(g=f.length;g--;)c.SEGMENT(f[g].start,f[g].length,"");return a=c.SEGMENT(),c.clear(),a},get:function(a){for(var b=[],c=0,e=f.length;e>
c;c++)f[c].name===a.toUpperCase()&&b.push(f[c].segment);return b},set:function(a,b){var c=[],e,g,h;"string"==typeof b?c.push(b):c=b;e=g=0;for(h=f.length;h>e&&(f[e].name===a.toUpperCase()&&(f[e].segment=c[g],f[e].length=c[g].length,g++),!(g>=c.length));e++);},purge:function(){this.headers=f=[]}}}});k("moxie/runtime/html5/image/ExifParser",["moxie/core/utils/Basic","moxie/runtime/html5/utils/BinaryReader","moxie/core/Exceptions"],function(f,c,d){function b(a){function m(a,b){var c,g,m,p,n,q,t,z,s=[],
L={},E={1:"BYTE",7:"UNDEFINED",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",9:"SLONG",10:"SRATIONAL"},N={BYTE:1,UNDEFINED:1,ASCII:1,SHORT:2,LONG:4,RATIONAL:8,SLONG:4,SRATIONAL:8};c=this.SHORT(a);for(g=0;c>g;g++)if(s=[],t=a+2+12*g,m=b[this.SHORT(t)],m!==e){if(p=E[this.SHORT(t+=2)],n=this.LONG(t+=2),q=N[p],!q)throw new d.ImageError(d.ImageError.INVALID_META_ERR);if(t+=4,4<q*n&&(t=this.LONG(t)+k.tiffHeader),t+q*n>=this.length())throw new d.ImageError(d.ImageError.INVALID_META_ERR);"ASCII"!==p?(s=this.asArray(p,
t,n),z=1==n?s[0]:s,l.hasOwnProperty(m)&&"object"!=typeof z?L[m]=l[m][z]:L[m]=z):L[m]=f.trim(this.STRING(t,n).replace(/\0$/,""))}return L}var g,p,l,k,n,q;if(c.call(this,a),p={tiff:{274:"Orientation",270:"ImageDescription",271:"Make",272:"Model",305:"Software",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer"},exif:{36864:"ExifVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",36867:"DateTimeOriginal",33434:"ExposureTime",33437:"FNumber",34855:"ISOSpeedRatings",37377:"ShutterSpeedValue",
37378:"ApertureValue",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",41986:"ExposureMode",41987:"WhiteBalance",41990:"SceneCaptureType",41988:"DigitalZoomRatio",41992:"Contrast",41993:"Saturation",41994:"Sharpness"},gps:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude"},thumb:{513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength"}},l={ColorSpace:{1:"sRGB",0:"Uncalibrated"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",
3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{1:"Daylight",2:"Fliorescent",3:"Tungsten",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 -5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",
1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",
69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",
95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},ExposureMode:{0:"Auto exposure",1:"Manual exposure",2:"Auto bracket"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},GPSLatitudeRef:{N:"North latitude",S:"South latitude"},GPSLongitudeRef:{E:"East longitude",
W:"West longitude"}},k={tiffHeader:10},n=k.tiffHeader,g={clear:this.clear},f.extend(this,{read:function(){try{return b.prototype.read.apply(this,arguments)}catch(a){throw new d.ImageError(d.ImageError.INVALID_META_ERR);}},write:function(){try{return b.prototype.write.apply(this,arguments)}catch(a){throw new d.ImageError(d.ImageError.INVALID_META_ERR);}},UNDEFINED:function(){return this.BYTE.apply(this,arguments)},RATIONAL:function(a){return this.LONG(a)/this.LONG(a+4)},SRATIONAL:function(a){return this.SLONG(a)/
this.SLONG(a+4)},ASCII:function(a){return this.CHAR(a)},TIFF:function(){return q||null},EXIF:function(){var a=null;if(k.exifIFD){try{a=m.call(this,k.exifIFD,p.exif)}catch(b){return null}if(a.ExifVersion&&"array"===f.typeOf(a.ExifVersion)){for(var c=0,d="";c<a.ExifVersion.length;c++)d+=String.fromCharCode(a.ExifVersion[c]);a.ExifVersion=d}}return a},GPS:function(){var a=null;if(k.gpsIFD){try{a=m.call(this,k.gpsIFD,p.gps)}catch(b){return null}a.GPSVersionID&&"array"===f.typeOf(a.GPSVersionID)&&(a.GPSVersionID=
a.GPSVersionID.join("."))}return a},thumb:function(){if(k.IFD1)try{var a=m.call(this,k.IFD1,p.thumb);if("JPEGInterchangeFormat"in a)return this.SEGMENT(k.tiffHeader+a.JPEGInterchangeFormat,a.JPEGInterchangeFormatLength)}catch(b){}return null},setExif:function(a,b){var c;if("PixelXDimension"!==a&&"PixelYDimension"!==a)c=!1;else a:{c=a;var d,e,f,g=0;if("string"==typeof c)for(e in d=p.exif,d)if(d[e]===c){c=e;break}d=k.exifIFD;e=this.SHORT(d);for(var h=0;e>h;h++)if(f=d+12*h+2,this.SHORT(f)==c){g=f+8;
break}if(g){try{this.write(g,b,4)}catch(m){c=!1;break a}c=!0}else c=!1}return c},clear:function(){g.clear();a=p=l=q=k=g=null}}),65505!==this.SHORT(0)||"EXIF\x00"!==this.STRING(4,5).toUpperCase())throw new d.ImageError(d.ImageError.INVALID_META_ERR);if(this.littleEndian=18761==this.SHORT(n),42!==this.SHORT(n+=2))throw new d.ImageError(d.ImageError.INVALID_META_ERR);k.IFD0=k.tiffHeader+this.LONG(n+=2);q=m.call(this,k.IFD0,p.tiff);"ExifIFDPointer"in q&&(k.exifIFD=k.tiffHeader+q.ExifIFDPointer,delete q.ExifIFDPointer);
"GPSInfoIFDPointer"in q&&(k.gpsIFD=k.tiffHeader+q.GPSInfoIFDPointer,delete q.GPSInfoIFDPointer);f.isEmptyObj(q)&&(q=null);(n=this.LONG(k.IFD0+12*this.SHORT(k.IFD0)+2))&&(k.IFD1=k.tiffHeader+n)}return b.prototype=c.prototype,b});k("moxie/runtime/html5/image/JPEG",["moxie/core/utils/Basic","moxie/core/Exceptions","moxie/runtime/html5/image/JPEGHeaders","moxie/runtime/html5/utils/BinaryReader","moxie/runtime/html5/image/ExifParser"],function(e,c,d,b,a){return function(f){function g(a){var b=0,c,d;for(a||
(a=l);b<=a.length();){if(c=a.SHORT(b+=2),65472<=c&&65475>=c)return b+=5,{height:a.SHORT(b),width:a.SHORT(b+2)};d=a.SHORT(b+=2);b+=d-2}return null}function p(){var a=n.thumb(),c,d;return a&&(c=new b(a),d=g(c),c.clear(),d)?(d.data=a,d):null}var l,k,n,q;if(l=new b(f),65496!==l.SHORT(0))throw new c.ImageError(c.ImageError.WRONG_FORMAT);k=new d(f);try{n=new a(k.get("app1")[0])}catch(v){}q=g.call(this);e.extend(this,{type:"image/jpeg",size:l.length(),width:q&&q.width||0,height:q&&q.height||0,setExif:function(a,
b){return n?("object"===e.typeOf(a)?e.each(a,function(a,b){n.setExif(b,a)}):n.setExif(a,b),void k.set("app1",n.SEGMENT())):!1},writeHeaders:function(){return k.restore(arguments.length?arguments[0]:f)},stripHeaders:function(a){return k.strip(a)},purge:function(){n&&k&&l&&(n.clear(),k.purge(),l.clear(),q=k=n=l=null)}});n&&(this.meta={tiff:n.TIFF(),exif:n.EXIF(),gps:n.GPS(),thumb:p()})}});k("moxie/runtime/html5/image/PNG",["moxie/core/Exceptions","moxie/core/utils/Basic","moxie/runtime/html5/utils/BinaryReader"],
function(e,c,d){return function(b){function a(){f&&(f.clear(),b=g=f=null)}var f,g;f=new d(b);(function(){for(var a=0,b=0,c=[35152,20039,3338,6666],b=0;b<c.length;b++,a+=2)if(c[b]!=f.SHORT(a))throw new e.ImageError(e.ImageError.WRONG_FORMAT);})();g=function(){var a,b,c=8,d,e,g,h;return a=(d=f.LONG(c),e=f.STRING(c+=4,4),g=c+=4,h=f.LONG(c+d),{length:d,type:e,start:g,CRC:h}),"IHDR"==a.type?(b=a.start,{width:f.LONG(b),height:f.LONG(b+4)}):null}.call(this);c.extend(this,{type:"image/png",size:f.length(),
width:g.width,height:g.height,purge:function(){a.call(this)}});a.call(this)}});k("moxie/runtime/html5/image/ImageInfo",["moxie/core/utils/Basic","moxie/core/Exceptions","moxie/runtime/html5/image/JPEG","moxie/runtime/html5/image/PNG"],function(e,c,d,b){return function(a){var f=[d,b],g;g=function(){for(var b=0;b<f.length;b++)try{return new f[b](a)}catch(d){}throw new c.ImageError(c.ImageError.WRONG_FORMAT);}();e.extend(this,{type:"",size:0,width:0,height:0,setExif:function(){},writeHeaders:function(a){return a},
stripHeaders:function(a){return a},purge:function(){a=null}});e.extend(this,g);this.purge=function(){g.purge();g=null}}});k("moxie/runtime/html5/image/MegaPixel",[],function(){function e(c){var d=c.naturalWidth;if(1048576<d*c.naturalHeight){var b=document.createElement("canvas");b.width=b.height=1;b=b.getContext("2d");return b.drawImage(c,-d+1,0),0===b.getImageData(0,0,1,1).data[3]}return!1}return{isSubsampled:e,renderTo:function(c,d,b){var a=c.naturalWidth,f=c.naturalHeight,g=b.width,k=b.height,
l=b.x||0;b=b.y||0;d=d.getContext("2d");e(c)&&(a/=2,f/=2);var n=document.createElement("canvas");n.width=n.height=1024;var q=n.getContext("2d"),t;t=f;var v=document.createElement("canvas");v.width=1;v.height=t;v=v.getContext("2d");v.drawImage(c,0,0);for(var v=v.getImageData(0,0,1,t).data,u=0,s=t,w=t;w>u;)0===v[4*(w-1)+3]?s=w:u=w,w=s+u>>1;t=w/t;t=0===t?1:t;for(v=0;f>v;){u=v+1024>f?f-v:1024;for(s=0;a>s;){w=s+1024>a?a-s:1024;q.clearRect(0,0,1024,1024);q.drawImage(c,-s,-v);var C=s*g/a+l<<0,y=Math.ceil(w*
g/a),D=v*k/f/t+b<<0,B=Math.ceil(u*k/f/t);d.drawImage(n,0,0,w,u,C,D,y,B);s+=1024}v+=1024}}}});k("moxie/runtime/html5/image/Image","moxie/runtime/html5/Runtime moxie/core/utils/Basic moxie/core/Exceptions moxie/core/utils/Encode moxie/file/Blob moxie/file/File moxie/runtime/html5/image/ImageInfo moxie/runtime/html5/image/MegaPixel moxie/core/utils/Mime moxie/core/utils/Env".split(" "),function(e,c,d,b,a,f,g,k,l,n){return e.Image=function(){function e(){if(!B&&!y)throw new d.ImageError(d.DOMException.INVALID_STATE_ERR);
return B||y}function h(a){return b.atob(a.substring(a.indexOf("base64,")+7))}function q(a){var c=this;y=new Image;y.onerror=function(){w.call(this);c.trigger("error",d.ImageError.WRONG_FORMAT)};y.onload=function(){c.trigger("load")};y.src="data:"==a.substr(0,5)?a:"data:"+(x.type||"")+";base64,"+b.btoa(a)}function u(a,b){var c=this,e;return window.FileReader?(e=new FileReader,e.onload=function(){b(this.result)},e.onerror=function(){c.trigger("error",d.ImageError.WRONG_FORMAT)},e.readAsDataURL(a),void 0):
b(a.getAsDataURL())}function s(a,b,d,f){var g,h=0,l=0,m,q;if(L=f,q=this.meta&&this.meta.tiff&&this.meta.tiff.Orientation||1,-1!==c.inArray(q,[5,6,7,8]))m=a,a=b,b=m;m=e();d?(a=Math.min(a,m.width),b=Math.min(b,m.height),g=Math.max(a/m.width,b/m.height)):g=Math.min(a/m.width,b/m.height);if(1<g&&!d&&f)l=void this.trigger("Resize");else{B||(B=document.createElement("canvas"));f=Math.round(m.width*g);g=Math.round(m.height*g);d?(B.width=a,B.height=b,f>a&&(h=Math.round((f-a)/2)),g>b&&(l=Math.round((g-b)/
2))):(B.width=f,B.height=g);if(!L){a=B.width;b=B.height;switch(q){case 5:case 6:case 7:case 8:B.width=b;B.height=a;break;default:B.width=a,B.height=b}d=B.getContext("2d");switch(q){case 2:d.translate(a,0);d.scale(-1,1);break;case 3:d.translate(a,b);d.rotate(Math.PI);break;case 4:d.translate(0,b);d.scale(1,-1);break;case 5:d.rotate(0.5*Math.PI);d.scale(1,-1);break;case 6:d.rotate(0.5*Math.PI);d.translate(0,-b);break;case 7:d.rotate(0.5*Math.PI);d.translate(a,-b);d.scale(-1,1);break;case 8:d.rotate(-0.5*
Math.PI),d.translate(-a,0)}}q=B;h=-h;l=-l;"iOS"===n.OS?k.renderTo(m,q,{width:f,height:g,x:h,y:l}):q.getContext("2d").drawImage(m,h,l,f,g);l=(this.width=B.width,this.height=B.height,H=!0,void this.trigger("Resize"))}return l}function w(){D&&(D.purge(),D=null);G=y=B=x=null;H=!1}var C=this,y,D,B,G,x,H=!1,L=!0;c.extend(this,{loadFromBlob:function(a){var b=this,c=b.getRuntime(),e=1<arguments.length?arguments[1]:!0;if(!c.can("access_binary"))throw new d.RuntimeError(d.RuntimeError.NOT_SUPPORTED_ERR);return x=
a,a.isDetached()?(G=a.getSource(),void q.call(this,G)):void u.call(this,a.getSource(),function(a){e&&(G=h(a));q.call(b,a)})},loadFromImage:function(a,b){this.meta=a.meta;x=new f(null,{name:a.name,size:a.size,type:a.type});q.call(this,b?G=a.getAsBinaryString():a.getAsDataURL())},getInfo:function(){var b=this.getRuntime(),c;return!D&&G&&b.can("access_image_binary")&&(D=new g(G)),c={width:e().width||0,height:e().height||0,type:x.type||l.getFileMime(x.name),size:G&&G.length||x.size||0,name:x.name||"",
meta:D&&D.meta||this.meta||{}},!c.meta||!c.meta.thumb||c.meta.thumb.data instanceof a||(c.meta.thumb.data=new a(null,{type:"image/jpeg",data:c.meta.thumb.data})),c},downsize:function(){s.apply(this,arguments)},getAsCanvas:function(){return B&&(B.id=this.uid+"_canvas"),B},getAsBlob:function(a,b){return a!==this.type&&s.call(this,this.width,this.height,!1),new f(null,{name:x.name||"",type:a,data:C.getAsBinaryString.call(this,a,b)})},getAsDataURL:function(a,b){var c=b||90;if(!H)return y.src;if("image/jpeg"!==
a)return B.toDataURL("image/png");try{return B.toDataURL("image/jpeg",c/100)}catch(d){return B.toDataURL("image/jpeg")}},getAsBinaryString:function(a,b){if(!H)return G||(G=h(C.getAsDataURL(a,b))),G;if("image/jpeg"!==a)G=h(C.getAsDataURL(a,b));else{var c;b||(b=90);try{c=B.toDataURL("image/jpeg",b/100)}catch(d){c=B.toDataURL("image/jpeg")}G=h(c);D&&(G=D.stripHeaders(G),L&&(D.meta&&D.meta.exif&&D.setExif({PixelXDimension:this.width,PixelYDimension:this.height}),G=D.writeHeaders(G)),D.purge(),D=null)}return H=
!1,G},destroy:function(){C=null;w.call(this);this.getRuntime().getShim().removeInstance(this.uid)}})}});k("moxie/runtime/flash/Runtime",["moxie/core/utils/Basic","moxie/core/utils/Env","moxie/core/utils/Dom","moxie/core/Exceptions","moxie/runtime/Runtime"],function(e,c,d,b,a){function f(){var a;try{a=navigator.plugins["Shockwave Flash"],a=a.description}catch(b){try{a=(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version")}catch(c){a="0.0"}}return a=a.match(/\d+/g),parseFloat(a[0]+
"."+a[1])}function g(a){var b=d.get(a);b&&"OBJECT"==b.nodeName&&("IE"===c.browser?(b.style.display="none",function t(){if(4==b.readyState){var c=d.get(a);if(c){for(var e in c)"function"==typeof c[e]&&(c[e]=null);c.parentNode.removeChild(c)}}else setTimeout(t,10)}()):b.parentNode.removeChild(b))}var k={};return a.addConstructor("flash",function(l){var n=this,q;l=e.extend({swf_url:c.swf_url},l);a.call(this,l,"flash",{access_binary:function(a){return a&&"browser"===n.mode},access_image_binary:function(a){return a&&
"browser"===n.mode},display_media:a.capTrue,do_cors:a.capTrue,drag_and_drop:!1,report_upload_progress:function(){return"client"===n.mode},resize_image:a.capTrue,return_response_headers:!1,return_response_type:function(a){return"json"===a&&window.JSON?!0:!e.arrayDiff(a,["","text","document"])||"browser"===n.mode},return_status_code:function(a){return"browser"===n.mode||!e.arrayDiff(a,[200,404])},select_file:a.capTrue,select_multiple:a.capTrue,send_binary_string:function(a){return a&&"browser"===n.mode},
send_browser_cookies:function(a){return a&&"browser"===n.mode},send_custom_headers:function(a){return a&&"browser"===n.mode},send_multipart:a.capTrue,slice_blob:function(a){return a&&"browser"===n.mode},stream_upload:function(a){return a&&"browser"===n.mode},summon_file_dialog:!1,upload_filesize:function(a){return 2097152>=e.parseSizeStr(a)||"client"===n.mode},use_http_method:function(a){return!e.arrayDiff(a,["GET","POST"])}},{access_binary:function(a){return a?"browser":"client"},access_image_binary:function(a){return a?
"browser":"client"},report_upload_progress:function(a){return a?"browser":"client"},return_response_type:function(a){return e.arrayDiff(a,["","text","json","document"])?"browser":["client","browser"]},return_status_code:function(a){return e.arrayDiff(a,[200,404])?"browser":["client","browser"]},send_binary_string:function(a){return a?"browser":"client"},send_browser_cookies:function(a){return a?"browser":"client"},send_custom_headers:function(a){return a?"browser":"client"},stream_upload:function(a){return a?
"client":"browser"},upload_filesize:function(a){return 2097152<=e.parseSizeStr(a)?"client":"browser"}},"client");10>f()&&(this.mode=!1);e.extend(this,{getShim:function(){return d.get(this.uid)},shimExec:function(a,b){var c=[].slice.call(arguments,2);return n.getShim().exec(this.uid,a,b,c)},init:function(){var a,d,f;f=this.getShimContainer();e.extend(f.style,{position:"absolute",top:"-8px",left:"-8px",width:"9px",height:"9px",overflow:"hidden"});a='<object id="'+this.uid+'" type="application/x-shockwave-flash" data="'+
l.swf_url+'" ';"IE"===c.browser&&(a+='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" ');a+='width="100%" height="100%" style="outline:0"><param name="movie" value="'+l.swf_url+'" /><param name="flashvars" value="uid='+escape(this.uid)+"&target="+c.global_event_dispatcher+'" /><param name="wmode" value="transparent" /><param name="allowscriptaccess" value="always" /></object>';"IE"===c.browser?(d=document.createElement("div"),f.appendChild(d),d.outerHTML=a,d=f=null):f.innerHTML=a;q=setTimeout(function(){n&&
!n.initialized&&n.trigger("Error",new b.RuntimeError(b.RuntimeError.NOT_INIT_ERR))},5E3)},destroy:function(a){return function(){g(n.uid);a.call(n);clearTimeout(q);l=q=a=n=null}}(this.destroy)},k)}),k});k("moxie/runtime/flash/file/FileInput",["moxie/runtime/flash/Runtime","moxie/file/File","moxie/core/utils/Basic"],function(e,c,d){return e.FileInput={init:function(b){var a=this,e=this.getRuntime();this.bind("Change",function(){var b=e.shimExec.call(a,"FileInput","getFiles");a.files=[];d.each(b,function(b){a.files.push(new c(e.uid,
b))})},999);this.getRuntime().shimExec.call(this,"FileInput","init",{name:b.name,accept:b.accept,multiple:b.multiple});this.trigger("ready")}}});k("moxie/runtime/flash/file/Blob",["moxie/runtime/flash/Runtime","moxie/file/Blob"],function(e,c){return e.Blob={slice:function(d,b,a,e){var f=this.getRuntime();return 0>b?b=Math.max(d.size+b,0):0<b&&(b=Math.min(b,d.size)),0>a?a=Math.max(d.size+a,0):0<a&&(a=Math.min(a,d.size)),d=f.shimExec.call(this,"Blob","slice",b,a,e||""),d&&(d=new c(f.uid,d)),d}}});k("moxie/runtime/flash/file/FileReader",
["moxie/runtime/flash/Runtime","moxie/core/utils/Encode"],function(e,c){function d(b,a){switch(a){case "readAsText":return c.atob(b,"utf8");case "readAsBinaryString":return c.atob(b);case "readAsDataURL":return b}return null}return e.FileReader={read:function(b,a){var c=this;return c.result="","readAsDataURL"===b&&(c.result="data:"+(a.type||"")+";base64,"),c.bind("Progress",function(a,e){e&&(c.result+=d(e,b))},999),c.getRuntime().shimExec.call(this,"FileReader","readAsBase64",a.uid)}}});k("moxie/runtime/flash/file/FileReaderSync",
["moxie/runtime/flash/Runtime","moxie/core/utils/Encode"],function(e,c){function d(b,a){switch(a){case "readAsText":return c.atob(b,"utf8");case "readAsBinaryString":return c.atob(b);case "readAsDataURL":return b}return null}return e.FileReaderSync={read:function(b,a){var c;return(c=this.getRuntime().shimExec.call(this,"FileReaderSync","readAsBase64",a.uid))?("readAsDataURL"===b&&(c="data:"+(a.type||"")+";base64,"+c),d(c,b,a.type)):null}}});k("moxie/runtime/flash/xhr/XMLHttpRequest","moxie/runtime/flash/Runtime moxie/core/utils/Basic moxie/file/Blob moxie/file/File moxie/file/FileReaderSync moxie/xhr/FormData moxie/runtime/Transporter".split(" "),
function(e,c,d,b,a,f,g){return e.XMLHttpRequest={send:function(a,b){function e(){a.transport=q.mode;q.shimExec.call(n,"XMLHttpRequest","send",a,b)}function h(a,c){q.shimExec.call(n,"XMLHttpRequest","appendBlob",a,c.uid);b=null;e()}function k(a,b){var c=new g;c.bind("TransportingComplete",function(){b(this.result)});c.transport(a.getSource(),a.type,{ruid:q.uid})}var n=this,q=n.getRuntime();if(c.isEmptyObj(a.headers)||c.each(a.headers,function(a,b){q.shimExec.call(n,"XMLHttpRequest","setRequestHeader",
b,a.toString())}),b instanceof f){var s;if(b.each(function(a,b){a instanceof d?s=b:q.shimExec.call(n,"XMLHttpRequest","append",b,a)}),b.hasBlob()){var w=b.getBlob();w.isDetached()?k(w,function(a){w.destroy();h(s,a)}):h(s,w)}else b=null,e()}else b instanceof d?b.isDetached()?k(b,function(a){b.destroy();b=a.uid;e()}):(b=b.uid,e()):e()},getResponse:function(d){var e,f,g=this.getRuntime();if(f=g.shimExec.call(this,"XMLHttpRequest","getResponseAsBlob")){if(f=new b(g.uid,f),"blob"===d)return f;try{if(e=
new a,~c.inArray(d,["","text"]))return e.readAsText(f);if("json"===d&&window.JSON)return JSON.parse(e.readAsText(f))}finally{f.destroy()}}return null},abort:function(a){this.getRuntime().shimExec.call(this,"XMLHttpRequest","abort");this.dispatchEvent("readystatechange");this.dispatchEvent("abort")}}});k("moxie/runtime/flash/runtime/Transporter",["moxie/runtime/flash/Runtime","moxie/file/Blob"],function(e,c){return e.Transporter={getAsBlob:function(d){var b=this.getRuntime();return(d=b.shimExec.call(this,
"Transporter","getAsBlob",d))?new c(b.uid,d):null}}});k("moxie/runtime/flash/image/Image",["moxie/runtime/flash/Runtime","moxie/core/utils/Basic","moxie/runtime/Transporter","moxie/file/Blob","moxie/file/FileReaderSync"],function(e,c,d,b,a){return e.Image={loadFromBlob:function(a){function b(a){e.shimExec.call(c,"Image","loadFromBlob",a.uid);c=e=null}var c=this,e=c.getRuntime();if(a.isDetached()){var f=new d;f.bind("TransportingComplete",function(){b(f.result.getSource())});f.transport(a.getSource(),
a.type,{ruid:e.uid})}else b(a.getSource())},loadFromImage:function(a){return this.getRuntime().shimExec.call(this,"Image","loadFromImage",a.uid)},getInfo:function(){var a=this.getRuntime(),c=a.shimExec.call(this,"Image","getInfo");return!c.meta||!c.meta.thumb||c.meta.thumb.data instanceof b||(c.meta.thumb.data=new b(a.uid,c.meta.thumb.data)),c},getAsBlob:function(a,c){var d=this.getRuntime(),e=d.shimExec.call(this,"Image","getAsBlob",a,c);return e?new b(d.uid,e):null},getAsDataURL:function(){var b=
this.getRuntime().Image.getAsBlob.apply(this,arguments),c;return b?(c=new a,c.readAsDataURL(b)):null}}});k("moxie/runtime/silverlight/Runtime",["moxie/core/utils/Basic","moxie/core/utils/Env","moxie/core/utils/Dom","moxie/core/Exceptions","moxie/runtime/Runtime"],function(e,c,d,b,a){function f(a){var b=!1,c=null,d,e,g,h,k,m=0;try{try{c=new ActiveXObject("AgControl.AgControl"),c.IsVersionSupported(a)&&(b=!0)}catch(n){var q=navigator.plugins["Silverlight Plug-In"];if(q){d=q.description;"1.0.30226.2"===
d&&(d="2.0.30226.2");for(e=d.split(".");3<e.length;)e.pop();for(;4>e.length;)e.push(0);for(g=a.split(".");4<g.length;)g.pop();do h=parseInt(g[m],10),k=parseInt(e[m],10),m++;while(m<g.length&&h===k);k>=h&&!isNaN(h)&&(b=!0)}}}catch(s){b=!1}return b}var g={};return a.addConstructor("silverlight",function(k){var l=this,n;k=e.extend({xap_url:c.xap_url},k);a.call(this,k,"silverlight",{access_binary:a.capTrue,access_image_binary:a.capTrue,display_media:a.capTrue,do_cors:a.capTrue,drag_and_drop:!1,report_upload_progress:a.capTrue,
resize_image:a.capTrue,return_response_headers:function(a){return a&&"client"===l.mode},return_response_type:function(a){return"json"!==a?!0:!!window.JSON},return_status_code:function(a){return"client"===l.mode||!e.arrayDiff(a,[200,404])},select_file:a.capTrue,select_multiple:a.capTrue,send_binary_string:a.capTrue,send_browser_cookies:function(a){return a&&"browser"===l.mode},send_custom_headers:function(a){return a&&"client"===l.mode},send_multipart:a.capTrue,slice_blob:a.capTrue,stream_upload:!0,
summon_file_dialog:!1,upload_filesize:a.capTrue,use_http_method:function(a){return"client"===l.mode||!e.arrayDiff(a,["GET","POST"])}},{return_response_headers:function(a){return a?"client":"browser"},return_status_code:function(a){return e.arrayDiff(a,[200,404])?"client":["client","browser"]},send_browser_cookies:function(a){return a?"browser":"client"},send_custom_headers:function(a){return a?"client":"browser"},use_http_method:function(a){return e.arrayDiff(a,["GET","POST"])?"client":["client",
"browser"]}});f("2.0.31005.0")&&"Opera"!==c.browser||(this.mode=!1);e.extend(this,{getShim:function(){return d.get(this.uid).content.Moxie},shimExec:function(a,b){var c=[].slice.call(arguments,2);return l.getShim().exec(this.uid,a,b,c)},init:function(){this.getShimContainer().innerHTML='<object id="'+this.uid+'" data="data:application/x-silverlight," type="application/x-silverlight-2" width="100%" height="100%" style="outline:none;"><param name="source" value="'+k.xap_url+'"/><param name="background" value="Transparent"/><param name="windowless" value="true"/><param name="enablehtmlaccess" value="true"/><param name="initParams" value="uid='+
this.uid+",target="+c.global_event_dispatcher+'"/></object>';n=setTimeout(function(){l&&!l.initialized&&l.trigger("Error",new b.RuntimeError(b.RuntimeError.NOT_INIT_ERR))},"Windows"!==c.OS?1E4:5E3)},destroy:function(a){return function(){a.call(l);clearTimeout(n);k=n=a=l=null}}(this.destroy)},g)}),g});k("moxie/runtime/silverlight/file/FileInput",["moxie/runtime/silverlight/Runtime","moxie/file/File","moxie/core/utils/Basic"],function(e,c,d){return e.FileInput={init:function(b){var a=this,e=this.getRuntime();
this.bind("Change",function(){var b=e.shimExec.call(a,"FileInput","getFiles");a.files=[];d.each(b,function(b){a.files.push(new c(e.uid,b))})},999);this.getRuntime().shimExec.call(this,"FileInput","init",function(a){for(var b="",c=0;c<a.length;c++)b+=(""!==b?"|":"")+a[c].title+" | *."+a[c].extensions.replace(/,/g,";*.");return b}(b.accept),b.name,b.multiple);this.trigger("ready")}}});k("moxie/runtime/silverlight/file/Blob",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/file/Blob"],
function(e,c,d){return e.Blob=c.extend({},d)});k("moxie/runtime/silverlight/file/FileDrop",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Dom","moxie/core/utils/Events"],function(e,c,d){return e.FileDrop={init:function(){var b=this.getRuntime(),a;return a=b.getShimContainer(),d.addEvent(a,"dragover",function(a){a.preventDefault();a.stopPropagation();a.dataTransfer.dropEffect="copy"},this.uid),d.addEvent(a,"dragenter",function(a){a.preventDefault();c.get(b.uid).dragEnter(a)&&a.stopPropagation()},
this.uid),d.addEvent(a,"drop",function(a){a.preventDefault();c.get(b.uid).dragDrop(a)&&a.stopPropagation()},this.uid),b.shimExec.call(this,"FileDrop","init")}}});k("moxie/runtime/silverlight/file/FileReader",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/file/FileReader"],function(e,c,d){return e.FileReader=c.extend({},d)});k("moxie/runtime/silverlight/file/FileReaderSync",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/file/FileReaderSync"],
function(e,c,d){return e.FileReaderSync=c.extend({},d)});k("moxie/runtime/silverlight/xhr/XMLHttpRequest",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/xhr/XMLHttpRequest"],function(e,c,d){return e.XMLHttpRequest=c.extend({},d)});k("moxie/runtime/silverlight/runtime/Transporter",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/runtime/Transporter"],function(e,c,d){return e.Transporter=c.extend({},d)});k("moxie/runtime/silverlight/image/Image",
["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/file/Blob","moxie/runtime/flash/image/Image"],function(e,c,d,b){return e.Image=c.extend({},b,{getInfo:function(){var a=this.getRuntime(),b=["tiff","exif","gps","thumb"],e={meta:{}},f=a.shimExec.call(this,"Image","getInfo");return f.meta&&(c.each(b,function(a){var b=f.meta[a],c,d,h,k;if(b&&b.keys)for(e.meta[a]={},d=0,h=b.keys.length;h>d;d++)c=b.keys[d],(k=b[c])&&(/^(\d|[1-9]\d+)$/.test(k)?k=parseInt(k,10):/^\d*\.\d+$/.test(k)&&(k=
parseFloat(k)),e.meta[a][c]=k)}),!e.meta||!e.meta.thumb||e.meta.thumb.data instanceof d||(e.meta.thumb.data=new d(a.uid,e.meta.thumb.data))),e.width=parseInt(f.width,10),e.height=parseInt(f.height,10),e.size=parseInt(f.size,10),e.type=f.type,e.name=f.name,e}})});k("moxie/runtime/html4/Runtime",["moxie/core/utils/Basic","moxie/core/Exceptions","moxie/runtime/Runtime","moxie/core/utils/Env"],function(e,c,d,b){var a={};return d.addConstructor("html4",function(c){var f=this,k=d.capTest,l=d.capTrue;d.call(this,
c,"html4",{access_binary:k(window.FileReader||window.File&&File.getAsDataURL),access_image_binary:!1,display_media:k(a.Image&&(b.can("create_canvas")||b.can("use_data_uri_over32kb"))),do_cors:!1,drag_and_drop:!1,filter_by_extension:k("Chrome"===b.browser&&b.verComp(b.version,28,">=")||"IE"===b.browser&&b.verComp(b.version,10,">=")||"Safari"===b.browser&&b.verComp(b.version,7,">=")),resize_image:function(){return a.Image&&f.can("access_binary")&&b.can("create_canvas")},report_upload_progress:!1,return_response_headers:!1,
return_response_type:function(a){return"json"===a&&window.JSON?!0:!!~e.inArray(a,["text","document",""])},return_status_code:function(a){return!e.arrayDiff(a,[200,404])},select_file:function(){return b.can("use_fileinput")},select_multiple:!1,send_binary_string:!1,send_custom_headers:!1,send_multipart:!0,slice_blob:!1,stream_upload:function(){return f.can("select_file")},summon_file_dialog:function(){return f.can("select_file")&&("Firefox"===b.browser&&b.verComp(b.version,4,">=")||"Opera"===b.browser&&
b.verComp(b.version,12,">=")||"IE"===b.browser&&b.verComp(b.version,10,">=")||!!~e.inArray(b.browser,["Chrome","Safari"]))},upload_filesize:l,use_http_method:function(a){return!e.arrayDiff(a,["GET","POST"])}});e.extend(this,{init:function(){this.trigger("Init")},destroy:function(a){return function(){a.call(f);a=f=null}}(this.destroy)});e.extend(this.getShim(),a)}),a});k("moxie/runtime/html4/file/FileInput","moxie/runtime/html4/Runtime moxie/file/File moxie/core/utils/Basic moxie/core/utils/Dom moxie/core/utils/Events moxie/core/utils/Mime moxie/core/utils/Env".split(" "),
function(e,c,d,b,a,f,g){return e.FileInput=function(){function e(){var f=this,m=f.getRuntime(),q,s,w,C,y,D;D=d.guid("uid_");q=m.getShimContainer();h&&(w=b.get(h+"_form"),w&&d.extend(w.style,{top:"100%"}));C=document.createElement("form");C.setAttribute("id",D+"_form");C.setAttribute("method","post");C.setAttribute("enctype","multipart/form-data");C.setAttribute("encoding","multipart/form-data");d.extend(C.style,{overflow:"hidden",position:"absolute",top:0,left:0,width:"100%",height:"100%"});y=document.createElement("input");
y.setAttribute("id",D);y.setAttribute("type","file");y.setAttribute("name",n.name||"Filedata");y.setAttribute("accept",k.join(","));d.extend(y.style,{fontSize:"999px",opacity:0});C.appendChild(y);q.appendChild(C);d.extend(y.style,{position:"absolute",top:0,left:0,width:"100%",height:"100%"});"IE"===g.browser&&g.verComp(g.version,10,"<")&&d.extend(y.style,{filter:"progid:DXImageTransform.Microsoft.Alpha(opacity=0)"});y.onchange=function(){var a;if(this.value){if(this.files){if(a=this.files[0],0===
a.size)return void C.parentNode.removeChild(C)}else a={name:this.value};a=new c(m.uid,a);this.onchange=function(){};e.call(f);f.files=[a];y.setAttribute("id",a.uid);C.setAttribute("id",a.uid+"_form");f.trigger("change");y=C=null}};m.can("summon_file_dialog")&&(s=b.get(n.browse_button),a.removeEvent(s,"click",f.uid),a.addEvent(s,"click",function(a){y&&!y.disabled&&y.click();a.preventDefault()},f.uid));h=D;q=w=s=null}var h,k=[],n;d.extend(this,{init:function(c){var d=this,g=d.getRuntime(),h;n=c;k=c.accept.mimes||
f.extList2mimes(c.accept,g.can("filter_by_extension"));h=g.getShimContainer();(function(){var e,f;e=b.get(c.browse_button);g.can("summon_file_dialog")&&("static"===b.getStyle(e,"position")&&(e.style.position="relative"),f=parseInt(b.getStyle(e,"z-index"),10)||1,e.style.zIndex=f,h.style.zIndex=f-1);e=g.can("summon_file_dialog")?e:h;a.addEvent(e,"mouseover",function(){d.trigger("mouseenter")},d.uid);a.addEvent(e,"mouseout",function(){d.trigger("mouseleave")},d.uid);a.addEvent(e,"mousedown",function(){d.trigger("mousedown")},
d.uid);a.addEvent(b.get(c.container),"mouseup",function(){d.trigger("mouseup")},d.uid);e=null})();e.call(this);h=null;d.trigger({type:"ready",async:!0})},disable:function(a){var c;(c=b.get(h))&&(c.disabled=!!a)},destroy:function(){var c=this.getRuntime(),d=c.getShim(),c=c.getShimContainer();a.removeAllEvents(c,this.uid);a.removeAllEvents(n&&b.get(n.container),this.uid);a.removeAllEvents(n&&b.get(n.browse_button),this.uid);c&&(c.innerHTML="");d.removeInstance(this.uid);h=k=n=null}})}});k("moxie/runtime/html4/file/FileReader",
["moxie/runtime/html4/Runtime","moxie/runtime/html5/file/FileReader"],function(e,c){return e.FileReader=c});k("moxie/runtime/html4/xhr/XMLHttpRequest","moxie/runtime/html4/Runtime moxie/core/utils/Basic moxie/core/utils/Dom moxie/core/utils/Url moxie/core/Exceptions moxie/core/utils/Events moxie/file/Blob moxie/xhr/FormData".split(" "),function(e,c,d,b,a,f,g,k){return e.XMLHttpRequest=function(){function e(a){var b=this,c,g,h,k=!1;if(q){if(c=q.id.replace(/_iframe$/,""),g=d.get(c+"_form")){c=g.getElementsByTagName("input");
for(h=c.length;h--;)switch(c[h].getAttribute("type")){case "hidden":c[h].parentNode.removeChild(c[h]);break;case "file":k=!0}c=[];k||g.parentNode.removeChild(g);g=null}setTimeout(function(){f.removeEvent(q,"load",b.uid);q.parentNode&&q.parentNode.removeChild(q);var c=b.getRuntime().getShimContainer();c.children.length||c.parentNode.removeChild(c);q=null;a()},1)}}var h,n,q;c.extend(this,{send:function(s,u){var A=this,w=A.getRuntime(),C,y,D,B;if(h=n=null,u instanceof k&&u.hasBlob()){if(B=u.getBlob(),
C=B.uid,D=d.get(C),y=d.get(C+"_form"),!y)throw new a.DOMException(a.DOMException.NOT_FOUND_ERR);}else C=c.guid("uid_"),y=document.createElement("form"),y.setAttribute("id",C+"_form"),y.setAttribute("method",s.method),y.setAttribute("enctype","multipart/form-data"),y.setAttribute("encoding","multipart/form-data"),w.getShimContainer().appendChild(y);y.setAttribute("target",C+"_iframe");u instanceof k&&u.each(function(a,b){if(a instanceof g)D&&D.setAttribute("name",b);else{var d=document.createElement("input");
c.extend(d,{type:"hidden",name:b,value:a});D?y.insertBefore(d,D):y.appendChild(d)}});y.setAttribute("action",s.url);(function(){var a=w.getShimContainer()||document.body,d=document.createElement("div");d.innerHTML='<iframe id="'+C+'_iframe" name="'+C+'_iframe" src="javascript:&quot;&quot;" style="display:none"></iframe>';q=d.firstChild;a.appendChild(q);f.addEvent(q,"load",function(){var a;try{a=q.contentWindow.document||q.contentDocument||window.frames[q.id].document,/^4(0[0-9]|1[0-7]|2[2346])\s/.test(a.title)?
h=a.title.replace(/^(\d+).*$/,"$1"):(h=200,n=c.trim(a.body.innerHTML),A.trigger({type:"progress",loaded:n.length,total:n.length}),B&&A.trigger({type:"uploadprogress",loaded:B.size||1025,total:B.size||1025}))}catch(d){if(!b.hasSameOrigin(s.url))return void e.call(A,function(){A.trigger("error")});h=404}e.call(A,function(){A.trigger("load")})},A.uid)})();y.submit();A.trigger("loadstart")},getStatus:function(){return h},getResponse:function(a){if("json"===a&&"string"===c.typeOf(n)&&window.JSON)try{return JSON.parse(n.replace(/^\s*<pre[^>]*>/,
"").replace(/<\/pre>\s*$/,""))}catch(b){return null}return n},abort:function(){var a=this;q&&q.contentWindow&&(q.contentWindow.stop?q.contentWindow.stop():q.contentWindow.document.execCommand?q.contentWindow.document.execCommand("Stop"):q.src="about:blank");e.call(this,function(){a.dispatchEvent("abort")})}})}});k("moxie/runtime/html4/image/Image",["moxie/runtime/html4/Runtime","moxie/runtime/html5/image/Image"],function(e,c){return e.Image=c});(function(h){for(var c=0;c<h.length;c++){for(var d=f,
b=h[c],a=b.split(/[.\/]/),k=0;k<a.length-1;++k)d[a[k]]===e&&(d[a[k]]={}),d=d[a[k]];d[a[a.length-1]]=n[b]}})("moxie/core/utils/Basic moxie/core/utils/Env moxie/core/I18n moxie/core/utils/Mime moxie/core/utils/Dom moxie/core/Exceptions moxie/core/EventTarget moxie/runtime/Runtime moxie/runtime/RuntimeClient moxie/file/FileInput moxie/core/utils/Encode moxie/file/Blob moxie/file/File moxie/file/FileDrop moxie/file/FileReader moxie/core/utils/Url moxie/runtime/RuntimeTarget moxie/file/FileReaderSync moxie/xhr/FormData moxie/xhr/XMLHttpRequest moxie/runtime/Transporter moxie/image/Image moxie/core/utils/Events".split(" "))}(this);
(function(f){var e={},q=f.moxie.core.utils.Basic.inArray;return function n(f){var c,d;for(c in f)d=typeof f[c],"object"!==d||~q(c,["Exceptions","Env","Mime"])?"function"===d&&(e[c]=f[c]):n(f[c])}(f.moxie),e.Env=f.moxie.core.utils.Env,e.Mime=f.moxie.core.utils.Mime,e.Exceptions=f.moxie.core.Exceptions,f.mOxie=e,f.o||(f.o=e),e})(this);(function(f,e,q){function k(d){function b(a,b,c){var d={chunks:"slice_blob",jpgresize:"send_binary_string",pngresize:"send_binary_string",progress:"report_upload_progress",
multi_selection:"select_multiple",dragdrop:"drag_and_drop",drop_element:"drag_and_drop",headers:"send_custom_headers",urlstream_upload:"send_binary_string",canSendBinary:"send_binary",triggerDialog:"summon_file_dialog"};d[a]?e[d[a]]=b:c||(e[a]=b)}var a=d.required_features,e={};if("string"==typeof a)c.each(a.split(/\s*,\s*/),function(a){b(a,!0)});else if("object"==typeof a)c.each(a,function(a,c){b(c,a)});else if(!0===a){0<d.chunk_size&&(e.slice_blob=!0);if(d.resize.enabled||!d.multipart)e.send_binary_string=
!0;c.each(d,function(a,c){b(c,!!a,!0)})}return e}var n=f.setTimeout,h={},c={VERSION:"2.1.8",STOPPED:1,STARTED:2,QUEUED:1,UPLOADING:2,FAILED:4,DONE:5,GENERIC_ERROR:-100,HTTP_ERROR:-200,IO_ERROR:-300,SECURITY_ERROR:-400,INIT_ERROR:-500,FILE_SIZE_ERROR:-600,FILE_EXTENSION_ERROR:-601,FILE_DUPLICATE_ERROR:-602,IMAGE_FORMAT_ERROR:-700,MEMORY_ERROR:-701,IMAGE_DIMENSIONS_ERROR:-702,mimeTypes:e.mimes,ua:e.ua,typeOf:e.typeOf,extend:e.extend,guid:e.guid,get:function(c){var b=[],a;"array"!==e.typeOf(c)&&(c=[c]);
for(var f=c.length;f--;)(a=e.get(c[f]))&&b.push(a);return b.length?b:null},each:e.each,getPos:e.getPos,getSize:e.getSize,xmlEncode:function(c){var b={"<":"lt",">":"gt","&":"amp",'"':"quot","'":"#39"},a=/[<>&\"\']/g;return c?(""+c).replace(a,function(a){return b[a]?"&"+b[a]+";":a}):c},toArray:e.toArray,inArray:e.inArray,addI18n:e.addI18n,translate:e.translate,isEmptyObj:e.isEmptyObj,hasClass:e.hasClass,addClass:e.addClass,removeClass:e.removeClass,getStyle:e.getStyle,addEvent:e.addEvent,removeEvent:e.removeEvent,
removeAllEvents:e.removeAllEvents,cleanName:function(c){var b,a;a=[/[\300-\306]/g,"A",/[\340-\346]/g,"a",/\307/g,"C",/\347/g,"c",/[\310-\313]/g,"E",/[\350-\353]/g,"e",/[\314-\317]/g,"I",/[\354-\357]/g,"i",/\321/g,"N",/\361/g,"n",/[\322-\330]/g,"O",/[\362-\370]/g,"o",/[\331-\334]/g,"U",/[\371-\374]/g,"u"];for(b=0;b<a.length;b+=2)c=c.replace(a[b],a[b+1]);return c=c.replace(/\s+/g,"_"),c=c.replace(/[^a-z0-9_\-\.]+/gi,""),c},buildUrl:function(d,b){var a="";return c.each(b,function(b,c){a+=(a?"&":"")+
encodeURIComponent(c)+"="+encodeURIComponent(b)}),a&&(d+=(0<d.indexOf("?")?"&":"?")+a),d},formatSize:function(d){function b(a,b){return Math.round(a*Math.pow(10,b))/Math.pow(10,b)}if(d===q||/\D/.test(d))return c.translate("N/A");var a=Math.pow(1024,4);return d>a?b(d/a,1)+" "+c.translate("tb"):d>(a/=1024)?b(d/a,1)+" "+c.translate("gb"):d>(a/=1024)?b(d/a,1)+" "+c.translate("mb"):1024<d?Math.round(d/1024)+" "+c.translate("kb"):d+" "+c.translate("b")},parseSize:e.parseSizeStr,predictRuntime:function(d,
b){var a,f;return a=new c.Uploader(d),f=e.Runtime.thatCan(a.getOption().required_features,b||d.runtimes),a.destroy(),f},addFileFilter:function(c,b){h[c]=b}};c.addFileFilter("mime_types",function(d,b,a){d.length&&!d.regexp.test(b.name)?(this.trigger("Error",{code:c.FILE_EXTENSION_ERROR,message:c.translate("File extension error."),file:b}),a(!1)):a(!0)});c.addFileFilter("max_file_size",function(d,b,a){d=c.parseSize(d);void 0!==b.size&&d&&b.size>d?(this.trigger("Error",{code:c.FILE_SIZE_ERROR,message:c.translate("File size error."),
file:b}),a(!1)):a(!0)});c.addFileFilter("prevent_duplicates",function(d,b,a){if(d)for(d=this.files.length;d--;)if(b.name===this.files[d].name&&b.size===this.files[d].size){this.trigger("Error",{code:c.FILE_DUPLICATE_ERROR,message:c.translate("Duplicate file error."),file:b});a(!1);return}a(!0)});c.Uploader=function(d){function b(){var a,b=0,d;if(this.state==c.STARTED){for(d=0;d<H.length;d++)a||H[d].status!=c.QUEUED?b++:(a=H[d],this.trigger("BeforeUpload",a)&&(a.status=c.UPLOADING,this.trigger("UploadFile",
a)));b==H.length&&(this.state!==c.STOPPED&&(this.state=c.STOPPED,this.trigger("StateChanged")),this.trigger("UploadComplete",H))}}function a(a){a.percent=0<a.size?Math.ceil(100*(a.loaded/a.size)):100;f()}function f(){var a,b;I.reset();for(a=0;a<H.length;a++)b=H[a],b.size!==q?(I.size+=b.origSize,I.loaded+=b.loaded*b.origSize/b.size):I.size=q,b.status==c.DONE?I.uploaded++:b.status==c.FAILED?I.failed++:I.queued++;I.size===q?I.percent=0<H.length?Math.ceil(100*(I.uploaded/H.length)):0:(I.bytesPerSec=Math.ceil(I.loaded/
((+new Date-O||1)/1E3)),I.percent=0<I.size?Math.ceil(100*(I.loaded/I.size)):0)}function g(){var a=E[0]||N[0];return a?a.getRuntime().uid:!1}function p(a,b){if(a.ruid){var c=e.Runtime.getInfo(a.ruid);if(c)return c.can(b)}return!1}function l(){this.bind("FilesAdded FilesRemoved",function(a){a.trigger("QueueChanged");a.refresh()});this.bind("CancelUpload",C);this.bind("BeforeUpload",v);this.bind("UploadFile",u);this.bind("UploadProgress",A);this.bind("StateChanged",w);this.bind("QueueChanged",f);this.bind("Error",
D);this.bind("FileUploaded",y);this.bind("Destroy",B)}function r(a,b){var d=this,f=0,g=[],h={runtime_order:a.runtimes,required_caps:a.required_features,preferred_caps:L,swf_url:a.flash_swf_url,xap_url:a.silverlight_xap_url};c.each(a.runtimes.split(/\s*,\s*/),function(b){a[b]&&(h[b]=a[b])});a.browse_button&&c.each(a.browse_button,function(b){g.push(function(g){var k=new e.FileInput(c.extend({},h,{accept:a.filters.mime_types,name:a.file_data_name,multiple:a.multi_selection,container:a.container,browse_button:b}));
k.onready=function(){var a=e.Runtime.getInfo(this.ruid);e.extend(d.features,{chunks:a.can("slice_blob"),multipart:a.can("send_multipart"),multi_selection:a.can("select_multiple")});f++;E.push(this);g()};k.onchange=function(){d.addFile(this.files)};k.bind("mouseenter mouseleave mousedown mouseup",function(c){M||(a.browse_button_hover&&("mouseenter"===c.type?e.addClass(b,a.browse_button_hover):"mouseleave"===c.type&&e.removeClass(b,a.browse_button_hover)),a.browse_button_active&&("mousedown"===c.type?
e.addClass(b,a.browse_button_active):"mouseup"===c.type&&e.removeClass(b,a.browse_button_active)))});k.bind("mousedown",function(){d.trigger("Browse")});k.bind("error runtimeerror",function(){k=null;g()});k.init()})});a.drop_element&&c.each(a.drop_element,function(a){g.push(function(b){var g=new e.FileDrop(c.extend({},h,{drop_zone:a}));g.onready=function(){var a=e.Runtime.getInfo(this.ruid);d.features.dragdrop=a.can("drag_and_drop");f++;N.push(this);b()};g.ondrop=function(){d.addFile(this.files)};
g.bind("error runtimeerror",function(){g=null;b()});g.init()})});e.inSeries(g,function(){"function"==typeof b&&b(f)})}function s(a,b,c){var d=new e.Image;try{d.onload=function(){if(b.width>this.width&&b.height>this.height&&b.quality===q&&b.preserve_headers&&!b.crop)return this.destroy(),c(a);d.downsize(b.width,b.height,b.crop,b.preserve_headers)},d.onresize=function(){c(this.getAsBlob(a.type,b.quality));this.destroy()},d.onerror=function(){c(a)},d.load(a)}catch(f){c(a)}}function t(a,b,d){function f(a,
b,d){var e=x[a];switch(a){case "max_file_size":"max_file_size"===a&&(x.max_file_size=x.filters.max_file_size=b);break;case "chunk_size":if(b=c.parseSize(b))x[a]=b,x.send_file_name=!0;break;case "multipart":(x[a]=b)||(x.send_file_name=!0);break;case "unique_names":(x[a]=b)&&(x.send_file_name=!0);break;case "filters":"array"===c.typeOf(b)&&(b={mime_types:b});d?c.extend(x.filters,b):x.filters=b;b.mime_types&&(x.filters.mime_types.regexp=function(a){var b=[];return c.each(a,function(a){c.each(a.extensions.split(/,/),
function(a){/^\s*\*\s*$/.test(a)?b.push("\\.*"):b.push("\\."+a.replace(RegExp("["+"/^$.*+?|()[]{}\\".replace(/./g,"\\$&")+"]","g"),"\\$&"))})}),RegExp("("+b.join("|")+")$","i")}(x.filters.mime_types));break;case "resize":d?c.extend(x.resize,b,{enabled:!0}):x.resize=b;break;case "prevent_duplicates":x.prevent_duplicates=x.filters.prevent_duplicates=!!b;break;case "browse_button":case "drop_element":b=c.get(b);case "container":case "runtimes":case "multi_selection":case "flash_swf_url":case "silverlight_xap_url":x[a]=
b;d||(l=!0);break;default:x[a]=b}d||h.trigger("OptionChanged",a,b,e)}var h=this,l=!1;"object"==typeof a?c.each(a,function(a,b){f(b,a,d)}):f(a,b,d);d?(x.required_features=k(c.extend({},x)),L=k(c.extend({},x,{required_features:!0}))):l&&(h.trigger("Destroy"),r.call(h,x,function(a){a?(h.runtime=e.Runtime.getInfo(g()).type,h.trigger("Init",{runtime:h.runtime}),h.trigger("PostInit")):h.trigger("Error",{code:c.INIT_ERROR,message:c.translate("Init error.")})}))}function v(a,b){if(a.settings.unique_names){var c=
b.name.match(/\.([^.]+)$/),d="part";c&&(d=c[1]);b.target_name=b.id+"."+d}}function u(a,b){function d(){0<k--?n(f,1E3):(b.loaded=m,a.trigger("Error",{code:c.HTTP_ERROR,message:c.translate("HTTP Error."),file:b,response:F.responseText,status:F.status,responseHeaders:F.getAllResponseHeaders()}))}function f(){var p,r,s={},t;b.status===c.UPLOADING&&a.state!==c.STOPPED&&(a.settings.send_file_name&&(s.name=b.target_name||b.name),h&&l.chunks&&q.size>h?(t=Math.min(h,q.size-m),p=q.slice(m,m+t)):(t=q.size,p=
q),h&&l.chunks&&(a.settings.send_chunk_number?(s.chunk=Math.ceil(m/h),s.chunks=Math.ceil(q.size/h)):(s.offset=m,s.total=q.size)),F=new e.XMLHttpRequest,F.upload&&(F.upload.onprogress=function(c){b.loaded=Math.min(b.size,m+c.loaded);a.trigger("UploadProgress",b)}),F.onload=function(){400<=F.status?d():(k=a.settings.max_retries,t<q.size?(p.destroy(),m+=t,b.loaded=Math.min(m,q.size),a.trigger("ChunkUploaded",b,{offset:b.loaded,total:q.size,response:F.responseText,status:F.status,responseHeaders:F.getAllResponseHeaders()}),
"Android Browser"===e.Env.browser&&a.trigger("UploadProgress",b)):b.loaded=b.size,p=r=null,!m||m>=q.size?(b.size!=b.origSize&&(q.destroy(),q=null),a.trigger("UploadProgress",b),b.status=c.DONE,a.trigger("FileUploaded",b,{response:F.responseText,status:F.status,responseHeaders:F.getAllResponseHeaders()})):n(f,1))},F.onerror=function(){d()},F.onloadend=function(){this.destroy();F=null},a.settings.multipart&&l.multipart?(F.open("post",g,!0),c.each(a.settings.headers,function(a,b){F.setRequestHeader(b,
a)}),r=new e.FormData,c.each(c.extend(s,a.settings.multipart_params),function(a,b){r.append(b,a)}),r.append(a.settings.file_data_name,p),F.send(r,{runtime_order:a.settings.runtimes,required_caps:a.settings.required_features,preferred_caps:L,swf_url:a.settings.flash_swf_url,xap_url:a.settings.silverlight_xap_url})):(g=c.buildUrl(a.settings.url,c.extend(s,a.settings.multipart_params)),F.open("post",g,!0),F.setRequestHeader("Content-Type","application/octet-stream"),c.each(a.settings.headers,function(a,
b){F.setRequestHeader(b,a)}),F.send(p,{runtime_order:a.settings.runtimes,required_caps:a.settings.required_features,preferred_caps:L,swf_url:a.settings.flash_swf_url,xap_url:a.settings.silverlight_xap_url})))}var g=a.settings.url,h=a.settings.chunk_size,k=a.settings.max_retries,l=a.features,m=0,q;b.loaded&&(m=b.loaded=h?h*Math.floor(b.loaded/h):0);q=b.getSource();a.settings.resize.enabled&&p(q,"send_binary_string")&&~e.inArray(q.type,["image/jpeg","image/png"])?s.call(this,q,a.settings.resize,function(a){q=
a;b.size=a.size;f()}):f()}function A(b,c){a(c)}function w(a){if(a.state==c.STARTED)O=+new Date;else if(a.state==c.STOPPED)for(var b=a.files.length-1;0<=b;b--)a.files[b].status==c.UPLOADING&&(a.files[b].status=c.QUEUED,f())}function C(){F&&F.abort()}function y(a){f();n(function(){b.call(a)},1)}function D(d,e){e.code===c.INIT_ERROR?d.destroy():e.code===c.HTTP_ERROR&&(e.file.status=c.FAILED,a(e.file),d.state==c.STARTED&&(d.trigger("CancelUpload"),n(function(){b.call(d)},1)))}function B(a){a.stop();c.each(H,
function(a){a.destroy()});H=[];E.length&&(c.each(E,function(a){a.destroy()}),E=[]);N.length&&(c.each(N,function(a){a.destroy()}),N=[]);L={};M=!1;O=F=null;I.reset()}var G=c.guid(),x,H=[],L={},E=[],N=[],O,I,M=!1,F;x={runtimes:e.Runtime.order,max_retries:0,chunk_size:0,multipart:!0,multi_selection:!0,file_data_name:"file",flash_swf_url:"js/Moxie.swf",silverlight_xap_url:"js/Moxie.xap",filters:{mime_types:[],prevent_duplicates:!1,max_file_size:0},resize:{enabled:!1,preserve_headers:!0,crop:!1},send_file_name:!0,
send_chunk_number:!0};t.call(this,d,null,!0);I=new c.QueueProgress;c.extend(this,{id:G,uid:G,state:c.STOPPED,features:{},runtime:null,files:H,settings:x,total:I,init:function(){var a=this;"function"==typeof x.preinit?x.preinit(a):c.each(x.preinit,function(b,c){a.bind(c,b)});l.call(this);x.browse_button&&x.url?r.call(this,x,function(b){"function"==typeof x.init?x.init(a):c.each(x.init,function(b,c){a.bind(c,b)});b?(a.runtime=e.Runtime.getInfo(g()).type,a.trigger("Init",{runtime:a.runtime}),a.trigger("PostInit")):
a.trigger("Error",{code:c.INIT_ERROR,message:c.translate("Init error.")})}):this.trigger("Error",{code:c.INIT_ERROR,message:c.translate("Init error.")})},setOption:function(a,b){t.call(this,a,b,!this.runtime)},getOption:function(a){return a?x[a]:x},refresh:function(){E.length&&c.each(E,function(a){a.trigger("Refresh")});this.trigger("Refresh")},start:function(){this.state!=c.STARTED&&(this.state=c.STARTED,this.trigger("StateChanged"),b.call(this))},stop:function(){this.state!=c.STOPPED&&(this.state=
c.STOPPED,this.trigger("StateChanged"),this.trigger("CancelUpload"))},disableBrowse:function(a){M=a!==q?a:!0;E.length&&c.each(E,function(a){a.disable(M)});this.trigger("DisableBrowse",M)},getFile:function(a){var b;for(b=H.length-1;0<=b;b--)if(H[b].id===a)return H[b]},addFile:function(a,b){function d(a,b){var c=[];e.each(k.settings.filters,function(b,d){h[d]&&c.push(function(c){h[d].call(k,b,a,function(a){c(!a)})})});e.inSeries(c,b)}function f(a){var g=e.typeOf(a);if(a instanceof e.File){if(!a.ruid&&
!a.isDetached()){if(!p)return!1;a.ruid=p;a.connectRuntime(p)}f(new c.File(a))}else a instanceof e.Blob?(f(a.getSource()),a.destroy()):a instanceof c.File?(b&&(a.name=b),l.push(function(b){d(a,function(c){c||(H.push(a),m.push(a),k.trigger("FileFiltered",a));n(b,1)})})):-1!==e.inArray(g,["file","blob"])?f(new e.File(null,a)):"node"===g&&"filelist"===e.typeOf(a.files)?e.each(a.files,f):"array"===g&&(b=null,e.each(a,f))}var k=this,l=[],m=[],p;p=g();f(a);l.length&&e.inSeries(l,function(){m.length&&k.trigger("FilesAdded",
m)})},removeFile:function(a){a="string"==typeof a?a:a.id;for(var b=H.length-1;0<=b;b--)if(H[b].id===a)return this.splice(b,1)[0]},splice:function(a,b){var d=H.splice(a===q?0:a,b===q?H.length:b),e=!1;return this.state==c.STARTED&&(c.each(d,function(a){if(a.status===c.UPLOADING)return e=!0,!1}),e&&this.stop()),this.trigger("FilesRemoved",d),c.each(d,function(a){a.destroy()}),e&&this.start(),d},dispatchEvent:function(a){var b,c;a=a.toLowerCase();if(b=this.hasEventListener(a)){b.sort(function(a,b){return b.priority-
a.priority});c=[].slice.call(arguments);c.shift();c.unshift(this);for(var d=0;d<b.length;d++)if(!1===b[d].fn.apply(b[d].scope,c))return!1}return!0},bind:function(a,b,d,e){c.Uploader.prototype.bind.call(this,a,b,e,d)},destroy:function(){this.trigger("Destroy");x=I=null;this.unbindAll()}})};c.Uploader.prototype=e.EventTarget.instance;c.File=function(){var d={};return function(b){c.extend(this,{id:c.guid(),name:b.name||b.fileName,type:b.type||"",size:b.size||b.fileSize,origSize:b.size||b.fileSize,loaded:0,
percent:0,status:c.QUEUED,lastModifiedDate:b.lastModifiedDate||(new Date).toLocaleString(),getNative:function(){var a=this.getSource().getSource();return-1!==e.inArray(e.typeOf(a),["blob","file"])?a:null},getSource:function(){return d[this.id]?d[this.id]:null},destroy:function(){var a=this.getSource();a&&(a.destroy(),delete d[this.id])}});d[this.id]=b}}();c.QueueProgress=function(){var c=this;c.size=0;c.loaded=0;c.uploaded=0;c.failed=0;c.queued=0;c.percent=0;c.bytesPerSec=0;c.reset=function(){c.size=
c.loaded=c.uploaded=c.failed=c.queued=c.percent=c.bytesPerSec=0}};f.plupload=c})(window,mOxie);$.telligent=$.telligent||{};$.telligent.evolution=$.telligent.evolution||{};V("components composers events lib modules plugins lib.messageLinks lib.sheetProvider lib.sheet lib.actionSheet module.maxlength lib.touchEventAdapter".split(" "),function(f,e,q,k,n,h,c,d,b,a,m,g,p,l){p(document).ready(function(){g.adapt();d.sheet=new b({parent:p("body"),enablePan:!0,maxHeightPerent:0.8,cssClass:"sheet",backgroundColor:"#333",
backgroundOpacity:0.75,animationDuration:250,onOpening:function(){p.telligent.evolution.messaging.publish("sheet.opening")},onClosing:function(){p.telligent.evolution.messaging.publish("sheet.closing")},onOpened:function(){p.telligent.evolution.messaging.publish("sheet.opened")},onClosed:function(){p.telligent.evolution.messaging.publish("sheet.closed")}});d.actionSheet=new a({sheet:d.sheet});(new c({parent:"body"})).handle("click");p.telligent.evolution.ui.render();m.shim();p.fn.evolutionValidation.init()})},
jQuery,window)})();
